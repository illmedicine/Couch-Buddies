function yC(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function zf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qd={exports:{}},fo={},Xd={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function vC(){if(J0)return ve;J0=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(R){return R===null||typeof R!="object"?null:(R=g&&R[g]||R["@@iterator"],typeof R=="function"?R:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,C={};function S(R,B,ge){this.props=R,this.context=B,this.refs=C,this.updater=ge||w}S.prototype.isReactComponent={},S.prototype.setState=function(R,B){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,B,"setState")},S.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function T(){}T.prototype=S.prototype;function N(R,B,ge){this.props=R,this.context=B,this.refs=C,this.updater=ge||w}var j=N.prototype=new T;j.constructor=N,_(j,S.prototype),j.isPureReactComponent=!0;var D=Array.isArray,L=Object.prototype.hasOwnProperty,W={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function F(R,B,ge){var ye,Ee={},ke=null,Fe=null;if(B!=null)for(ye in B.ref!==void 0&&(Fe=B.ref),B.key!==void 0&&(ke=""+B.key),B)L.call(B,ye)&&!z.hasOwnProperty(ye)&&(Ee[ye]=B[ye]);var Re=arguments.length-2;if(Re===1)Ee.children=ge;else if(1<Re){for(var Ge=Array(Re),Ut=0;Ut<Re;Ut++)Ge[Ut]=arguments[Ut+2];Ee.children=Ge}if(R&&R.defaultProps)for(ye in Re=R.defaultProps,Re)Ee[ye]===void 0&&(Ee[ye]=Re[ye]);return{$$typeof:t,type:R,key:ke,ref:Fe,props:Ee,_owner:W.current}}function X(R,B){return{$$typeof:t,type:R.type,key:B,ref:R.ref,props:R.props,_owner:R._owner}}function ie(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function xe(R){var B={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ge){return B[ge]})}var $=/\/+/g;function le(R,B){return typeof R=="object"&&R!==null&&R.key!=null?xe(""+R.key):B.toString(36)}function pe(R,B,ge,ye,Ee){var ke=typeof R;(ke==="undefined"||ke==="boolean")&&(R=null);var Fe=!1;if(R===null)Fe=!0;else switch(ke){case"string":case"number":Fe=!0;break;case"object":switch(R.$$typeof){case t:case e:Fe=!0}}if(Fe)return Fe=R,Ee=Ee(Fe),R=ye===""?"."+le(Fe,0):ye,D(Ee)?(ge="",R!=null&&(ge=R.replace($,"$&/")+"/"),pe(Ee,B,ge,"",function(Ut){return Ut})):Ee!=null&&(ie(Ee)&&(Ee=X(Ee,ge+(!Ee.key||Fe&&Fe.key===Ee.key?"":(""+Ee.key).replace($,"$&/")+"/")+R)),B.push(Ee)),1;if(Fe=0,ye=ye===""?".":ye+":",D(R))for(var Re=0;Re<R.length;Re++){ke=R[Re];var Ge=ye+le(ke,Re);Fe+=pe(ke,B,ge,Ge,Ee)}else if(Ge=y(R),typeof Ge=="function")for(R=Ge.call(R),Re=0;!(ke=R.next()).done;)ke=ke.value,Ge=ye+le(ke,Re++),Fe+=pe(ke,B,ge,Ge,Ee);else if(ke==="object")throw B=String(R),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return Fe}function G(R,B,ge){if(R==null)return R;var ye=[],Ee=0;return pe(R,ye,"","",function(ke){return B.call(ge,ke,Ee++)}),ye}function me(R){if(R._status===-1){var B=R._result;B=B(),B.then(function(ge){(R._status===0||R._status===-1)&&(R._status=1,R._result=ge)},function(ge){(R._status===0||R._status===-1)&&(R._status=2,R._result=ge)}),R._status===-1&&(R._status=0,R._result=B)}if(R._status===1)return R._result.default;throw R._result}var oe={current:null},Y={transition:null},J={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:Y,ReactCurrentOwner:W};function Q(){throw Error("act(...) is not supported in production builds of React.")}return ve.Children={map:G,forEach:function(R,B,ge){G(R,function(){B.apply(this,arguments)},ge)},count:function(R){var B=0;return G(R,function(){B++}),B},toArray:function(R){return G(R,function(B){return B})||[]},only:function(R){if(!ie(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},ve.Component=S,ve.Fragment=n,ve.Profiler=o,ve.PureComponent=N,ve.StrictMode=s,ve.Suspense=d,ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,ve.act=Q,ve.cloneElement=function(R,B,ge){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var ye=_({},R.props),Ee=R.key,ke=R.ref,Fe=R._owner;if(B!=null){if(B.ref!==void 0&&(ke=B.ref,Fe=W.current),B.key!==void 0&&(Ee=""+B.key),R.type&&R.type.defaultProps)var Re=R.type.defaultProps;for(Ge in B)L.call(B,Ge)&&!z.hasOwnProperty(Ge)&&(ye[Ge]=B[Ge]===void 0&&Re!==void 0?Re[Ge]:B[Ge])}var Ge=arguments.length-2;if(Ge===1)ye.children=ge;else if(1<Ge){Re=Array(Ge);for(var Ut=0;Ut<Ge;Ut++)Re[Ut]=arguments[Ut+2];ye.children=Re}return{$$typeof:t,type:R.type,key:Ee,ref:ke,props:ye,_owner:Fe}},ve.createContext=function(R){return R={$$typeof:u,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:l,_context:R},R.Consumer=R},ve.createElement=F,ve.createFactory=function(R){var B=F.bind(null,R);return B.type=R,B},ve.createRef=function(){return{current:null}},ve.forwardRef=function(R){return{$$typeof:h,render:R}},ve.isValidElement=ie,ve.lazy=function(R){return{$$typeof:p,_payload:{_status:-1,_result:R},_init:me}},ve.memo=function(R,B){return{$$typeof:m,type:R,compare:B===void 0?null:B}},ve.startTransition=function(R){var B=Y.transition;Y.transition={};try{R()}finally{Y.transition=B}},ve.unstable_act=Q,ve.useCallback=function(R,B){return oe.current.useCallback(R,B)},ve.useContext=function(R){return oe.current.useContext(R)},ve.useDebugValue=function(){},ve.useDeferredValue=function(R){return oe.current.useDeferredValue(R)},ve.useEffect=function(R,B){return oe.current.useEffect(R,B)},ve.useId=function(){return oe.current.useId()},ve.useImperativeHandle=function(R,B,ge){return oe.current.useImperativeHandle(R,B,ge)},ve.useInsertionEffect=function(R,B){return oe.current.useInsertionEffect(R,B)},ve.useLayoutEffect=function(R,B){return oe.current.useLayoutEffect(R,B)},ve.useMemo=function(R,B){return oe.current.useMemo(R,B)},ve.useReducer=function(R,B,ge){return oe.current.useReducer(R,B,ge)},ve.useRef=function(R){return oe.current.useRef(R)},ve.useState=function(R){return oe.current.useState(R)},ve.useSyncExternalStore=function(R,B,ge){return oe.current.useSyncExternalStore(R,B,ge)},ve.useTransition=function(){return oe.current.useTransition()},ve.version="18.3.1",ve}var ex;function oa(){return ex||(ex=1,Xd.exports=vC()),Xd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx;function wC(){if(tx)return fo;tx=1;var t=oa(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(h,d,m){var p,g={},y=null,w=null;m!==void 0&&(y=""+m),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(w=d.ref);for(p in d)s.call(d,p)&&!l.hasOwnProperty(p)&&(g[p]=d[p]);if(h&&h.defaultProps)for(p in d=h.defaultProps,d)g[p]===void 0&&(g[p]=d[p]);return{$$typeof:e,type:h,key:y,ref:w,props:g,_owner:o.current}}return fo.Fragment=n,fo.jsx=u,fo.jsxs=u,fo}var nx;function _C(){return nx||(nx=1,Qd.exports=wC()),Qd.exports}var a=_C(),k=oa();const Me=zf(k),bC=yC({__proto__:null,default:Me},[k]);var kl={},Zd={exports:{}},Ft={},Jd={exports:{}},eh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sx;function NC(){return sx||(sx=1,(function(t){function e(Y,J){var Q=Y.length;Y.push(J);e:for(;0<Q;){var R=Q-1>>>1,B=Y[R];if(0<o(B,J))Y[R]=J,Y[Q]=B,Q=R;else break e}}function n(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var J=Y[0],Q=Y.pop();if(Q!==J){Y[0]=Q;e:for(var R=0,B=Y.length,ge=B>>>1;R<ge;){var ye=2*(R+1)-1,Ee=Y[ye],ke=ye+1,Fe=Y[ke];if(0>o(Ee,Q))ke<B&&0>o(Fe,Ee)?(Y[R]=Fe,Y[ke]=Q,R=ke):(Y[R]=Ee,Y[ye]=Q,R=ye);else if(ke<B&&0>o(Fe,Q))Y[R]=Fe,Y[ke]=Q,R=ke;else break e}}return J}function o(Y,J){var Q=Y.sortIndex-J.sortIndex;return Q!==0?Q:Y.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var d=[],m=[],p=1,g=null,y=3,w=!1,_=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(Y){for(var J=n(m);J!==null;){if(J.callback===null)s(m);else if(J.startTime<=Y)s(m),J.sortIndex=J.expirationTime,e(d,J);else break;J=n(m)}}function D(Y){if(C=!1,j(Y),!_)if(n(d)!==null)_=!0,me(L);else{var J=n(m);J!==null&&oe(D,J.startTime-Y)}}function L(Y,J){_=!1,C&&(C=!1,T(F),F=-1),w=!0;var Q=y;try{for(j(J),g=n(d);g!==null&&(!(g.expirationTime>J)||Y&&!xe());){var R=g.callback;if(typeof R=="function"){g.callback=null,y=g.priorityLevel;var B=R(g.expirationTime<=J);J=t.unstable_now(),typeof B=="function"?g.callback=B:g===n(d)&&s(d),j(J)}else s(d);g=n(d)}if(g!==null)var ge=!0;else{var ye=n(m);ye!==null&&oe(D,ye.startTime-J),ge=!1}return ge}finally{g=null,y=Q,w=!1}}var W=!1,z=null,F=-1,X=5,ie=-1;function xe(){return!(t.unstable_now()-ie<X)}function $(){if(z!==null){var Y=t.unstable_now();ie=Y;var J=!0;try{J=z(!0,Y)}finally{J?le():(W=!1,z=null)}}else W=!1}var le;if(typeof N=="function")le=function(){N($)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,G=pe.port2;pe.port1.onmessage=$,le=function(){G.postMessage(null)}}else le=function(){S($,0)};function me(Y){z=Y,W||(W=!0,le())}function oe(Y,J){F=S(function(){Y(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){_||w||(_=!0,me(L))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(Y){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var Q=y;y=J;try{return Y()}finally{y=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,J){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Q=y;y=Y;try{return J()}finally{y=Q}},t.unstable_scheduleCallback=function(Y,J,Q){var R=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?R+Q:R):Q=R,Y){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=Q+B,Y={id:p++,callback:J,priorityLevel:Y,startTime:Q,expirationTime:B,sortIndex:-1},Q>R?(Y.sortIndex=Q,e(m,Y),n(d)===null&&Y===n(m)&&(C?(T(F),F=-1):C=!0,oe(D,Q-R))):(Y.sortIndex=B,e(d,Y),_||w||(_=!0,me(L))),Y},t.unstable_shouldYield=xe,t.unstable_wrapCallback=function(Y){var J=y;return function(){var Q=y;y=J;try{return Y.apply(this,arguments)}finally{y=Q}}}})(eh)),eh}var rx;function CC(){return rx||(rx=1,Jd.exports=NC()),Jd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ix;function SC(){if(ix)return Ft;ix=1;var t=oa(),e=CC();function n(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,c=1;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(r,i){u(r,i),u(r+"Capture",i)}function u(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function y(r){return d.call(g,r)?!0:d.call(p,r)?!1:m.test(r)?g[r]=!0:(p[r]=!0,!1)}function w(r,i,c,f){if(c!==null&&c.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function _(r,i,c,f){if(i===null||typeof i>"u"||w(r,i,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function C(r,i,c,f,x,v,b){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=f,this.attributeNamespace=x,this.mustUseProperty=c,this.propertyName=r,this.type=i,this.sanitizeURL=v,this.removeEmptyString=b}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){S[r]=new C(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];S[i]=new C(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){S[r]=new C(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){S[r]=new C(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){S[r]=new C(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){S[r]=new C(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){S[r]=new C(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){S[r]=new C(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){S[r]=new C(r,5,!1,r.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function N(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(T,N);S[i]=new C(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(T,N);S[i]=new C(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(T,N);S[i]=new C(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){S[r]=new C(r,1,!1,r.toLowerCase(),null,!1,!1)}),S.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){S[r]=new C(r,1,!1,r.toLowerCase(),null,!0,!0)});function j(r,i,c,f){var x=S.hasOwnProperty(i)?S[i]:null;(x!==null?x.type!==0:f||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(_(i,c,x,f)&&(c=null),f||x===null?y(i)&&(c===null?r.removeAttribute(i):r.setAttribute(i,""+c)):x.mustUseProperty?r[x.propertyName]=c===null?x.type===3?!1:"":c:(i=x.attributeName,f=x.attributeNamespace,c===null?r.removeAttribute(i):(x=x.type,c=x===3||x===4&&c===!0?"":""+c,f?r.setAttributeNS(f,i,c):r.setAttribute(i,c))))}var D=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),W=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),xe=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),Y=Symbol.iterator;function J(r){return r===null||typeof r!="object"?null:(r=Y&&r[Y]||r["@@iterator"],typeof r=="function"?r:null)}var Q=Object.assign,R;function B(r){if(R===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);R=i&&i[1]||""}return`
`+R+r}var ge=!1;function ye(r,i){if(!r||ge)return"";ge=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(O){var f=O}Reflect.construct(r,[],i)}else{try{i.call()}catch(O){f=O}r.call(i.prototype)}else{try{throw Error()}catch(O){f=O}r()}}catch(O){if(O&&f&&typeof O.stack=="string"){for(var x=O.stack.split(`
`),v=f.stack.split(`
`),b=x.length-1,E=v.length-1;1<=b&&0<=E&&x[b]!==v[E];)E--;for(;1<=b&&0<=E;b--,E--)if(x[b]!==v[E]){if(b!==1||E!==1)do if(b--,E--,0>E||x[b]!==v[E]){var P=`
`+x[b].replace(" at new "," at ");return r.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",r.displayName)),P}while(1<=b&&0<=E);break}}}finally{ge=!1,Error.prepareStackTrace=c}return(r=r?r.displayName||r.name:"")?B(r):""}function Ee(r){switch(r.tag){case 5:return B(r.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return r=ye(r.type,!1),r;case 11:return r=ye(r.type.render,!1),r;case 1:return r=ye(r.type,!0),r;default:return""}}function ke(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case z:return"Fragment";case W:return"Portal";case X:return"Profiler";case F:return"StrictMode";case le:return"Suspense";case pe:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case xe:return(r.displayName||"Context")+".Consumer";case ie:return(r._context.displayName||"Context")+".Provider";case $:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case G:return i=r.displayName||null,i!==null?i:ke(r.type)||"Memo";case me:i=r._payload,r=r._init;try{return ke(r(i))}catch{}}return null}function Fe(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(i);case 8:return i===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Re(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ge(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ut(r){var i=Ge(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),f=""+r[i];if(!r.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var x=c.get,v=c.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return x.call(this)},set:function(b){f=""+b,v.call(this,b)}}),Object.defineProperty(r,i,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(b){f=""+b},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function ya(r){r._valueTracker||(r._valueTracker=Ut(r))}function ip(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var c=i.getValue(),f="";return r&&(f=Ge(r)?r.checked?"true":"false":r.value),r=f,r!==c?(i.setValue(r),!0):!1}function va(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function su(r,i){var c=i.checked;return Q({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??r._wrapperState.initialChecked})}function op(r,i){var c=i.defaultValue==null?"":i.defaultValue,f=i.checked!=null?i.checked:i.defaultChecked;c=Re(i.value!=null?i.value:c),r._wrapperState={initialChecked:f,initialValue:c,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ap(r,i){i=i.checked,i!=null&&j(r,"checked",i,!1)}function ru(r,i){ap(r,i);var c=Re(i.value),f=i.type;if(c!=null)f==="number"?(c===0&&r.value===""||r.value!=c)&&(r.value=""+c):r.value!==""+c&&(r.value=""+c);else if(f==="submit"||f==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?iu(r,i.type,c):i.hasOwnProperty("defaultValue")&&iu(r,i.type,Re(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function lp(r,i,c){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var f=i.type;if(!(f!=="submit"&&f!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,c||i===r.value||(r.value=i),r.defaultValue=i}c=r.name,c!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,c!==""&&(r.name=c)}function iu(r,i,c){(i!=="number"||va(r.ownerDocument)!==r)&&(c==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+c&&(r.defaultValue=""+c))}var Ei=Array.isArray;function Cr(r,i,c,f){if(r=r.options,i){i={};for(var x=0;x<c.length;x++)i["$"+c[x]]=!0;for(c=0;c<r.length;c++)x=i.hasOwnProperty("$"+r[c].value),r[c].selected!==x&&(r[c].selected=x),x&&f&&(r[c].defaultSelected=!0)}else{for(c=""+Re(c),i=null,x=0;x<r.length;x++){if(r[x].value===c){r[x].selected=!0,f&&(r[x].defaultSelected=!0);return}i!==null||r[x].disabled||(i=r[x])}i!==null&&(i.selected=!0)}}function ou(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(n(91));return Q({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function cp(r,i){var c=i.value;if(c==null){if(c=i.children,i=i.defaultValue,c!=null){if(i!=null)throw Error(n(92));if(Ei(c)){if(1<c.length)throw Error(n(93));c=c[0]}i=c}i==null&&(i=""),c=i}r._wrapperState={initialValue:Re(c)}}function up(r,i){var c=Re(i.value),f=Re(i.defaultValue);c!=null&&(c=""+c,c!==r.value&&(r.value=c),i.defaultValue==null&&r.defaultValue!==c&&(r.defaultValue=c)),f!=null&&(r.defaultValue=""+f)}function dp(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function hp(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function au(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?hp(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var wa,fp=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,c,f,x){MSApp.execUnsafeLocalFunction(function(){return r(i,c,f,x)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(wa=wa||document.createElement("div"),wa.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=wa.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function ki(r,i){if(i){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=i;return}}r.textContent=i}var Ti={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bN=["Webkit","ms","Moz","O"];Object.keys(Ti).forEach(function(r){bN.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),Ti[i]=Ti[r]})});function mp(r,i,c){return i==null||typeof i=="boolean"||i===""?"":c||typeof i!="number"||i===0||Ti.hasOwnProperty(r)&&Ti[r]?(""+i).trim():i+"px"}function pp(r,i){r=r.style;for(var c in i)if(i.hasOwnProperty(c)){var f=c.indexOf("--")===0,x=mp(c,i[c],f);c==="float"&&(c="cssFloat"),f?r.setProperty(c,x):r[c]=x}}var NN=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lu(r,i){if(i){if(NN[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(n(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(n(61))}if(i.style!=null&&typeof i.style!="object")throw Error(n(62))}}function cu(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uu=null;function du(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var hu=null,Sr=null,jr=null;function gp(r){if(r=Xi(r)){if(typeof hu!="function")throw Error(n(280));var i=r.stateNode;i&&(i=Wa(i),hu(r.stateNode,r.type,i))}}function xp(r){Sr?jr?jr.push(r):jr=[r]:Sr=r}function yp(){if(Sr){var r=Sr,i=jr;if(jr=Sr=null,gp(r),i)for(r=0;r<i.length;r++)gp(i[r])}}function vp(r,i){return r(i)}function wp(){}var fu=!1;function _p(r,i,c){if(fu)return r(i,c);fu=!0;try{return vp(r,i,c)}finally{fu=!1,(Sr!==null||jr!==null)&&(wp(),yp())}}function Pi(r,i){var c=r.stateNode;if(c===null)return null;var f=Wa(c);if(f===null)return null;c=f[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(n(231,i,typeof c));return c}var mu=!1;if(h)try{var Ii={};Object.defineProperty(Ii,"passive",{get:function(){mu=!0}}),window.addEventListener("test",Ii,Ii),window.removeEventListener("test",Ii,Ii)}catch{mu=!1}function CN(r,i,c,f,x,v,b,E,P){var O=Array.prototype.slice.call(arguments,3);try{i.apply(c,O)}catch(U){this.onError(U)}}var Ri=!1,_a=null,ba=!1,pu=null,SN={onError:function(r){Ri=!0,_a=r}};function jN(r,i,c,f,x,v,b,E,P){Ri=!1,_a=null,CN.apply(SN,arguments)}function EN(r,i,c,f,x,v,b,E,P){if(jN.apply(this,arguments),Ri){if(Ri){var O=_a;Ri=!1,_a=null}else throw Error(n(198));ba||(ba=!0,pu=O)}}function Hs(r){var i=r,c=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(c=i.return),r=i.return;while(r)}return i.tag===3?c:null}function bp(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Np(r){if(Hs(r)!==r)throw Error(n(188))}function kN(r){var i=r.alternate;if(!i){if(i=Hs(r),i===null)throw Error(n(188));return i!==r?null:r}for(var c=r,f=i;;){var x=c.return;if(x===null)break;var v=x.alternate;if(v===null){if(f=x.return,f!==null){c=f;continue}break}if(x.child===v.child){for(v=x.child;v;){if(v===c)return Np(x),r;if(v===f)return Np(x),i;v=v.sibling}throw Error(n(188))}if(c.return!==f.return)c=x,f=v;else{for(var b=!1,E=x.child;E;){if(E===c){b=!0,c=x,f=v;break}if(E===f){b=!0,f=x,c=v;break}E=E.sibling}if(!b){for(E=v.child;E;){if(E===c){b=!0,c=v,f=x;break}if(E===f){b=!0,f=v,c=x;break}E=E.sibling}if(!b)throw Error(n(189))}}if(c.alternate!==f)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?r:i}function Cp(r){return r=kN(r),r!==null?Sp(r):null}function Sp(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=Sp(r);if(i!==null)return i;r=r.sibling}return null}var jp=e.unstable_scheduleCallback,Ep=e.unstable_cancelCallback,TN=e.unstable_shouldYield,PN=e.unstable_requestPaint,nt=e.unstable_now,IN=e.unstable_getCurrentPriorityLevel,gu=e.unstable_ImmediatePriority,kp=e.unstable_UserBlockingPriority,Na=e.unstable_NormalPriority,RN=e.unstable_LowPriority,Tp=e.unstable_IdlePriority,Ca=null,wn=null;function AN(r){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Ca,r,void 0,(r.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:ON,DN=Math.log,MN=Math.LN2;function ON(r){return r>>>=0,r===0?32:31-(DN(r)/MN|0)|0}var Sa=64,ja=4194304;function Ai(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Ea(r,i){var c=r.pendingLanes;if(c===0)return 0;var f=0,x=r.suspendedLanes,v=r.pingedLanes,b=c&268435455;if(b!==0){var E=b&~x;E!==0?f=Ai(E):(v&=b,v!==0&&(f=Ai(v)))}else b=c&~x,b!==0?f=Ai(b):v!==0&&(f=Ai(v));if(f===0)return 0;if(i!==0&&i!==f&&(i&x)===0&&(x=f&-f,v=i&-i,x>=v||x===16&&(v&4194240)!==0))return i;if((f&4)!==0&&(f|=c&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=f;0<i;)c=31-sn(i),x=1<<c,f|=r[c],i&=~x;return f}function LN(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FN(r,i){for(var c=r.suspendedLanes,f=r.pingedLanes,x=r.expirationTimes,v=r.pendingLanes;0<v;){var b=31-sn(v),E=1<<b,P=x[b];P===-1?((E&c)===0||(E&f)!==0)&&(x[b]=LN(E,i)):P<=i&&(r.expiredLanes|=E),v&=~E}}function xu(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Pp(){var r=Sa;return Sa<<=1,(Sa&4194240)===0&&(Sa=64),r}function yu(r){for(var i=[],c=0;31>c;c++)i.push(r);return i}function Di(r,i,c){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-sn(i),r[i]=c}function BN(r,i){var c=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var f=r.eventTimes;for(r=r.expirationTimes;0<c;){var x=31-sn(c),v=1<<x;i[x]=0,f[x]=-1,r[x]=-1,c&=~v}}function vu(r,i){var c=r.entangledLanes|=i;for(r=r.entanglements;c;){var f=31-sn(c),x=1<<f;x&i|r[f]&i&&(r[f]|=i),c&=~x}}var Ae=0;function Ip(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Rp,wu,Ap,Dp,Mp,_u=!1,ka=[],is=null,os=null,as=null,Mi=new Map,Oi=new Map,ls=[],zN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Op(r,i){switch(r){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":Mi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oi.delete(i.pointerId)}}function Li(r,i,c,f,x,v){return r===null||r.nativeEvent!==v?(r={blockedOn:i,domEventName:c,eventSystemFlags:f,nativeEvent:v,targetContainers:[x]},i!==null&&(i=Xi(i),i!==null&&wu(i)),r):(r.eventSystemFlags|=f,i=r.targetContainers,x!==null&&i.indexOf(x)===-1&&i.push(x),r)}function VN(r,i,c,f,x){switch(i){case"focusin":return is=Li(is,r,i,c,f,x),!0;case"dragenter":return os=Li(os,r,i,c,f,x),!0;case"mouseover":return as=Li(as,r,i,c,f,x),!0;case"pointerover":var v=x.pointerId;return Mi.set(v,Li(Mi.get(v)||null,r,i,c,f,x)),!0;case"gotpointercapture":return v=x.pointerId,Oi.set(v,Li(Oi.get(v)||null,r,i,c,f,x)),!0}return!1}function Lp(r){var i=Gs(r.target);if(i!==null){var c=Hs(i);if(c!==null){if(i=c.tag,i===13){if(i=bp(c),i!==null){r.blockedOn=i,Mp(r.priority,function(){Ap(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ta(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var c=Nu(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(c===null){c=r.nativeEvent;var f=new c.constructor(c.type,c);uu=f,c.target.dispatchEvent(f),uu=null}else return i=Xi(c),i!==null&&wu(i),r.blockedOn=c,!1;i.shift()}return!0}function Fp(r,i,c){Ta(r)&&c.delete(i)}function UN(){_u=!1,is!==null&&Ta(is)&&(is=null),os!==null&&Ta(os)&&(os=null),as!==null&&Ta(as)&&(as=null),Mi.forEach(Fp),Oi.forEach(Fp)}function Fi(r,i){r.blockedOn===i&&(r.blockedOn=null,_u||(_u=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,UN)))}function Bi(r){function i(x){return Fi(x,r)}if(0<ka.length){Fi(ka[0],r);for(var c=1;c<ka.length;c++){var f=ka[c];f.blockedOn===r&&(f.blockedOn=null)}}for(is!==null&&Fi(is,r),os!==null&&Fi(os,r),as!==null&&Fi(as,r),Mi.forEach(i),Oi.forEach(i),c=0;c<ls.length;c++)f=ls[c],f.blockedOn===r&&(f.blockedOn=null);for(;0<ls.length&&(c=ls[0],c.blockedOn===null);)Lp(c),c.blockedOn===null&&ls.shift()}var Er=D.ReactCurrentBatchConfig,Pa=!0;function WN(r,i,c,f){var x=Ae,v=Er.transition;Er.transition=null;try{Ae=1,bu(r,i,c,f)}finally{Ae=x,Er.transition=v}}function $N(r,i,c,f){var x=Ae,v=Er.transition;Er.transition=null;try{Ae=4,bu(r,i,c,f)}finally{Ae=x,Er.transition=v}}function bu(r,i,c,f){if(Pa){var x=Nu(r,i,c,f);if(x===null)zu(r,i,f,Ia,c),Op(r,f);else if(VN(x,r,i,c,f))f.stopPropagation();else if(Op(r,f),i&4&&-1<zN.indexOf(r)){for(;x!==null;){var v=Xi(x);if(v!==null&&Rp(v),v=Nu(r,i,c,f),v===null&&zu(r,i,f,Ia,c),v===x)break;x=v}x!==null&&f.stopPropagation()}else zu(r,i,f,null,c)}}var Ia=null;function Nu(r,i,c,f){if(Ia=null,r=du(f),r=Gs(r),r!==null)if(i=Hs(r),i===null)r=null;else if(c=i.tag,c===13){if(r=bp(i),r!==null)return r;r=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return Ia=r,null}function Bp(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IN()){case gu:return 1;case kp:return 4;case Na:case RN:return 16;case Tp:return 536870912;default:return 16}default:return 16}}var cs=null,Cu=null,Ra=null;function zp(){if(Ra)return Ra;var r,i=Cu,c=i.length,f,x="value"in cs?cs.value:cs.textContent,v=x.length;for(r=0;r<c&&i[r]===x[r];r++);var b=c-r;for(f=1;f<=b&&i[c-f]===x[v-f];f++);return Ra=x.slice(r,1<f?1-f:void 0)}function Aa(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Da(){return!0}function Vp(){return!1}function Wt(r){function i(c,f,x,v,b){this._reactName=c,this._targetInst=x,this.type=f,this.nativeEvent=v,this.target=b,this.currentTarget=null;for(var E in r)r.hasOwnProperty(E)&&(c=r[E],this[E]=c?c(v):v[E]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Da:Vp,this.isPropagationStopped=Vp,this}return Q(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Da)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Da)},persist:function(){},isPersistent:Da}),i}var kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Su=Wt(kr),zi=Q({},kr,{view:0,detail:0}),HN=Wt(zi),ju,Eu,Vi,Ma=Q({},zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Vi&&(Vi&&r.type==="mousemove"?(ju=r.screenX-Vi.screenX,Eu=r.screenY-Vi.screenY):Eu=ju=0,Vi=r),ju)},movementY:function(r){return"movementY"in r?r.movementY:Eu}}),Up=Wt(Ma),GN=Q({},Ma,{dataTransfer:0}),YN=Wt(GN),KN=Q({},zi,{relatedTarget:0}),ku=Wt(KN),qN=Q({},kr,{animationName:0,elapsedTime:0,pseudoElement:0}),QN=Wt(qN),XN=Q({},kr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ZN=Wt(XN),JN=Q({},kr,{data:0}),Wp=Wt(JN),e2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s2(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=n2[r])?!!i[r]:!1}function Tu(){return s2}var r2=Q({},zi,{key:function(r){if(r.key){var i=e2[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Aa(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?t2[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tu,charCode:function(r){return r.type==="keypress"?Aa(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Aa(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),i2=Wt(r2),o2=Q({},Ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$p=Wt(o2),a2=Q({},zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tu}),l2=Wt(a2),c2=Q({},kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),u2=Wt(c2),d2=Q({},Ma,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),h2=Wt(d2),f2=[9,13,27,32],Pu=h&&"CompositionEvent"in window,Ui=null;h&&"documentMode"in document&&(Ui=document.documentMode);var m2=h&&"TextEvent"in window&&!Ui,Hp=h&&(!Pu||Ui&&8<Ui&&11>=Ui),Gp=" ",Yp=!1;function Kp(r,i){switch(r){case"keyup":return f2.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Tr=!1;function p2(r,i){switch(r){case"compositionend":return qp(i);case"keypress":return i.which!==32?null:(Yp=!0,Gp);case"textInput":return r=i.data,r===Gp&&Yp?null:r;default:return null}}function g2(r,i){if(Tr)return r==="compositionend"||!Pu&&Kp(r,i)?(r=zp(),Ra=Cu=cs=null,Tr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Hp&&i.locale!=="ko"?null:i.data;default:return null}}var x2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qp(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!x2[r.type]:i==="textarea"}function Xp(r,i,c,f){xp(f),i=za(i,"onChange"),0<i.length&&(c=new Su("onChange","change",null,c,f),r.push({event:c,listeners:i}))}var Wi=null,$i=null;function y2(r){pg(r,0)}function Oa(r){var i=Dr(r);if(ip(i))return r}function v2(r,i){if(r==="change")return i}var Zp=!1;if(h){var Iu;if(h){var Ru="oninput"in document;if(!Ru){var Jp=document.createElement("div");Jp.setAttribute("oninput","return;"),Ru=typeof Jp.oninput=="function"}Iu=Ru}else Iu=!1;Zp=Iu&&(!document.documentMode||9<document.documentMode)}function eg(){Wi&&(Wi.detachEvent("onpropertychange",tg),$i=Wi=null)}function tg(r){if(r.propertyName==="value"&&Oa($i)){var i=[];Xp(i,$i,r,du(r)),_p(y2,i)}}function w2(r,i,c){r==="focusin"?(eg(),Wi=i,$i=c,Wi.attachEvent("onpropertychange",tg)):r==="focusout"&&eg()}function _2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Oa($i)}function b2(r,i){if(r==="click")return Oa(i)}function N2(r,i){if(r==="input"||r==="change")return Oa(i)}function C2(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var rn=typeof Object.is=="function"?Object.is:C2;function Hi(r,i){if(rn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var c=Object.keys(r),f=Object.keys(i);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var x=c[f];if(!d.call(i,x)||!rn(r[x],i[x]))return!1}return!0}function ng(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function sg(r,i){var c=ng(r);r=0;for(var f;c;){if(c.nodeType===3){if(f=r+c.textContent.length,r<=i&&f>=i)return{node:c,offset:i-r};r=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=ng(c)}}function rg(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?rg(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function ig(){for(var r=window,i=va();i instanceof r.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)r=i.contentWindow;else break;i=va(r.document)}return i}function Au(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function S2(r){var i=ig(),c=r.focusedElem,f=r.selectionRange;if(i!==c&&c&&c.ownerDocument&&rg(c.ownerDocument.documentElement,c)){if(f!==null&&Au(c)){if(i=f.start,r=f.end,r===void 0&&(r=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(r,c.value.length);else if(r=(i=c.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var x=c.textContent.length,v=Math.min(f.start,x);f=f.end===void 0?v:Math.min(f.end,x),!r.extend&&v>f&&(x=f,f=v,v=x),x=sg(c,v);var b=sg(c,f);x&&b&&(r.rangeCount!==1||r.anchorNode!==x.node||r.anchorOffset!==x.offset||r.focusNode!==b.node||r.focusOffset!==b.offset)&&(i=i.createRange(),i.setStart(x.node,x.offset),r.removeAllRanges(),v>f?(r.addRange(i),r.extend(b.node,b.offset)):(i.setEnd(b.node,b.offset),r.addRange(i)))}}for(i=[],r=c;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)r=i[c],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var j2=h&&"documentMode"in document&&11>=document.documentMode,Pr=null,Du=null,Gi=null,Mu=!1;function og(r,i,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Mu||Pr==null||Pr!==va(f)||(f=Pr,"selectionStart"in f&&Au(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Gi&&Hi(Gi,f)||(Gi=f,f=za(Du,"onSelect"),0<f.length&&(i=new Su("onSelect","select",null,i,c),r.push({event:i,listeners:f}),i.target=Pr)))}function La(r,i){var c={};return c[r.toLowerCase()]=i.toLowerCase(),c["Webkit"+r]="webkit"+i,c["Moz"+r]="moz"+i,c}var Ir={animationend:La("Animation","AnimationEnd"),animationiteration:La("Animation","AnimationIteration"),animationstart:La("Animation","AnimationStart"),transitionend:La("Transition","TransitionEnd")},Ou={},ag={};h&&(ag=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);function Fa(r){if(Ou[r])return Ou[r];if(!Ir[r])return r;var i=Ir[r],c;for(c in i)if(i.hasOwnProperty(c)&&c in ag)return Ou[r]=i[c];return r}var lg=Fa("animationend"),cg=Fa("animationiteration"),ug=Fa("animationstart"),dg=Fa("transitionend"),hg=new Map,fg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function us(r,i){hg.set(r,i),l(i,[r])}for(var Lu=0;Lu<fg.length;Lu++){var Fu=fg[Lu],E2=Fu.toLowerCase(),k2=Fu[0].toUpperCase()+Fu.slice(1);us(E2,"on"+k2)}us(lg,"onAnimationEnd"),us(cg,"onAnimationIteration"),us(ug,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(dg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yi));function mg(r,i,c){var f=r.type||"unknown-event";r.currentTarget=c,EN(f,i,void 0,r),r.currentTarget=null}function pg(r,i){i=(i&4)!==0;for(var c=0;c<r.length;c++){var f=r[c],x=f.event;f=f.listeners;e:{var v=void 0;if(i)for(var b=f.length-1;0<=b;b--){var E=f[b],P=E.instance,O=E.currentTarget;if(E=E.listener,P!==v&&x.isPropagationStopped())break e;mg(x,E,O),v=P}else for(b=0;b<f.length;b++){if(E=f[b],P=E.instance,O=E.currentTarget,E=E.listener,P!==v&&x.isPropagationStopped())break e;mg(x,E,O),v=P}}}if(ba)throw r=pu,ba=!1,pu=null,r}function We(r,i){var c=i[Gu];c===void 0&&(c=i[Gu]=new Set);var f=r+"__bubble";c.has(f)||(gg(i,r,2,!1),c.add(f))}function Bu(r,i,c){var f=0;i&&(f|=4),gg(c,r,f,i)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function Ki(r){if(!r[Ba]){r[Ba]=!0,s.forEach(function(c){c!=="selectionchange"&&(T2.has(c)||Bu(c,!1,r),Bu(c,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Ba]||(i[Ba]=!0,Bu("selectionchange",!1,i))}}function gg(r,i,c,f){switch(Bp(i)){case 1:var x=WN;break;case 4:x=$N;break;default:x=bu}c=x.bind(null,i,c,r),x=void 0,!mu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(x=!0),f?x!==void 0?r.addEventListener(i,c,{capture:!0,passive:x}):r.addEventListener(i,c,!0):x!==void 0?r.addEventListener(i,c,{passive:x}):r.addEventListener(i,c,!1)}function zu(r,i,c,f,x){var v=f;if((i&1)===0&&(i&2)===0&&f!==null)e:for(;;){if(f===null)return;var b=f.tag;if(b===3||b===4){var E=f.stateNode.containerInfo;if(E===x||E.nodeType===8&&E.parentNode===x)break;if(b===4)for(b=f.return;b!==null;){var P=b.tag;if((P===3||P===4)&&(P=b.stateNode.containerInfo,P===x||P.nodeType===8&&P.parentNode===x))return;b=b.return}for(;E!==null;){if(b=Gs(E),b===null)return;if(P=b.tag,P===5||P===6){f=v=b;continue e}E=E.parentNode}}f=f.return}_p(function(){var O=v,U=du(c),H=[];e:{var V=hg.get(r);if(V!==void 0){var Z=Su,te=r;switch(r){case"keypress":if(Aa(c)===0)break e;case"keydown":case"keyup":Z=i2;break;case"focusin":te="focus",Z=ku;break;case"focusout":te="blur",Z=ku;break;case"beforeblur":case"afterblur":Z=ku;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Up;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=YN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=l2;break;case lg:case cg:case ug:Z=QN;break;case dg:Z=u2;break;case"scroll":Z=HN;break;case"wheel":Z=h2;break;case"copy":case"cut":case"paste":Z=ZN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=$p}var se=(i&4)!==0,st=!se&&r==="scroll",A=se?V!==null?V+"Capture":null:V;se=[];for(var I=O,M;I!==null;){M=I;var K=M.stateNode;if(M.tag===5&&K!==null&&(M=K,A!==null&&(K=Pi(I,A),K!=null&&se.push(qi(I,K,M)))),st)break;I=I.return}0<se.length&&(V=new Z(V,te,null,c,U),H.push({event:V,listeners:se}))}}if((i&7)===0){e:{if(V=r==="mouseover"||r==="pointerover",Z=r==="mouseout"||r==="pointerout",V&&c!==uu&&(te=c.relatedTarget||c.fromElement)&&(Gs(te)||te[Fn]))break e;if((Z||V)&&(V=U.window===U?U:(V=U.ownerDocument)?V.defaultView||V.parentWindow:window,Z?(te=c.relatedTarget||c.toElement,Z=O,te=te?Gs(te):null,te!==null&&(st=Hs(te),te!==st||te.tag!==5&&te.tag!==6)&&(te=null)):(Z=null,te=O),Z!==te)){if(se=Up,K="onMouseLeave",A="onMouseEnter",I="mouse",(r==="pointerout"||r==="pointerover")&&(se=$p,K="onPointerLeave",A="onPointerEnter",I="pointer"),st=Z==null?V:Dr(Z),M=te==null?V:Dr(te),V=new se(K,I+"leave",Z,c,U),V.target=st,V.relatedTarget=M,K=null,Gs(U)===O&&(se=new se(A,I+"enter",te,c,U),se.target=M,se.relatedTarget=st,K=se),st=K,Z&&te)t:{for(se=Z,A=te,I=0,M=se;M;M=Rr(M))I++;for(M=0,K=A;K;K=Rr(K))M++;for(;0<I-M;)se=Rr(se),I--;for(;0<M-I;)A=Rr(A),M--;for(;I--;){if(se===A||A!==null&&se===A.alternate)break t;se=Rr(se),A=Rr(A)}se=null}else se=null;Z!==null&&xg(H,V,Z,se,!1),te!==null&&st!==null&&xg(H,st,te,se,!0)}}e:{if(V=O?Dr(O):window,Z=V.nodeName&&V.nodeName.toLowerCase(),Z==="select"||Z==="input"&&V.type==="file")var ae=v2;else if(Qp(V))if(Zp)ae=N2;else{ae=_2;var ce=w2}else(Z=V.nodeName)&&Z.toLowerCase()==="input"&&(V.type==="checkbox"||V.type==="radio")&&(ae=b2);if(ae&&(ae=ae(r,O))){Xp(H,ae,c,U);break e}ce&&ce(r,V,O),r==="focusout"&&(ce=V._wrapperState)&&ce.controlled&&V.type==="number"&&iu(V,"number",V.value)}switch(ce=O?Dr(O):window,r){case"focusin":(Qp(ce)||ce.contentEditable==="true")&&(Pr=ce,Du=O,Gi=null);break;case"focusout":Gi=Du=Pr=null;break;case"mousedown":Mu=!0;break;case"contextmenu":case"mouseup":case"dragend":Mu=!1,og(H,c,U);break;case"selectionchange":if(j2)break;case"keydown":case"keyup":og(H,c,U)}var ue;if(Pu)e:{switch(r){case"compositionstart":var fe="onCompositionStart";break e;case"compositionend":fe="onCompositionEnd";break e;case"compositionupdate":fe="onCompositionUpdate";break e}fe=void 0}else Tr?Kp(r,c)&&(fe="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(fe="onCompositionStart");fe&&(Hp&&c.locale!=="ko"&&(Tr||fe!=="onCompositionStart"?fe==="onCompositionEnd"&&Tr&&(ue=zp()):(cs=U,Cu="value"in cs?cs.value:cs.textContent,Tr=!0)),ce=za(O,fe),0<ce.length&&(fe=new Wp(fe,r,null,c,U),H.push({event:fe,listeners:ce}),ue?fe.data=ue:(ue=qp(c),ue!==null&&(fe.data=ue)))),(ue=m2?p2(r,c):g2(r,c))&&(O=za(O,"onBeforeInput"),0<O.length&&(U=new Wp("onBeforeInput","beforeinput",null,c,U),H.push({event:U,listeners:O}),U.data=ue))}pg(H,i)})}function qi(r,i,c){return{instance:r,listener:i,currentTarget:c}}function za(r,i){for(var c=i+"Capture",f=[];r!==null;){var x=r,v=x.stateNode;x.tag===5&&v!==null&&(x=v,v=Pi(r,c),v!=null&&f.unshift(qi(r,v,x)),v=Pi(r,i),v!=null&&f.push(qi(r,v,x))),r=r.return}return f}function Rr(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function xg(r,i,c,f,x){for(var v=i._reactName,b=[];c!==null&&c!==f;){var E=c,P=E.alternate,O=E.stateNode;if(P!==null&&P===f)break;E.tag===5&&O!==null&&(E=O,x?(P=Pi(c,v),P!=null&&b.unshift(qi(c,P,E))):x||(P=Pi(c,v),P!=null&&b.push(qi(c,P,E)))),c=c.return}b.length!==0&&r.push({event:i,listeners:b})}var P2=/\r\n?/g,I2=/\u0000|\uFFFD/g;function yg(r){return(typeof r=="string"?r:""+r).replace(P2,`
`).replace(I2,"")}function Va(r,i,c){if(i=yg(i),yg(r)!==i&&c)throw Error(n(425))}function Ua(){}var Vu=null,Uu=null;function Wu(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var $u=typeof setTimeout=="function"?setTimeout:void 0,R2=typeof clearTimeout=="function"?clearTimeout:void 0,vg=typeof Promise=="function"?Promise:void 0,A2=typeof queueMicrotask=="function"?queueMicrotask:typeof vg<"u"?function(r){return vg.resolve(null).then(r).catch(D2)}:$u;function D2(r){setTimeout(function(){throw r})}function Hu(r,i){var c=i,f=0;do{var x=c.nextSibling;if(r.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"){if(f===0){r.removeChild(x),Bi(i);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=x}while(c);Bi(i)}function ds(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function wg(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return r;i--}else c==="/$"&&i++}r=r.previousSibling}return null}var Ar=Math.random().toString(36).slice(2),_n="__reactFiber$"+Ar,Qi="__reactProps$"+Ar,Fn="__reactContainer$"+Ar,Gu="__reactEvents$"+Ar,M2="__reactListeners$"+Ar,O2="__reactHandles$"+Ar;function Gs(r){var i=r[_n];if(i)return i;for(var c=r.parentNode;c;){if(i=c[Fn]||c[_n]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(r=wg(r);r!==null;){if(c=r[_n])return c;r=wg(r)}return i}r=c,c=r.parentNode}return null}function Xi(r){return r=r[_n]||r[Fn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Dr(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function Wa(r){return r[Qi]||null}var Yu=[],Mr=-1;function hs(r){return{current:r}}function $e(r){0>Mr||(r.current=Yu[Mr],Yu[Mr]=null,Mr--)}function Be(r,i){Mr++,Yu[Mr]=r.current,r.current=i}var fs={},_t=hs(fs),At=hs(!1),Ys=fs;function Or(r,i){var c=r.type.contextTypes;if(!c)return fs;var f=r.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===i)return f.__reactInternalMemoizedMaskedChildContext;var x={},v;for(v in c)x[v]=i[v];return f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=x),x}function Dt(r){return r=r.childContextTypes,r!=null}function $a(){$e(At),$e(_t)}function _g(r,i,c){if(_t.current!==fs)throw Error(n(168));Be(_t,i),Be(At,c)}function bg(r,i,c){var f=r.stateNode;if(i=i.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var x in f)if(!(x in i))throw Error(n(108,Fe(r)||"Unknown",x));return Q({},c,f)}function Ha(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||fs,Ys=_t.current,Be(_t,r),Be(At,At.current),!0}function Ng(r,i,c){var f=r.stateNode;if(!f)throw Error(n(169));c?(r=bg(r,i,Ys),f.__reactInternalMemoizedMergedChildContext=r,$e(At),$e(_t),Be(_t,r)):$e(At),Be(At,c)}var Bn=null,Ga=!1,Ku=!1;function Cg(r){Bn===null?Bn=[r]:Bn.push(r)}function L2(r){Ga=!0,Cg(r)}function ms(){if(!Ku&&Bn!==null){Ku=!0;var r=0,i=Ae;try{var c=Bn;for(Ae=1;r<c.length;r++){var f=c[r];do f=f(!0);while(f!==null)}Bn=null,Ga=!1}catch(x){throw Bn!==null&&(Bn=Bn.slice(r+1)),jp(gu,ms),x}finally{Ae=i,Ku=!1}}return null}var Lr=[],Fr=0,Ya=null,Ka=0,Kt=[],qt=0,Ks=null,zn=1,Vn="";function qs(r,i){Lr[Fr++]=Ka,Lr[Fr++]=Ya,Ya=r,Ka=i}function Sg(r,i,c){Kt[qt++]=zn,Kt[qt++]=Vn,Kt[qt++]=Ks,Ks=r;var f=zn;r=Vn;var x=32-sn(f)-1;f&=~(1<<x),c+=1;var v=32-sn(i)+x;if(30<v){var b=x-x%5;v=(f&(1<<b)-1).toString(32),f>>=b,x-=b,zn=1<<32-sn(i)+x|c<<x|f,Vn=v+r}else zn=1<<v|c<<x|f,Vn=r}function qu(r){r.return!==null&&(qs(r,1),Sg(r,1,0))}function Qu(r){for(;r===Ya;)Ya=Lr[--Fr],Lr[Fr]=null,Ka=Lr[--Fr],Lr[Fr]=null;for(;r===Ks;)Ks=Kt[--qt],Kt[qt]=null,Vn=Kt[--qt],Kt[qt]=null,zn=Kt[--qt],Kt[qt]=null}var $t=null,Ht=null,Ye=!1,on=null;function jg(r,i){var c=Jt(5,null,null,0);c.elementType="DELETED",c.stateNode=i,c.return=r,i=r.deletions,i===null?(r.deletions=[c],r.flags|=16):i.push(c)}function Eg(r,i){switch(r.tag){case 5:var c=r.type;return i=i.nodeType!==1||c.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,$t=r,Ht=ds(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,$t=r,Ht=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(c=Ks!==null?{id:zn,overflow:Vn}:null,r.memoizedState={dehydrated:i,treeContext:c,retryLane:1073741824},c=Jt(18,null,null,0),c.stateNode=i,c.return=r,r.child=c,$t=r,Ht=null,!0):!1;default:return!1}}function Xu(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Zu(r){if(Ye){var i=Ht;if(i){var c=i;if(!Eg(r,i)){if(Xu(r))throw Error(n(418));i=ds(c.nextSibling);var f=$t;i&&Eg(r,i)?jg(f,c):(r.flags=r.flags&-4097|2,Ye=!1,$t=r)}}else{if(Xu(r))throw Error(n(418));r.flags=r.flags&-4097|2,Ye=!1,$t=r}}}function kg(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;$t=r}function qa(r){if(r!==$t)return!1;if(!Ye)return kg(r),Ye=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Wu(r.type,r.memoizedProps)),i&&(i=Ht)){if(Xu(r))throw Tg(),Error(n(418));for(;i;)jg(r,i),i=ds(i.nextSibling)}if(kg(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"){if(i===0){Ht=ds(r.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++}r=r.nextSibling}Ht=null}}else Ht=$t?ds(r.stateNode.nextSibling):null;return!0}function Tg(){for(var r=Ht;r;)r=ds(r.nextSibling)}function Br(){Ht=$t=null,Ye=!1}function Ju(r){on===null?on=[r]:on.push(r)}var F2=D.ReactCurrentBatchConfig;function Zi(r,i,c){if(r=c.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var f=c.stateNode}if(!f)throw Error(n(147,r));var x=f,v=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===v?i.ref:(i=function(b){var E=x.refs;b===null?delete E[v]:E[v]=b},i._stringRef=v,i)}if(typeof r!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,r))}return r}function Qa(r,i){throw r=Object.prototype.toString.call(i),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Pg(r){var i=r._init;return i(r._payload)}function Ig(r){function i(A,I){if(r){var M=A.deletions;M===null?(A.deletions=[I],A.flags|=16):M.push(I)}}function c(A,I){if(!r)return null;for(;I!==null;)i(A,I),I=I.sibling;return null}function f(A,I){for(A=new Map;I!==null;)I.key!==null?A.set(I.key,I):A.set(I.index,I),I=I.sibling;return A}function x(A,I){return A=bs(A,I),A.index=0,A.sibling=null,A}function v(A,I,M){return A.index=M,r?(M=A.alternate,M!==null?(M=M.index,M<I?(A.flags|=2,I):M):(A.flags|=2,I)):(A.flags|=1048576,I)}function b(A){return r&&A.alternate===null&&(A.flags|=2),A}function E(A,I,M,K){return I===null||I.tag!==6?(I=$d(M,A.mode,K),I.return=A,I):(I=x(I,M),I.return=A,I)}function P(A,I,M,K){var ae=M.type;return ae===z?U(A,I,M.props.children,K,M.key):I!==null&&(I.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===me&&Pg(ae)===I.type)?(K=x(I,M.props),K.ref=Zi(A,I,M),K.return=A,K):(K=wl(M.type,M.key,M.props,null,A.mode,K),K.ref=Zi(A,I,M),K.return=A,K)}function O(A,I,M,K){return I===null||I.tag!==4||I.stateNode.containerInfo!==M.containerInfo||I.stateNode.implementation!==M.implementation?(I=Hd(M,A.mode,K),I.return=A,I):(I=x(I,M.children||[]),I.return=A,I)}function U(A,I,M,K,ae){return I===null||I.tag!==7?(I=sr(M,A.mode,K,ae),I.return=A,I):(I=x(I,M),I.return=A,I)}function H(A,I,M){if(typeof I=="string"&&I!==""||typeof I=="number")return I=$d(""+I,A.mode,M),I.return=A,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case L:return M=wl(I.type,I.key,I.props,null,A.mode,M),M.ref=Zi(A,null,I),M.return=A,M;case W:return I=Hd(I,A.mode,M),I.return=A,I;case me:var K=I._init;return H(A,K(I._payload),M)}if(Ei(I)||J(I))return I=sr(I,A.mode,M,null),I.return=A,I;Qa(A,I)}return null}function V(A,I,M,K){var ae=I!==null?I.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return ae!==null?null:E(A,I,""+M,K);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case L:return M.key===ae?P(A,I,M,K):null;case W:return M.key===ae?O(A,I,M,K):null;case me:return ae=M._init,V(A,I,ae(M._payload),K)}if(Ei(M)||J(M))return ae!==null?null:U(A,I,M,K,null);Qa(A,M)}return null}function Z(A,I,M,K,ae){if(typeof K=="string"&&K!==""||typeof K=="number")return A=A.get(M)||null,E(I,A,""+K,ae);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case L:return A=A.get(K.key===null?M:K.key)||null,P(I,A,K,ae);case W:return A=A.get(K.key===null?M:K.key)||null,O(I,A,K,ae);case me:var ce=K._init;return Z(A,I,M,ce(K._payload),ae)}if(Ei(K)||J(K))return A=A.get(M)||null,U(I,A,K,ae,null);Qa(I,K)}return null}function te(A,I,M,K){for(var ae=null,ce=null,ue=I,fe=I=0,mt=null;ue!==null&&fe<M.length;fe++){ue.index>fe?(mt=ue,ue=null):mt=ue.sibling;var Te=V(A,ue,M[fe],K);if(Te===null){ue===null&&(ue=mt);break}r&&ue&&Te.alternate===null&&i(A,ue),I=v(Te,I,fe),ce===null?ae=Te:ce.sibling=Te,ce=Te,ue=mt}if(fe===M.length)return c(A,ue),Ye&&qs(A,fe),ae;if(ue===null){for(;fe<M.length;fe++)ue=H(A,M[fe],K),ue!==null&&(I=v(ue,I,fe),ce===null?ae=ue:ce.sibling=ue,ce=ue);return Ye&&qs(A,fe),ae}for(ue=f(A,ue);fe<M.length;fe++)mt=Z(ue,A,fe,M[fe],K),mt!==null&&(r&&mt.alternate!==null&&ue.delete(mt.key===null?fe:mt.key),I=v(mt,I,fe),ce===null?ae=mt:ce.sibling=mt,ce=mt);return r&&ue.forEach(function(Ns){return i(A,Ns)}),Ye&&qs(A,fe),ae}function se(A,I,M,K){var ae=J(M);if(typeof ae!="function")throw Error(n(150));if(M=ae.call(M),M==null)throw Error(n(151));for(var ce=ae=null,ue=I,fe=I=0,mt=null,Te=M.next();ue!==null&&!Te.done;fe++,Te=M.next()){ue.index>fe?(mt=ue,ue=null):mt=ue.sibling;var Ns=V(A,ue,Te.value,K);if(Ns===null){ue===null&&(ue=mt);break}r&&ue&&Ns.alternate===null&&i(A,ue),I=v(Ns,I,fe),ce===null?ae=Ns:ce.sibling=Ns,ce=Ns,ue=mt}if(Te.done)return c(A,ue),Ye&&qs(A,fe),ae;if(ue===null){for(;!Te.done;fe++,Te=M.next())Te=H(A,Te.value,K),Te!==null&&(I=v(Te,I,fe),ce===null?ae=Te:ce.sibling=Te,ce=Te);return Ye&&qs(A,fe),ae}for(ue=f(A,ue);!Te.done;fe++,Te=M.next())Te=Z(ue,A,fe,Te.value,K),Te!==null&&(r&&Te.alternate!==null&&ue.delete(Te.key===null?fe:Te.key),I=v(Te,I,fe),ce===null?ae=Te:ce.sibling=Te,ce=Te);return r&&ue.forEach(function(xC){return i(A,xC)}),Ye&&qs(A,fe),ae}function st(A,I,M,K){if(typeof M=="object"&&M!==null&&M.type===z&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case L:e:{for(var ae=M.key,ce=I;ce!==null;){if(ce.key===ae){if(ae=M.type,ae===z){if(ce.tag===7){c(A,ce.sibling),I=x(ce,M.props.children),I.return=A,A=I;break e}}else if(ce.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===me&&Pg(ae)===ce.type){c(A,ce.sibling),I=x(ce,M.props),I.ref=Zi(A,ce,M),I.return=A,A=I;break e}c(A,ce);break}else i(A,ce);ce=ce.sibling}M.type===z?(I=sr(M.props.children,A.mode,K,M.key),I.return=A,A=I):(K=wl(M.type,M.key,M.props,null,A.mode,K),K.ref=Zi(A,I,M),K.return=A,A=K)}return b(A);case W:e:{for(ce=M.key;I!==null;){if(I.key===ce)if(I.tag===4&&I.stateNode.containerInfo===M.containerInfo&&I.stateNode.implementation===M.implementation){c(A,I.sibling),I=x(I,M.children||[]),I.return=A,A=I;break e}else{c(A,I);break}else i(A,I);I=I.sibling}I=Hd(M,A.mode,K),I.return=A,A=I}return b(A);case me:return ce=M._init,st(A,I,ce(M._payload),K)}if(Ei(M))return te(A,I,M,K);if(J(M))return se(A,I,M,K);Qa(A,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,I!==null&&I.tag===6?(c(A,I.sibling),I=x(I,M),I.return=A,A=I):(c(A,I),I=$d(M,A.mode,K),I.return=A,A=I),b(A)):c(A,I)}return st}var zr=Ig(!0),Rg=Ig(!1),Xa=hs(null),Za=null,Vr=null,ed=null;function td(){ed=Vr=Za=null}function nd(r){var i=Xa.current;$e(Xa),r._currentValue=i}function sd(r,i,c){for(;r!==null;){var f=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,f!==null&&(f.childLanes|=i)):f!==null&&(f.childLanes&i)!==i&&(f.childLanes|=i),r===c)break;r=r.return}}function Ur(r,i){Za=r,ed=Vr=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(Mt=!0),r.firstContext=null)}function Qt(r){var i=r._currentValue;if(ed!==r)if(r={context:r,memoizedValue:i,next:null},Vr===null){if(Za===null)throw Error(n(308));Vr=r,Za.dependencies={lanes:0,firstContext:r}}else Vr=Vr.next=r;return i}var Qs=null;function rd(r){Qs===null?Qs=[r]:Qs.push(r)}function Ag(r,i,c,f){var x=i.interleaved;return x===null?(c.next=c,rd(i)):(c.next=x.next,x.next=c),i.interleaved=c,Un(r,f)}function Un(r,i){r.lanes|=i;var c=r.alternate;for(c!==null&&(c.lanes|=i),c=r,r=r.return;r!==null;)r.childLanes|=i,c=r.alternate,c!==null&&(c.childLanes|=i),c=r,r=r.return;return c.tag===3?c.stateNode:null}var ps=!1;function id(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dg(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Wn(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function gs(r,i,c){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(Se&2)!==0){var x=f.pending;return x===null?i.next=i:(i.next=x.next,x.next=i),f.pending=i,Un(r,c)}return x=f.interleaved,x===null?(i.next=i,rd(f)):(i.next=x.next,x.next=i),f.interleaved=i,Un(r,c)}function Ja(r,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194240)!==0)){var f=i.lanes;f&=r.pendingLanes,c|=f,i.lanes=c,vu(r,c)}}function Mg(r,i){var c=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var x=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var b={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};v===null?x=v=b:v=v.next=b,c=c.next}while(c!==null);v===null?x=v=i:v=v.next=i}else x=v=i;c={baseState:f.baseState,firstBaseUpdate:x,lastBaseUpdate:v,shared:f.shared,effects:f.effects},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=i:r.next=i,c.lastBaseUpdate=i}function el(r,i,c,f){var x=r.updateQueue;ps=!1;var v=x.firstBaseUpdate,b=x.lastBaseUpdate,E=x.shared.pending;if(E!==null){x.shared.pending=null;var P=E,O=P.next;P.next=null,b===null?v=O:b.next=O,b=P;var U=r.alternate;U!==null&&(U=U.updateQueue,E=U.lastBaseUpdate,E!==b&&(E===null?U.firstBaseUpdate=O:E.next=O,U.lastBaseUpdate=P))}if(v!==null){var H=x.baseState;b=0,U=O=P=null,E=v;do{var V=E.lane,Z=E.eventTime;if((f&V)===V){U!==null&&(U=U.next={eventTime:Z,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var te=r,se=E;switch(V=i,Z=c,se.tag){case 1:if(te=se.payload,typeof te=="function"){H=te.call(Z,H,V);break e}H=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=se.payload,V=typeof te=="function"?te.call(Z,H,V):te,V==null)break e;H=Q({},H,V);break e;case 2:ps=!0}}E.callback!==null&&E.lane!==0&&(r.flags|=64,V=x.effects,V===null?x.effects=[E]:V.push(E))}else Z={eventTime:Z,lane:V,tag:E.tag,payload:E.payload,callback:E.callback,next:null},U===null?(O=U=Z,P=H):U=U.next=Z,b|=V;if(E=E.next,E===null){if(E=x.shared.pending,E===null)break;V=E,E=V.next,V.next=null,x.lastBaseUpdate=V,x.shared.pending=null}}while(!0);if(U===null&&(P=H),x.baseState=P,x.firstBaseUpdate=O,x.lastBaseUpdate=U,i=x.shared.interleaved,i!==null){x=i;do b|=x.lane,x=x.next;while(x!==i)}else v===null&&(x.shared.lanes=0);Js|=b,r.lanes=b,r.memoizedState=H}}function Og(r,i,c){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var f=r[i],x=f.callback;if(x!==null){if(f.callback=null,f=c,typeof x!="function")throw Error(n(191,x));x.call(f)}}}var Ji={},bn=hs(Ji),eo=hs(Ji),to=hs(Ji);function Xs(r){if(r===Ji)throw Error(n(174));return r}function od(r,i){switch(Be(to,i),Be(eo,r),Be(bn,Ji),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:au(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=au(i,r)}$e(bn),Be(bn,i)}function Wr(){$e(bn),$e(eo),$e(to)}function Lg(r){Xs(to.current);var i=Xs(bn.current),c=au(i,r.type);i!==c&&(Be(eo,r),Be(bn,c))}function ad(r){eo.current===r&&($e(bn),$e(eo))}var Ke=hs(0);function tl(r){for(var i=r;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ld=[];function cd(){for(var r=0;r<ld.length;r++)ld[r]._workInProgressVersionPrimary=null;ld.length=0}var nl=D.ReactCurrentDispatcher,ud=D.ReactCurrentBatchConfig,Zs=0,qe=null,ot=null,ht=null,sl=!1,no=!1,so=0,B2=0;function bt(){throw Error(n(321))}function dd(r,i){if(i===null)return!1;for(var c=0;c<i.length&&c<r.length;c++)if(!rn(r[c],i[c]))return!1;return!0}function hd(r,i,c,f,x,v){if(Zs=v,qe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,nl.current=r===null||r.memoizedState===null?W2:$2,r=c(f,x),no){v=0;do{if(no=!1,so=0,25<=v)throw Error(n(301));v+=1,ht=ot=null,i.updateQueue=null,nl.current=H2,r=c(f,x)}while(no)}if(nl.current=ol,i=ot!==null&&ot.next!==null,Zs=0,ht=ot=qe=null,sl=!1,i)throw Error(n(300));return r}function fd(){var r=so!==0;return so=0,r}function Nn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?qe.memoizedState=ht=r:ht=ht.next=r,ht}function Xt(){if(ot===null){var r=qe.alternate;r=r!==null?r.memoizedState:null}else r=ot.next;var i=ht===null?qe.memoizedState:ht.next;if(i!==null)ht=i,ot=r;else{if(r===null)throw Error(n(310));ot=r,r={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ht===null?qe.memoizedState=ht=r:ht=ht.next=r}return ht}function ro(r,i){return typeof i=="function"?i(r):i}function md(r){var i=Xt(),c=i.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var f=ot,x=f.baseQueue,v=c.pending;if(v!==null){if(x!==null){var b=x.next;x.next=v.next,v.next=b}f.baseQueue=x=v,c.pending=null}if(x!==null){v=x.next,f=f.baseState;var E=b=null,P=null,O=v;do{var U=O.lane;if((Zs&U)===U)P!==null&&(P=P.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),f=O.hasEagerState?O.eagerState:r(f,O.action);else{var H={lane:U,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};P===null?(E=P=H,b=f):P=P.next=H,qe.lanes|=U,Js|=U}O=O.next}while(O!==null&&O!==v);P===null?b=f:P.next=E,rn(f,i.memoizedState)||(Mt=!0),i.memoizedState=f,i.baseState=b,i.baseQueue=P,c.lastRenderedState=f}if(r=c.interleaved,r!==null){x=r;do v=x.lane,qe.lanes|=v,Js|=v,x=x.next;while(x!==r)}else x===null&&(c.lanes=0);return[i.memoizedState,c.dispatch]}function pd(r){var i=Xt(),c=i.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var f=c.dispatch,x=c.pending,v=i.memoizedState;if(x!==null){c.pending=null;var b=x=x.next;do v=r(v,b.action),b=b.next;while(b!==x);rn(v,i.memoizedState)||(Mt=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),c.lastRenderedState=v}return[v,f]}function Fg(){}function Bg(r,i){var c=qe,f=Xt(),x=i(),v=!rn(f.memoizedState,x);if(v&&(f.memoizedState=x,Mt=!0),f=f.queue,gd(Ug.bind(null,c,f,r),[r]),f.getSnapshot!==i||v||ht!==null&&ht.memoizedState.tag&1){if(c.flags|=2048,io(9,Vg.bind(null,c,f,x,i),void 0,null),ft===null)throw Error(n(349));(Zs&30)!==0||zg(c,i,x)}return x}function zg(r,i,c){r.flags|=16384,r={getSnapshot:i,value:c},i=qe.updateQueue,i===null?(i={lastEffect:null,stores:null},qe.updateQueue=i,i.stores=[r]):(c=i.stores,c===null?i.stores=[r]:c.push(r))}function Vg(r,i,c,f){i.value=c,i.getSnapshot=f,Wg(i)&&$g(r)}function Ug(r,i,c){return c(function(){Wg(i)&&$g(r)})}function Wg(r){var i=r.getSnapshot;r=r.value;try{var c=i();return!rn(r,c)}catch{return!0}}function $g(r){var i=Un(r,1);i!==null&&un(i,r,1,-1)}function Hg(r){var i=Nn();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:r},i.queue=r,r=r.dispatch=U2.bind(null,qe,r),[i.memoizedState,r]}function io(r,i,c,f){return r={tag:r,create:i,destroy:c,deps:f,next:null},i=qe.updateQueue,i===null?(i={lastEffect:null,stores:null},qe.updateQueue=i,i.lastEffect=r.next=r):(c=i.lastEffect,c===null?i.lastEffect=r.next=r:(f=c.next,c.next=r,r.next=f,i.lastEffect=r)),r}function Gg(){return Xt().memoizedState}function rl(r,i,c,f){var x=Nn();qe.flags|=r,x.memoizedState=io(1|i,c,void 0,f===void 0?null:f)}function il(r,i,c,f){var x=Xt();f=f===void 0?null:f;var v=void 0;if(ot!==null){var b=ot.memoizedState;if(v=b.destroy,f!==null&&dd(f,b.deps)){x.memoizedState=io(i,c,v,f);return}}qe.flags|=r,x.memoizedState=io(1|i,c,v,f)}function Yg(r,i){return rl(8390656,8,r,i)}function gd(r,i){return il(2048,8,r,i)}function Kg(r,i){return il(4,2,r,i)}function qg(r,i){return il(4,4,r,i)}function Qg(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Xg(r,i,c){return c=c!=null?c.concat([r]):null,il(4,4,Qg.bind(null,i,r),c)}function xd(){}function Zg(r,i){var c=Xt();i=i===void 0?null:i;var f=c.memoizedState;return f!==null&&i!==null&&dd(i,f[1])?f[0]:(c.memoizedState=[r,i],r)}function Jg(r,i){var c=Xt();i=i===void 0?null:i;var f=c.memoizedState;return f!==null&&i!==null&&dd(i,f[1])?f[0]:(r=r(),c.memoizedState=[r,i],r)}function e0(r,i,c){return(Zs&21)===0?(r.baseState&&(r.baseState=!1,Mt=!0),r.memoizedState=c):(rn(c,i)||(c=Pp(),qe.lanes|=c,Js|=c,r.baseState=!0),i)}function z2(r,i){var c=Ae;Ae=c!==0&&4>c?c:4,r(!0);var f=ud.transition;ud.transition={};try{r(!1),i()}finally{Ae=c,ud.transition=f}}function t0(){return Xt().memoizedState}function V2(r,i,c){var f=ws(r);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},n0(r))s0(i,c);else if(c=Ag(r,i,c,f),c!==null){var x=Tt();un(c,r,f,x),r0(c,i,f)}}function U2(r,i,c){var f=ws(r),x={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(n0(r))s0(i,x);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var b=i.lastRenderedState,E=v(b,c);if(x.hasEagerState=!0,x.eagerState=E,rn(E,b)){var P=i.interleaved;P===null?(x.next=x,rd(i)):(x.next=P.next,P.next=x),i.interleaved=x;return}}catch{}finally{}c=Ag(r,i,x,f),c!==null&&(x=Tt(),un(c,r,f,x),r0(c,i,f))}}function n0(r){var i=r.alternate;return r===qe||i!==null&&i===qe}function s0(r,i){no=sl=!0;var c=r.pending;c===null?i.next=i:(i.next=c.next,c.next=i),r.pending=i}function r0(r,i,c){if((c&4194240)!==0){var f=i.lanes;f&=r.pendingLanes,c|=f,i.lanes=c,vu(r,c)}}var ol={readContext:Qt,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},W2={readContext:Qt,useCallback:function(r,i){return Nn().memoizedState=[r,i===void 0?null:i],r},useContext:Qt,useEffect:Yg,useImperativeHandle:function(r,i,c){return c=c!=null?c.concat([r]):null,rl(4194308,4,Qg.bind(null,i,r),c)},useLayoutEffect:function(r,i){return rl(4194308,4,r,i)},useInsertionEffect:function(r,i){return rl(4,2,r,i)},useMemo:function(r,i){var c=Nn();return i=i===void 0?null:i,r=r(),c.memoizedState=[r,i],r},useReducer:function(r,i,c){var f=Nn();return i=c!==void 0?c(i):i,f.memoizedState=f.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},f.queue=r,r=r.dispatch=V2.bind(null,qe,r),[f.memoizedState,r]},useRef:function(r){var i=Nn();return r={current:r},i.memoizedState=r},useState:Hg,useDebugValue:xd,useDeferredValue:function(r){return Nn().memoizedState=r},useTransition:function(){var r=Hg(!1),i=r[0];return r=z2.bind(null,r[1]),Nn().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,c){var f=qe,x=Nn();if(Ye){if(c===void 0)throw Error(n(407));c=c()}else{if(c=i(),ft===null)throw Error(n(349));(Zs&30)!==0||zg(f,i,c)}x.memoizedState=c;var v={value:c,getSnapshot:i};return x.queue=v,Yg(Ug.bind(null,f,v,r),[r]),f.flags|=2048,io(9,Vg.bind(null,f,v,c,i),void 0,null),c},useId:function(){var r=Nn(),i=ft.identifierPrefix;if(Ye){var c=Vn,f=zn;c=(f&~(1<<32-sn(f)-1)).toString(32)+c,i=":"+i+"R"+c,c=so++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=B2++,i=":"+i+"r"+c.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},$2={readContext:Qt,useCallback:Zg,useContext:Qt,useEffect:gd,useImperativeHandle:Xg,useInsertionEffect:Kg,useLayoutEffect:qg,useMemo:Jg,useReducer:md,useRef:Gg,useState:function(){return md(ro)},useDebugValue:xd,useDeferredValue:function(r){var i=Xt();return e0(i,ot.memoizedState,r)},useTransition:function(){var r=md(ro)[0],i=Xt().memoizedState;return[r,i]},useMutableSource:Fg,useSyncExternalStore:Bg,useId:t0,unstable_isNewReconciler:!1},H2={readContext:Qt,useCallback:Zg,useContext:Qt,useEffect:gd,useImperativeHandle:Xg,useInsertionEffect:Kg,useLayoutEffect:qg,useMemo:Jg,useReducer:pd,useRef:Gg,useState:function(){return pd(ro)},useDebugValue:xd,useDeferredValue:function(r){var i=Xt();return ot===null?i.memoizedState=r:e0(i,ot.memoizedState,r)},useTransition:function(){var r=pd(ro)[0],i=Xt().memoizedState;return[r,i]},useMutableSource:Fg,useSyncExternalStore:Bg,useId:t0,unstable_isNewReconciler:!1};function an(r,i){if(r&&r.defaultProps){i=Q({},i),r=r.defaultProps;for(var c in r)i[c]===void 0&&(i[c]=r[c]);return i}return i}function yd(r,i,c,f){i=r.memoizedState,c=c(f,i),c=c==null?i:Q({},i,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var al={isMounted:function(r){return(r=r._reactInternals)?Hs(r)===r:!1},enqueueSetState:function(r,i,c){r=r._reactInternals;var f=Tt(),x=ws(r),v=Wn(f,x);v.payload=i,c!=null&&(v.callback=c),i=gs(r,v,x),i!==null&&(un(i,r,x,f),Ja(i,r,x))},enqueueReplaceState:function(r,i,c){r=r._reactInternals;var f=Tt(),x=ws(r),v=Wn(f,x);v.tag=1,v.payload=i,c!=null&&(v.callback=c),i=gs(r,v,x),i!==null&&(un(i,r,x,f),Ja(i,r,x))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var c=Tt(),f=ws(r),x=Wn(c,f);x.tag=2,i!=null&&(x.callback=i),i=gs(r,x,f),i!==null&&(un(i,r,f,c),Ja(i,r,f))}};function i0(r,i,c,f,x,v,b){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,v,b):i.prototype&&i.prototype.isPureReactComponent?!Hi(c,f)||!Hi(x,v):!0}function o0(r,i,c){var f=!1,x=fs,v=i.contextType;return typeof v=="object"&&v!==null?v=Qt(v):(x=Dt(i)?Ys:_t.current,f=i.contextTypes,v=(f=f!=null)?Or(r,x):fs),i=new i(c,v),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=al,r.stateNode=i,i._reactInternals=r,f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=x,r.__reactInternalMemoizedMaskedChildContext=v),i}function a0(r,i,c,f){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,f),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,f),i.state!==r&&al.enqueueReplaceState(i,i.state,null)}function vd(r,i,c,f){var x=r.stateNode;x.props=c,x.state=r.memoizedState,x.refs={},id(r);var v=i.contextType;typeof v=="object"&&v!==null?x.context=Qt(v):(v=Dt(i)?Ys:_t.current,x.context=Or(r,v)),x.state=r.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(yd(r,i,v,c),x.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(i=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),i!==x.state&&al.enqueueReplaceState(x,x.state,null),el(r,c,x,f),x.state=r.memoizedState),typeof x.componentDidMount=="function"&&(r.flags|=4194308)}function $r(r,i){try{var c="",f=i;do c+=Ee(f),f=f.return;while(f);var x=c}catch(v){x=`
Error generating stack: `+v.message+`
`+v.stack}return{value:r,source:i,stack:x,digest:null}}function wd(r,i,c){return{value:r,source:null,stack:c??null,digest:i??null}}function _d(r,i){try{console.error(i.value)}catch(c){setTimeout(function(){throw c})}}var G2=typeof WeakMap=="function"?WeakMap:Map;function l0(r,i,c){c=Wn(-1,c),c.tag=3,c.payload={element:null};var f=i.value;return c.callback=function(){ml||(ml=!0,Od=f),_d(r,i)},c}function c0(r,i,c){c=Wn(-1,c),c.tag=3;var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var x=i.value;c.payload=function(){return f(x)},c.callback=function(){_d(r,i)}}var v=r.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(c.callback=function(){_d(r,i),typeof f!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var b=i.stack;this.componentDidCatch(i.value,{componentStack:b!==null?b:""})}),c}function u0(r,i,c){var f=r.pingCache;if(f===null){f=r.pingCache=new G2;var x=new Set;f.set(i,x)}else x=f.get(i),x===void 0&&(x=new Set,f.set(i,x));x.has(c)||(x.add(c),r=oC.bind(null,r,i,c),i.then(r,r))}function d0(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function h0(r,i,c,f,x){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(i=Wn(-1,1),i.tag=2,gs(c,i,1))),c.lanes|=1),r):(r.flags|=65536,r.lanes=x,r)}var Y2=D.ReactCurrentOwner,Mt=!1;function kt(r,i,c,f){i.child=r===null?Rg(i,null,c,f):zr(i,r.child,c,f)}function f0(r,i,c,f,x){c=c.render;var v=i.ref;return Ur(i,x),f=hd(r,i,c,f,v,x),c=fd(),r!==null&&!Mt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~x,$n(r,i,x)):(Ye&&c&&qu(i),i.flags|=1,kt(r,i,f,x),i.child)}function m0(r,i,c,f,x){if(r===null){var v=c.type;return typeof v=="function"&&!Wd(v)&&v.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(i.tag=15,i.type=v,p0(r,i,v,f,x)):(r=wl(c.type,null,f,i,i.mode,x),r.ref=i.ref,r.return=i,i.child=r)}if(v=r.child,(r.lanes&x)===0){var b=v.memoizedProps;if(c=c.compare,c=c!==null?c:Hi,c(b,f)&&r.ref===i.ref)return $n(r,i,x)}return i.flags|=1,r=bs(v,f),r.ref=i.ref,r.return=i,i.child=r}function p0(r,i,c,f,x){if(r!==null){var v=r.memoizedProps;if(Hi(v,f)&&r.ref===i.ref)if(Mt=!1,i.pendingProps=f=v,(r.lanes&x)!==0)(r.flags&131072)!==0&&(Mt=!0);else return i.lanes=r.lanes,$n(r,i,x)}return bd(r,i,c,f,x)}function g0(r,i,c){var f=i.pendingProps,x=f.children,v=r!==null?r.memoizedState:null;if(f.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(Gr,Gt),Gt|=c;else{if((c&1073741824)===0)return r=v!==null?v.baseLanes|c:c,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,Be(Gr,Gt),Gt|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:c,Be(Gr,Gt),Gt|=f}else v!==null?(f=v.baseLanes|c,i.memoizedState=null):f=c,Be(Gr,Gt),Gt|=f;return kt(r,i,x,c),i.child}function x0(r,i){var c=i.ref;(r===null&&c!==null||r!==null&&r.ref!==c)&&(i.flags|=512,i.flags|=2097152)}function bd(r,i,c,f,x){var v=Dt(c)?Ys:_t.current;return v=Or(i,v),Ur(i,x),c=hd(r,i,c,f,v,x),f=fd(),r!==null&&!Mt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~x,$n(r,i,x)):(Ye&&f&&qu(i),i.flags|=1,kt(r,i,c,x),i.child)}function y0(r,i,c,f,x){if(Dt(c)){var v=!0;Ha(i)}else v=!1;if(Ur(i,x),i.stateNode===null)cl(r,i),o0(i,c,f),vd(i,c,f,x),f=!0;else if(r===null){var b=i.stateNode,E=i.memoizedProps;b.props=E;var P=b.context,O=c.contextType;typeof O=="object"&&O!==null?O=Qt(O):(O=Dt(c)?Ys:_t.current,O=Or(i,O));var U=c.getDerivedStateFromProps,H=typeof U=="function"||typeof b.getSnapshotBeforeUpdate=="function";H||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==f||P!==O)&&a0(i,b,f,O),ps=!1;var V=i.memoizedState;b.state=V,el(i,f,b,x),P=i.memoizedState,E!==f||V!==P||At.current||ps?(typeof U=="function"&&(yd(i,c,U,f),P=i.memoizedState),(E=ps||i0(i,c,E,f,V,P,O))?(H||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(i.flags|=4194308)):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=f,i.memoizedState=P),b.props=f,b.state=P,b.context=O,f=E):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),f=!1)}else{b=i.stateNode,Dg(r,i),E=i.memoizedProps,O=i.type===i.elementType?E:an(i.type,E),b.props=O,H=i.pendingProps,V=b.context,P=c.contextType,typeof P=="object"&&P!==null?P=Qt(P):(P=Dt(c)?Ys:_t.current,P=Or(i,P));var Z=c.getDerivedStateFromProps;(U=typeof Z=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==H||V!==P)&&a0(i,b,f,P),ps=!1,V=i.memoizedState,b.state=V,el(i,f,b,x);var te=i.memoizedState;E!==H||V!==te||At.current||ps?(typeof Z=="function"&&(yd(i,c,Z,f),te=i.memoizedState),(O=ps||i0(i,c,O,f,V,te,P)||!1)?(U||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,te,P),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,te,P)),typeof b.componentDidUpdate=="function"&&(i.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof b.componentDidUpdate!="function"||E===r.memoizedProps&&V===r.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&V===r.memoizedState||(i.flags|=1024),i.memoizedProps=f,i.memoizedState=te),b.props=f,b.state=te,b.context=P,f=O):(typeof b.componentDidUpdate!="function"||E===r.memoizedProps&&V===r.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&V===r.memoizedState||(i.flags|=1024),f=!1)}return Nd(r,i,c,f,v,x)}function Nd(r,i,c,f,x,v){x0(r,i);var b=(i.flags&128)!==0;if(!f&&!b)return x&&Ng(i,c,!1),$n(r,i,v);f=i.stateNode,Y2.current=i;var E=b&&typeof c.getDerivedStateFromError!="function"?null:f.render();return i.flags|=1,r!==null&&b?(i.child=zr(i,r.child,null,v),i.child=zr(i,null,E,v)):kt(r,i,E,v),i.memoizedState=f.state,x&&Ng(i,c,!0),i.child}function v0(r){var i=r.stateNode;i.pendingContext?_g(r,i.pendingContext,i.pendingContext!==i.context):i.context&&_g(r,i.context,!1),od(r,i.containerInfo)}function w0(r,i,c,f,x){return Br(),Ju(x),i.flags|=256,kt(r,i,c,f),i.child}var Cd={dehydrated:null,treeContext:null,retryLane:0};function Sd(r){return{baseLanes:r,cachePool:null,transitions:null}}function _0(r,i,c){var f=i.pendingProps,x=Ke.current,v=!1,b=(i.flags&128)!==0,E;if((E=b)||(E=r!==null&&r.memoizedState===null?!1:(x&2)!==0),E?(v=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(x|=1),Be(Ke,x&1),r===null)return Zu(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(b=f.children,r=f.fallback,v?(f=i.mode,v=i.child,b={mode:"hidden",children:b},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=b):v=_l(b,f,0,null),r=sr(r,f,c,null),v.return=i,r.return=i,v.sibling=r,i.child=v,i.child.memoizedState=Sd(c),i.memoizedState=Cd,r):jd(i,b));if(x=r.memoizedState,x!==null&&(E=x.dehydrated,E!==null))return K2(r,i,b,f,E,x,c);if(v){v=f.fallback,b=i.mode,x=r.child,E=x.sibling;var P={mode:"hidden",children:f.children};return(b&1)===0&&i.child!==x?(f=i.child,f.childLanes=0,f.pendingProps=P,i.deletions=null):(f=bs(x,P),f.subtreeFlags=x.subtreeFlags&14680064),E!==null?v=bs(E,v):(v=sr(v,b,c,null),v.flags|=2),v.return=i,f.return=i,f.sibling=v,i.child=f,f=v,v=i.child,b=r.child.memoizedState,b=b===null?Sd(c):{baseLanes:b.baseLanes|c,cachePool:null,transitions:b.transitions},v.memoizedState=b,v.childLanes=r.childLanes&~c,i.memoizedState=Cd,f}return v=r.child,r=v.sibling,f=bs(v,{mode:"visible",children:f.children}),(i.mode&1)===0&&(f.lanes=c),f.return=i,f.sibling=null,r!==null&&(c=i.deletions,c===null?(i.deletions=[r],i.flags|=16):c.push(r)),i.child=f,i.memoizedState=null,f}function jd(r,i){return i=_l({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function ll(r,i,c,f){return f!==null&&Ju(f),zr(i,r.child,null,c),r=jd(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function K2(r,i,c,f,x,v,b){if(c)return i.flags&256?(i.flags&=-257,f=wd(Error(n(422))),ll(r,i,b,f)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(v=f.fallback,x=i.mode,f=_l({mode:"visible",children:f.children},x,0,null),v=sr(v,x,b,null),v.flags|=2,f.return=i,v.return=i,f.sibling=v,i.child=f,(i.mode&1)!==0&&zr(i,r.child,null,b),i.child.memoizedState=Sd(b),i.memoizedState=Cd,v);if((i.mode&1)===0)return ll(r,i,b,null);if(x.data==="$!"){if(f=x.nextSibling&&x.nextSibling.dataset,f)var E=f.dgst;return f=E,v=Error(n(419)),f=wd(v,f,void 0),ll(r,i,b,f)}if(E=(b&r.childLanes)!==0,Mt||E){if(f=ft,f!==null){switch(b&-b){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(f.suspendedLanes|b))!==0?0:x,x!==0&&x!==v.retryLane&&(v.retryLane=x,Un(r,x),un(f,r,x,-1))}return Ud(),f=wd(Error(n(421))),ll(r,i,b,f)}return x.data==="$?"?(i.flags|=128,i.child=r.child,i=aC.bind(null,r),x._reactRetry=i,null):(r=v.treeContext,Ht=ds(x.nextSibling),$t=i,Ye=!0,on=null,r!==null&&(Kt[qt++]=zn,Kt[qt++]=Vn,Kt[qt++]=Ks,zn=r.id,Vn=r.overflow,Ks=i),i=jd(i,f.children),i.flags|=4096,i)}function b0(r,i,c){r.lanes|=i;var f=r.alternate;f!==null&&(f.lanes|=i),sd(r.return,i,c)}function Ed(r,i,c,f,x){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:x}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=c,v.tailMode=x)}function N0(r,i,c){var f=i.pendingProps,x=f.revealOrder,v=f.tail;if(kt(r,i,f.children,c),f=Ke.current,(f&2)!==0)f=f&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&b0(r,c,i);else if(r.tag===19)b0(r,c,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}if(Be(Ke,f),(i.mode&1)===0)i.memoizedState=null;else switch(x){case"forwards":for(c=i.child,x=null;c!==null;)r=c.alternate,r!==null&&tl(r)===null&&(x=c),c=c.sibling;c=x,c===null?(x=i.child,i.child=null):(x=c.sibling,c.sibling=null),Ed(i,!1,x,c,v);break;case"backwards":for(c=null,x=i.child,i.child=null;x!==null;){if(r=x.alternate,r!==null&&tl(r)===null){i.child=x;break}r=x.sibling,x.sibling=c,c=x,x=r}Ed(i,!0,c,null,v);break;case"together":Ed(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function cl(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function $n(r,i,c){if(r!==null&&(i.dependencies=r.dependencies),Js|=i.lanes,(c&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(n(153));if(i.child!==null){for(r=i.child,c=bs(r,r.pendingProps),i.child=c,c.return=i;r.sibling!==null;)r=r.sibling,c=c.sibling=bs(r,r.pendingProps),c.return=i;c.sibling=null}return i.child}function q2(r,i,c){switch(i.tag){case 3:v0(i),Br();break;case 5:Lg(i);break;case 1:Dt(i.type)&&Ha(i);break;case 4:od(i,i.stateNode.containerInfo);break;case 10:var f=i.type._context,x=i.memoizedProps.value;Be(Xa,f._currentValue),f._currentValue=x;break;case 13:if(f=i.memoizedState,f!==null)return f.dehydrated!==null?(Be(Ke,Ke.current&1),i.flags|=128,null):(c&i.child.childLanes)!==0?_0(r,i,c):(Be(Ke,Ke.current&1),r=$n(r,i,c),r!==null?r.sibling:null);Be(Ke,Ke.current&1);break;case 19:if(f=(c&i.childLanes)!==0,(r.flags&128)!==0){if(f)return N0(r,i,c);i.flags|=128}if(x=i.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Be(Ke,Ke.current),f)break;return null;case 22:case 23:return i.lanes=0,g0(r,i,c)}return $n(r,i,c)}var C0,kd,S0,j0;C0=function(r,i){for(var c=i.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},kd=function(){},S0=function(r,i,c,f){var x=r.memoizedProps;if(x!==f){r=i.stateNode,Xs(bn.current);var v=null;switch(c){case"input":x=su(r,x),f=su(r,f),v=[];break;case"select":x=Q({},x,{value:void 0}),f=Q({},f,{value:void 0}),v=[];break;case"textarea":x=ou(r,x),f=ou(r,f),v=[];break;default:typeof x.onClick!="function"&&typeof f.onClick=="function"&&(r.onclick=Ua)}lu(c,f);var b;c=null;for(O in x)if(!f.hasOwnProperty(O)&&x.hasOwnProperty(O)&&x[O]!=null)if(O==="style"){var E=x[O];for(b in E)E.hasOwnProperty(b)&&(c||(c={}),c[b]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(o.hasOwnProperty(O)?v||(v=[]):(v=v||[]).push(O,null));for(O in f){var P=f[O];if(E=x!=null?x[O]:void 0,f.hasOwnProperty(O)&&P!==E&&(P!=null||E!=null))if(O==="style")if(E){for(b in E)!E.hasOwnProperty(b)||P&&P.hasOwnProperty(b)||(c||(c={}),c[b]="");for(b in P)P.hasOwnProperty(b)&&E[b]!==P[b]&&(c||(c={}),c[b]=P[b])}else c||(v||(v=[]),v.push(O,c)),c=P;else O==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,E=E?E.__html:void 0,P!=null&&E!==P&&(v=v||[]).push(O,P)):O==="children"?typeof P!="string"&&typeof P!="number"||(v=v||[]).push(O,""+P):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(o.hasOwnProperty(O)?(P!=null&&O==="onScroll"&&We("scroll",r),v||E===P||(v=[])):(v=v||[]).push(O,P))}c&&(v=v||[]).push("style",c);var O=v;(i.updateQueue=O)&&(i.flags|=4)}},j0=function(r,i,c,f){c!==f&&(i.flags|=4)};function oo(r,i){if(!Ye)switch(r.tailMode){case"hidden":i=r.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function Nt(r){var i=r.alternate!==null&&r.alternate.child===r.child,c=0,f=0;if(i)for(var x=r.child;x!==null;)c|=x.lanes|x.childLanes,f|=x.subtreeFlags&14680064,f|=x.flags&14680064,x.return=r,x=x.sibling;else for(x=r.child;x!==null;)c|=x.lanes|x.childLanes,f|=x.subtreeFlags,f|=x.flags,x.return=r,x=x.sibling;return r.subtreeFlags|=f,r.childLanes=c,i}function Q2(r,i,c){var f=i.pendingProps;switch(Qu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(i),null;case 1:return Dt(i.type)&&$a(),Nt(i),null;case 3:return f=i.stateNode,Wr(),$e(At),$e(_t),cd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(qa(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,on!==null&&(Bd(on),on=null))),kd(r,i),Nt(i),null;case 5:ad(i);var x=Xs(to.current);if(c=i.type,r!==null&&i.stateNode!=null)S0(r,i,c,f,x),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!f){if(i.stateNode===null)throw Error(n(166));return Nt(i),null}if(r=Xs(bn.current),qa(i)){f=i.stateNode,c=i.type;var v=i.memoizedProps;switch(f[_n]=i,f[Qi]=v,r=(i.mode&1)!==0,c){case"dialog":We("cancel",f),We("close",f);break;case"iframe":case"object":case"embed":We("load",f);break;case"video":case"audio":for(x=0;x<Yi.length;x++)We(Yi[x],f);break;case"source":We("error",f);break;case"img":case"image":case"link":We("error",f),We("load",f);break;case"details":We("toggle",f);break;case"input":op(f,v),We("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},We("invalid",f);break;case"textarea":cp(f,v),We("invalid",f)}lu(c,v),x=null;for(var b in v)if(v.hasOwnProperty(b)){var E=v[b];b==="children"?typeof E=="string"?f.textContent!==E&&(v.suppressHydrationWarning!==!0&&Va(f.textContent,E,r),x=["children",E]):typeof E=="number"&&f.textContent!==""+E&&(v.suppressHydrationWarning!==!0&&Va(f.textContent,E,r),x=["children",""+E]):o.hasOwnProperty(b)&&E!=null&&b==="onScroll"&&We("scroll",f)}switch(c){case"input":ya(f),lp(f,v,!0);break;case"textarea":ya(f),dp(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=Ua)}f=x,i.updateQueue=f,f!==null&&(i.flags|=4)}else{b=x.nodeType===9?x:x.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=hp(c)),r==="http://www.w3.org/1999/xhtml"?c==="script"?(r=b.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof f.is=="string"?r=b.createElement(c,{is:f.is}):(r=b.createElement(c),c==="select"&&(b=r,f.multiple?b.multiple=!0:f.size&&(b.size=f.size))):r=b.createElementNS(r,c),r[_n]=i,r[Qi]=f,C0(r,i,!1,!1),i.stateNode=r;e:{switch(b=cu(c,f),c){case"dialog":We("cancel",r),We("close",r),x=f;break;case"iframe":case"object":case"embed":We("load",r),x=f;break;case"video":case"audio":for(x=0;x<Yi.length;x++)We(Yi[x],r);x=f;break;case"source":We("error",r),x=f;break;case"img":case"image":case"link":We("error",r),We("load",r),x=f;break;case"details":We("toggle",r),x=f;break;case"input":op(r,f),x=su(r,f),We("invalid",r);break;case"option":x=f;break;case"select":r._wrapperState={wasMultiple:!!f.multiple},x=Q({},f,{value:void 0}),We("invalid",r);break;case"textarea":cp(r,f),x=ou(r,f),We("invalid",r);break;default:x=f}lu(c,x),E=x;for(v in E)if(E.hasOwnProperty(v)){var P=E[v];v==="style"?pp(r,P):v==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&fp(r,P)):v==="children"?typeof P=="string"?(c!=="textarea"||P!=="")&&ki(r,P):typeof P=="number"&&ki(r,""+P):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?P!=null&&v==="onScroll"&&We("scroll",r):P!=null&&j(r,v,P,b))}switch(c){case"input":ya(r),lp(r,f,!1);break;case"textarea":ya(r),dp(r);break;case"option":f.value!=null&&r.setAttribute("value",""+Re(f.value));break;case"select":r.multiple=!!f.multiple,v=f.value,v!=null?Cr(r,!!f.multiple,v,!1):f.defaultValue!=null&&Cr(r,!!f.multiple,f.defaultValue,!0);break;default:typeof x.onClick=="function"&&(r.onclick=Ua)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Nt(i),null;case 6:if(r&&i.stateNode!=null)j0(r,i,r.memoizedProps,f);else{if(typeof f!="string"&&i.stateNode===null)throw Error(n(166));if(c=Xs(to.current),Xs(bn.current),qa(i)){if(f=i.stateNode,c=i.memoizedProps,f[_n]=i,(v=f.nodeValue!==c)&&(r=$t,r!==null))switch(r.tag){case 3:Va(f.nodeValue,c,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Va(f.nodeValue,c,(r.mode&1)!==0)}v&&(i.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[_n]=i,i.stateNode=f}return Nt(i),null;case 13:if($e(Ke),f=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ye&&Ht!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Tg(),Br(),i.flags|=98560,v=!1;else if(v=qa(i),f!==null&&f.dehydrated!==null){if(r===null){if(!v)throw Error(n(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[_n]=i}else Br(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Nt(i),v=!1}else on!==null&&(Bd(on),on=null),v=!0;if(!v)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=c,i):(f=f!==null,f!==(r!==null&&r.memoizedState!==null)&&f&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(Ke.current&1)!==0?at===0&&(at=3):Ud())),i.updateQueue!==null&&(i.flags|=4),Nt(i),null);case 4:return Wr(),kd(r,i),r===null&&Ki(i.stateNode.containerInfo),Nt(i),null;case 10:return nd(i.type._context),Nt(i),null;case 17:return Dt(i.type)&&$a(),Nt(i),null;case 19:if($e(Ke),v=i.memoizedState,v===null)return Nt(i),null;if(f=(i.flags&128)!==0,b=v.rendering,b===null)if(f)oo(v,!1);else{if(at!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(b=tl(r),b!==null){for(i.flags|=128,oo(v,!1),f=b.updateQueue,f!==null&&(i.updateQueue=f,i.flags|=4),i.subtreeFlags=0,f=c,c=i.child;c!==null;)v=c,r=f,v.flags&=14680066,b=v.alternate,b===null?(v.childLanes=0,v.lanes=r,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=b.childLanes,v.lanes=b.lanes,v.child=b.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=b.memoizedProps,v.memoizedState=b.memoizedState,v.updateQueue=b.updateQueue,v.type=b.type,r=b.dependencies,v.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),c=c.sibling;return Be(Ke,Ke.current&1|2),i.child}r=r.sibling}v.tail!==null&&nt()>Yr&&(i.flags|=128,f=!0,oo(v,!1),i.lanes=4194304)}else{if(!f)if(r=tl(b),r!==null){if(i.flags|=128,f=!0,c=r.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),oo(v,!0),v.tail===null&&v.tailMode==="hidden"&&!b.alternate&&!Ye)return Nt(i),null}else 2*nt()-v.renderingStartTime>Yr&&c!==1073741824&&(i.flags|=128,f=!0,oo(v,!1),i.lanes=4194304);v.isBackwards?(b.sibling=i.child,i.child=b):(c=v.last,c!==null?c.sibling=b:i.child=b,v.last=b)}return v.tail!==null?(i=v.tail,v.rendering=i,v.tail=i.sibling,v.renderingStartTime=nt(),i.sibling=null,c=Ke.current,Be(Ke,f?c&1|2:c&1),i):(Nt(i),null);case 22:case 23:return Vd(),f=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==f&&(i.flags|=8192),f&&(i.mode&1)!==0?(Gt&1073741824)!==0&&(Nt(i),i.subtreeFlags&6&&(i.flags|=8192)):Nt(i),null;case 24:return null;case 25:return null}throw Error(n(156,i.tag))}function X2(r,i){switch(Qu(i),i.tag){case 1:return Dt(i.type)&&$a(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Wr(),$e(At),$e(_t),cd(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return ad(i),null;case 13:if($e(Ke),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(n(340));Br()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return $e(Ke),null;case 4:return Wr(),null;case 10:return nd(i.type._context),null;case 22:case 23:return Vd(),null;case 24:return null;default:return null}}var ul=!1,Ct=!1,Z2=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Hr(r,i){var c=r.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){Ze(r,i,f)}else c.current=null}function Td(r,i,c){try{c()}catch(f){Ze(r,i,f)}}var E0=!1;function J2(r,i){if(Vu=Pa,r=ig(),Au(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var x=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var b=0,E=-1,P=-1,O=0,U=0,H=r,V=null;t:for(;;){for(var Z;H!==c||x!==0&&H.nodeType!==3||(E=b+x),H!==v||f!==0&&H.nodeType!==3||(P=b+f),H.nodeType===3&&(b+=H.nodeValue.length),(Z=H.firstChild)!==null;)V=H,H=Z;for(;;){if(H===r)break t;if(V===c&&++O===x&&(E=b),V===v&&++U===f&&(P=b),(Z=H.nextSibling)!==null)break;H=V,V=H.parentNode}H=Z}c=E===-1||P===-1?null:{start:E,end:P}}else c=null}c=c||{start:0,end:0}}else c=null;for(Uu={focusedElem:r,selectionRange:c},Pa=!1,ee=i;ee!==null;)if(i=ee,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,ee=r;else for(;ee!==null;){i=ee;try{var te=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(te!==null){var se=te.memoizedProps,st=te.memoizedState,A=i.stateNode,I=A.getSnapshotBeforeUpdate(i.elementType===i.type?se:an(i.type,se),st);A.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var M=i.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(K){Ze(i,i.return,K)}if(r=i.sibling,r!==null){r.return=i.return,ee=r;break}ee=i.return}return te=E0,E0=!1,te}function ao(r,i,c){var f=i.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var x=f=f.next;do{if((x.tag&r)===r){var v=x.destroy;x.destroy=void 0,v!==void 0&&Td(i,c,v)}x=x.next}while(x!==f)}}function dl(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&r)===r){var f=c.create;c.destroy=f()}c=c.next}while(c!==i)}}function Pd(r){var i=r.ref;if(i!==null){var c=r.stateNode;switch(r.tag){case 5:r=c;break;default:r=c}typeof i=="function"?i(r):i.current=r}}function k0(r){var i=r.alternate;i!==null&&(r.alternate=null,k0(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[_n],delete i[Qi],delete i[Gu],delete i[M2],delete i[O2])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function T0(r){return r.tag===5||r.tag===3||r.tag===4}function P0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||T0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Id(r,i,c){var f=r.tag;if(f===5||f===6)r=r.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(r,i):c.insertBefore(r,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(r,c)):(i=c,i.appendChild(r)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Ua));else if(f!==4&&(r=r.child,r!==null))for(Id(r,i,c),r=r.sibling;r!==null;)Id(r,i,c),r=r.sibling}function Rd(r,i,c){var f=r.tag;if(f===5||f===6)r=r.stateNode,i?c.insertBefore(r,i):c.appendChild(r);else if(f!==4&&(r=r.child,r!==null))for(Rd(r,i,c),r=r.sibling;r!==null;)Rd(r,i,c),r=r.sibling}var yt=null,ln=!1;function xs(r,i,c){for(c=c.child;c!==null;)I0(r,i,c),c=c.sibling}function I0(r,i,c){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Ca,c)}catch{}switch(c.tag){case 5:Ct||Hr(c,i);case 6:var f=yt,x=ln;yt=null,xs(r,i,c),yt=f,ln=x,yt!==null&&(ln?(r=yt,c=c.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)):yt.removeChild(c.stateNode));break;case 18:yt!==null&&(ln?(r=yt,c=c.stateNode,r.nodeType===8?Hu(r.parentNode,c):r.nodeType===1&&Hu(r,c),Bi(r)):Hu(yt,c.stateNode));break;case 4:f=yt,x=ln,yt=c.stateNode.containerInfo,ln=!0,xs(r,i,c),yt=f,ln=x;break;case 0:case 11:case 14:case 15:if(!Ct&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){x=f=f.next;do{var v=x,b=v.destroy;v=v.tag,b!==void 0&&((v&2)!==0||(v&4)!==0)&&Td(c,i,b),x=x.next}while(x!==f)}xs(r,i,c);break;case 1:if(!Ct&&(Hr(c,i),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(E){Ze(c,i,E)}xs(r,i,c);break;case 21:xs(r,i,c);break;case 22:c.mode&1?(Ct=(f=Ct)||c.memoizedState!==null,xs(r,i,c),Ct=f):xs(r,i,c);break;default:xs(r,i,c)}}function R0(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var c=r.stateNode;c===null&&(c=r.stateNode=new Z2),i.forEach(function(f){var x=lC.bind(null,r,f);c.has(f)||(c.add(f),f.then(x,x))})}}function cn(r,i){var c=i.deletions;if(c!==null)for(var f=0;f<c.length;f++){var x=c[f];try{var v=r,b=i,E=b;e:for(;E!==null;){switch(E.tag){case 5:yt=E.stateNode,ln=!1;break e;case 3:yt=E.stateNode.containerInfo,ln=!0;break e;case 4:yt=E.stateNode.containerInfo,ln=!0;break e}E=E.return}if(yt===null)throw Error(n(160));I0(v,b,x),yt=null,ln=!1;var P=x.alternate;P!==null&&(P.return=null),x.return=null}catch(O){Ze(x,i,O)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)A0(i,r),i=i.sibling}function A0(r,i){var c=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(cn(i,r),Cn(r),f&4){try{ao(3,r,r.return),dl(3,r)}catch(se){Ze(r,r.return,se)}try{ao(5,r,r.return)}catch(se){Ze(r,r.return,se)}}break;case 1:cn(i,r),Cn(r),f&512&&c!==null&&Hr(c,c.return);break;case 5:if(cn(i,r),Cn(r),f&512&&c!==null&&Hr(c,c.return),r.flags&32){var x=r.stateNode;try{ki(x,"")}catch(se){Ze(r,r.return,se)}}if(f&4&&(x=r.stateNode,x!=null)){var v=r.memoizedProps,b=c!==null?c.memoizedProps:v,E=r.type,P=r.updateQueue;if(r.updateQueue=null,P!==null)try{E==="input"&&v.type==="radio"&&v.name!=null&&ap(x,v),cu(E,b);var O=cu(E,v);for(b=0;b<P.length;b+=2){var U=P[b],H=P[b+1];U==="style"?pp(x,H):U==="dangerouslySetInnerHTML"?fp(x,H):U==="children"?ki(x,H):j(x,U,H,O)}switch(E){case"input":ru(x,v);break;case"textarea":up(x,v);break;case"select":var V=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!v.multiple;var Z=v.value;Z!=null?Cr(x,!!v.multiple,Z,!1):V!==!!v.multiple&&(v.defaultValue!=null?Cr(x,!!v.multiple,v.defaultValue,!0):Cr(x,!!v.multiple,v.multiple?[]:"",!1))}x[Qi]=v}catch(se){Ze(r,r.return,se)}}break;case 6:if(cn(i,r),Cn(r),f&4){if(r.stateNode===null)throw Error(n(162));x=r.stateNode,v=r.memoizedProps;try{x.nodeValue=v}catch(se){Ze(r,r.return,se)}}break;case 3:if(cn(i,r),Cn(r),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Bi(i.containerInfo)}catch(se){Ze(r,r.return,se)}break;case 4:cn(i,r),Cn(r);break;case 13:cn(i,r),Cn(r),x=r.child,x.flags&8192&&(v=x.memoizedState!==null,x.stateNode.isHidden=v,!v||x.alternate!==null&&x.alternate.memoizedState!==null||(Md=nt())),f&4&&R0(r);break;case 22:if(U=c!==null&&c.memoizedState!==null,r.mode&1?(Ct=(O=Ct)||U,cn(i,r),Ct=O):cn(i,r),Cn(r),f&8192){if(O=r.memoizedState!==null,(r.stateNode.isHidden=O)&&!U&&(r.mode&1)!==0)for(ee=r,U=r.child;U!==null;){for(H=ee=U;ee!==null;){switch(V=ee,Z=V.child,V.tag){case 0:case 11:case 14:case 15:ao(4,V,V.return);break;case 1:Hr(V,V.return);var te=V.stateNode;if(typeof te.componentWillUnmount=="function"){f=V,c=V.return;try{i=f,te.props=i.memoizedProps,te.state=i.memoizedState,te.componentWillUnmount()}catch(se){Ze(f,c,se)}}break;case 5:Hr(V,V.return);break;case 22:if(V.memoizedState!==null){O0(H);continue}}Z!==null?(Z.return=V,ee=Z):O0(H)}U=U.sibling}e:for(U=null,H=r;;){if(H.tag===5){if(U===null){U=H;try{x=H.stateNode,O?(v=x.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(E=H.stateNode,P=H.memoizedProps.style,b=P!=null&&P.hasOwnProperty("display")?P.display:null,E.style.display=mp("display",b))}catch(se){Ze(r,r.return,se)}}}else if(H.tag===6){if(U===null)try{H.stateNode.nodeValue=O?"":H.memoizedProps}catch(se){Ze(r,r.return,se)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===r)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===r)break e;for(;H.sibling===null;){if(H.return===null||H.return===r)break e;U===H&&(U=null),H=H.return}U===H&&(U=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:cn(i,r),Cn(r),f&4&&R0(r);break;case 21:break;default:cn(i,r),Cn(r)}}function Cn(r){var i=r.flags;if(i&2){try{e:{for(var c=r.return;c!==null;){if(T0(c)){var f=c;break e}c=c.return}throw Error(n(160))}switch(f.tag){case 5:var x=f.stateNode;f.flags&32&&(ki(x,""),f.flags&=-33);var v=P0(r);Rd(r,v,x);break;case 3:case 4:var b=f.stateNode.containerInfo,E=P0(r);Id(r,E,b);break;default:throw Error(n(161))}}catch(P){Ze(r,r.return,P)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function eC(r,i,c){ee=r,D0(r)}function D0(r,i,c){for(var f=(r.mode&1)!==0;ee!==null;){var x=ee,v=x.child;if(x.tag===22&&f){var b=x.memoizedState!==null||ul;if(!b){var E=x.alternate,P=E!==null&&E.memoizedState!==null||Ct;E=ul;var O=Ct;if(ul=b,(Ct=P)&&!O)for(ee=x;ee!==null;)b=ee,P=b.child,b.tag===22&&b.memoizedState!==null?L0(x):P!==null?(P.return=b,ee=P):L0(x);for(;v!==null;)ee=v,D0(v),v=v.sibling;ee=x,ul=E,Ct=O}M0(r)}else(x.subtreeFlags&8772)!==0&&v!==null?(v.return=x,ee=v):M0(r)}}function M0(r){for(;ee!==null;){var i=ee;if((i.flags&8772)!==0){var c=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ct||dl(5,i);break;case 1:var f=i.stateNode;if(i.flags&4&&!Ct)if(c===null)f.componentDidMount();else{var x=i.elementType===i.type?c.memoizedProps:an(i.type,c.memoizedProps);f.componentDidUpdate(x,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=i.updateQueue;v!==null&&Og(i,v,f);break;case 3:var b=i.updateQueue;if(b!==null){if(c=null,i.child!==null)switch(i.child.tag){case 5:c=i.child.stateNode;break;case 1:c=i.child.stateNode}Og(i,b,c)}break;case 5:var E=i.stateNode;if(c===null&&i.flags&4){c=E;var P=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&c.focus();break;case"img":P.src&&(c.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var O=i.alternate;if(O!==null){var U=O.memoizedState;if(U!==null){var H=U.dehydrated;H!==null&&Bi(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ct||i.flags&512&&Pd(i)}catch(V){Ze(i,i.return,V)}}if(i===r){ee=null;break}if(c=i.sibling,c!==null){c.return=i.return,ee=c;break}ee=i.return}}function O0(r){for(;ee!==null;){var i=ee;if(i===r){ee=null;break}var c=i.sibling;if(c!==null){c.return=i.return,ee=c;break}ee=i.return}}function L0(r){for(;ee!==null;){var i=ee;try{switch(i.tag){case 0:case 11:case 15:var c=i.return;try{dl(4,i)}catch(P){Ze(i,c,P)}break;case 1:var f=i.stateNode;if(typeof f.componentDidMount=="function"){var x=i.return;try{f.componentDidMount()}catch(P){Ze(i,x,P)}}var v=i.return;try{Pd(i)}catch(P){Ze(i,v,P)}break;case 5:var b=i.return;try{Pd(i)}catch(P){Ze(i,b,P)}}}catch(P){Ze(i,i.return,P)}if(i===r){ee=null;break}var E=i.sibling;if(E!==null){E.return=i.return,ee=E;break}ee=i.return}}var tC=Math.ceil,hl=D.ReactCurrentDispatcher,Ad=D.ReactCurrentOwner,Zt=D.ReactCurrentBatchConfig,Se=0,ft=null,rt=null,vt=0,Gt=0,Gr=hs(0),at=0,lo=null,Js=0,fl=0,Dd=0,co=null,Ot=null,Md=0,Yr=1/0,Hn=null,ml=!1,Od=null,ys=null,pl=!1,vs=null,gl=0,uo=0,Ld=null,xl=-1,yl=0;function Tt(){return(Se&6)!==0?nt():xl!==-1?xl:xl=nt()}function ws(r){return(r.mode&1)===0?1:(Se&2)!==0&&vt!==0?vt&-vt:F2.transition!==null?(yl===0&&(yl=Pp()),yl):(r=Ae,r!==0||(r=window.event,r=r===void 0?16:Bp(r.type)),r)}function un(r,i,c,f){if(50<uo)throw uo=0,Ld=null,Error(n(185));Di(r,c,f),((Se&2)===0||r!==ft)&&(r===ft&&((Se&2)===0&&(fl|=c),at===4&&_s(r,vt)),Lt(r,f),c===1&&Se===0&&(i.mode&1)===0&&(Yr=nt()+500,Ga&&ms()))}function Lt(r,i){var c=r.callbackNode;FN(r,i);var f=Ea(r,r===ft?vt:0);if(f===0)c!==null&&Ep(c),r.callbackNode=null,r.callbackPriority=0;else if(i=f&-f,r.callbackPriority!==i){if(c!=null&&Ep(c),i===1)r.tag===0?L2(B0.bind(null,r)):Cg(B0.bind(null,r)),A2(function(){(Se&6)===0&&ms()}),c=null;else{switch(Ip(f)){case 1:c=gu;break;case 4:c=kp;break;case 16:c=Na;break;case 536870912:c=Tp;break;default:c=Na}c=Y0(c,F0.bind(null,r))}r.callbackPriority=i,r.callbackNode=c}}function F0(r,i){if(xl=-1,yl=0,(Se&6)!==0)throw Error(n(327));var c=r.callbackNode;if(Kr()&&r.callbackNode!==c)return null;var f=Ea(r,r===ft?vt:0);if(f===0)return null;if((f&30)!==0||(f&r.expiredLanes)!==0||i)i=vl(r,f);else{i=f;var x=Se;Se|=2;var v=V0();(ft!==r||vt!==i)&&(Hn=null,Yr=nt()+500,tr(r,i));do try{rC();break}catch(E){z0(r,E)}while(!0);td(),hl.current=v,Se=x,rt!==null?i=0:(ft=null,vt=0,i=at)}if(i!==0){if(i===2&&(x=xu(r),x!==0&&(f=x,i=Fd(r,x))),i===1)throw c=lo,tr(r,0),_s(r,f),Lt(r,nt()),c;if(i===6)_s(r,f);else{if(x=r.current.alternate,(f&30)===0&&!nC(x)&&(i=vl(r,f),i===2&&(v=xu(r),v!==0&&(f=v,i=Fd(r,v))),i===1))throw c=lo,tr(r,0),_s(r,f),Lt(r,nt()),c;switch(r.finishedWork=x,r.finishedLanes=f,i){case 0:case 1:throw Error(n(345));case 2:nr(r,Ot,Hn);break;case 3:if(_s(r,f),(f&130023424)===f&&(i=Md+500-nt(),10<i)){if(Ea(r,0)!==0)break;if(x=r.suspendedLanes,(x&f)!==f){Tt(),r.pingedLanes|=r.suspendedLanes&x;break}r.timeoutHandle=$u(nr.bind(null,r,Ot,Hn),i);break}nr(r,Ot,Hn);break;case 4:if(_s(r,f),(f&4194240)===f)break;for(i=r.eventTimes,x=-1;0<f;){var b=31-sn(f);v=1<<b,b=i[b],b>x&&(x=b),f&=~v}if(f=x,f=nt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*tC(f/1960))-f,10<f){r.timeoutHandle=$u(nr.bind(null,r,Ot,Hn),f);break}nr(r,Ot,Hn);break;case 5:nr(r,Ot,Hn);break;default:throw Error(n(329))}}}return Lt(r,nt()),r.callbackNode===c?F0.bind(null,r):null}function Fd(r,i){var c=co;return r.current.memoizedState.isDehydrated&&(tr(r,i).flags|=256),r=vl(r,i),r!==2&&(i=Ot,Ot=c,i!==null&&Bd(i)),r}function Bd(r){Ot===null?Ot=r:Ot.push.apply(Ot,r)}function nC(r){for(var i=r;;){if(i.flags&16384){var c=i.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var x=c[f],v=x.getSnapshot;x=x.value;try{if(!rn(v(),x))return!1}catch{return!1}}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function _s(r,i){for(i&=~Dd,i&=~fl,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var c=31-sn(i),f=1<<c;r[c]=-1,i&=~f}}function B0(r){if((Se&6)!==0)throw Error(n(327));Kr();var i=Ea(r,0);if((i&1)===0)return Lt(r,nt()),null;var c=vl(r,i);if(r.tag!==0&&c===2){var f=xu(r);f!==0&&(i=f,c=Fd(r,f))}if(c===1)throw c=lo,tr(r,0),_s(r,i),Lt(r,nt()),c;if(c===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,nr(r,Ot,Hn),Lt(r,nt()),null}function zd(r,i){var c=Se;Se|=1;try{return r(i)}finally{Se=c,Se===0&&(Yr=nt()+500,Ga&&ms())}}function er(r){vs!==null&&vs.tag===0&&(Se&6)===0&&Kr();var i=Se;Se|=1;var c=Zt.transition,f=Ae;try{if(Zt.transition=null,Ae=1,r)return r()}finally{Ae=f,Zt.transition=c,Se=i,(Se&6)===0&&ms()}}function Vd(){Gt=Gr.current,$e(Gr)}function tr(r,i){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;if(c!==-1&&(r.timeoutHandle=-1,R2(c)),rt!==null)for(c=rt.return;c!==null;){var f=c;switch(Qu(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&$a();break;case 3:Wr(),$e(At),$e(_t),cd();break;case 5:ad(f);break;case 4:Wr();break;case 13:$e(Ke);break;case 19:$e(Ke);break;case 10:nd(f.type._context);break;case 22:case 23:Vd()}c=c.return}if(ft=r,rt=r=bs(r.current,null),vt=Gt=i,at=0,lo=null,Dd=fl=Js=0,Ot=co=null,Qs!==null){for(i=0;i<Qs.length;i++)if(c=Qs[i],f=c.interleaved,f!==null){c.interleaved=null;var x=f.next,v=c.pending;if(v!==null){var b=v.next;v.next=x,f.next=b}c.pending=f}Qs=null}return r}function z0(r,i){do{var c=rt;try{if(td(),nl.current=ol,sl){for(var f=qe.memoizedState;f!==null;){var x=f.queue;x!==null&&(x.pending=null),f=f.next}sl=!1}if(Zs=0,ht=ot=qe=null,no=!1,so=0,Ad.current=null,c===null||c.return===null){at=1,lo=i,rt=null;break}e:{var v=r,b=c.return,E=c,P=i;if(i=vt,E.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var O=P,U=E,H=U.tag;if((U.mode&1)===0&&(H===0||H===11||H===15)){var V=U.alternate;V?(U.updateQueue=V.updateQueue,U.memoizedState=V.memoizedState,U.lanes=V.lanes):(U.updateQueue=null,U.memoizedState=null)}var Z=d0(b);if(Z!==null){Z.flags&=-257,h0(Z,b,E,v,i),Z.mode&1&&u0(v,O,i),i=Z,P=O;var te=i.updateQueue;if(te===null){var se=new Set;se.add(P),i.updateQueue=se}else te.add(P);break e}else{if((i&1)===0){u0(v,O,i),Ud();break e}P=Error(n(426))}}else if(Ye&&E.mode&1){var st=d0(b);if(st!==null){(st.flags&65536)===0&&(st.flags|=256),h0(st,b,E,v,i),Ju($r(P,E));break e}}v=P=$r(P,E),at!==4&&(at=2),co===null?co=[v]:co.push(v),v=b;do{switch(v.tag){case 3:v.flags|=65536,i&=-i,v.lanes|=i;var A=l0(v,P,i);Mg(v,A);break e;case 1:E=P;var I=v.type,M=v.stateNode;if((v.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(ys===null||!ys.has(M)))){v.flags|=65536,i&=-i,v.lanes|=i;var K=c0(v,E,i);Mg(v,K);break e}}v=v.return}while(v!==null)}W0(c)}catch(ae){i=ae,rt===c&&c!==null&&(rt=c=c.return);continue}break}while(!0)}function V0(){var r=hl.current;return hl.current=ol,r===null?ol:r}function Ud(){(at===0||at===3||at===2)&&(at=4),ft===null||(Js&268435455)===0&&(fl&268435455)===0||_s(ft,vt)}function vl(r,i){var c=Se;Se|=2;var f=V0();(ft!==r||vt!==i)&&(Hn=null,tr(r,i));do try{sC();break}catch(x){z0(r,x)}while(!0);if(td(),Se=c,hl.current=f,rt!==null)throw Error(n(261));return ft=null,vt=0,at}function sC(){for(;rt!==null;)U0(rt)}function rC(){for(;rt!==null&&!TN();)U0(rt)}function U0(r){var i=G0(r.alternate,r,Gt);r.memoizedProps=r.pendingProps,i===null?W0(r):rt=i,Ad.current=null}function W0(r){var i=r;do{var c=i.alternate;if(r=i.return,(i.flags&32768)===0){if(c=Q2(c,i,Gt),c!==null){rt=c;return}}else{if(c=X2(c,i),c!==null){c.flags&=32767,rt=c;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{at=6,rt=null;return}}if(i=i.sibling,i!==null){rt=i;return}rt=i=r}while(i!==null);at===0&&(at=5)}function nr(r,i,c){var f=Ae,x=Zt.transition;try{Zt.transition=null,Ae=1,iC(r,i,c,f)}finally{Zt.transition=x,Ae=f}return null}function iC(r,i,c,f){do Kr();while(vs!==null);if((Se&6)!==0)throw Error(n(327));c=r.finishedWork;var x=r.finishedLanes;if(c===null)return null;if(r.finishedWork=null,r.finishedLanes=0,c===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var v=c.lanes|c.childLanes;if(BN(r,v),r===ft&&(rt=ft=null,vt=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||pl||(pl=!0,Y0(Na,function(){return Kr(),null})),v=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||v){v=Zt.transition,Zt.transition=null;var b=Ae;Ae=1;var E=Se;Se|=4,Ad.current=null,J2(r,c),A0(c,r),S2(Uu),Pa=!!Vu,Uu=Vu=null,r.current=c,eC(c),PN(),Se=E,Ae=b,Zt.transition=v}else r.current=c;if(pl&&(pl=!1,vs=r,gl=x),v=r.pendingLanes,v===0&&(ys=null),AN(c.stateNode),Lt(r,nt()),i!==null)for(f=r.onRecoverableError,c=0;c<i.length;c++)x=i[c],f(x.value,{componentStack:x.stack,digest:x.digest});if(ml)throw ml=!1,r=Od,Od=null,r;return(gl&1)!==0&&r.tag!==0&&Kr(),v=r.pendingLanes,(v&1)!==0?r===Ld?uo++:(uo=0,Ld=r):uo=0,ms(),null}function Kr(){if(vs!==null){var r=Ip(gl),i=Zt.transition,c=Ae;try{if(Zt.transition=null,Ae=16>r?16:r,vs===null)var f=!1;else{if(r=vs,vs=null,gl=0,(Se&6)!==0)throw Error(n(331));var x=Se;for(Se|=4,ee=r.current;ee!==null;){var v=ee,b=v.child;if((ee.flags&16)!==0){var E=v.deletions;if(E!==null){for(var P=0;P<E.length;P++){var O=E[P];for(ee=O;ee!==null;){var U=ee;switch(U.tag){case 0:case 11:case 15:ao(8,U,v)}var H=U.child;if(H!==null)H.return=U,ee=H;else for(;ee!==null;){U=ee;var V=U.sibling,Z=U.return;if(k0(U),U===O){ee=null;break}if(V!==null){V.return=Z,ee=V;break}ee=Z}}}var te=v.alternate;if(te!==null){var se=te.child;if(se!==null){te.child=null;do{var st=se.sibling;se.sibling=null,se=st}while(se!==null)}}ee=v}}if((v.subtreeFlags&2064)!==0&&b!==null)b.return=v,ee=b;else e:for(;ee!==null;){if(v=ee,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:ao(9,v,v.return)}var A=v.sibling;if(A!==null){A.return=v.return,ee=A;break e}ee=v.return}}var I=r.current;for(ee=I;ee!==null;){b=ee;var M=b.child;if((b.subtreeFlags&2064)!==0&&M!==null)M.return=b,ee=M;else e:for(b=I;ee!==null;){if(E=ee,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:dl(9,E)}}catch(ae){Ze(E,E.return,ae)}if(E===b){ee=null;break e}var K=E.sibling;if(K!==null){K.return=E.return,ee=K;break e}ee=E.return}}if(Se=x,ms(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Ca,r)}catch{}f=!0}return f}finally{Ae=c,Zt.transition=i}}return!1}function $0(r,i,c){i=$r(c,i),i=l0(r,i,1),r=gs(r,i,1),i=Tt(),r!==null&&(Di(r,1,i),Lt(r,i))}function Ze(r,i,c){if(r.tag===3)$0(r,r,c);else for(;i!==null;){if(i.tag===3){$0(i,r,c);break}else if(i.tag===1){var f=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ys===null||!ys.has(f))){r=$r(c,r),r=c0(i,r,1),i=gs(i,r,1),r=Tt(),i!==null&&(Di(i,1,r),Lt(i,r));break}}i=i.return}}function oC(r,i,c){var f=r.pingCache;f!==null&&f.delete(i),i=Tt(),r.pingedLanes|=r.suspendedLanes&c,ft===r&&(vt&c)===c&&(at===4||at===3&&(vt&130023424)===vt&&500>nt()-Md?tr(r,0):Dd|=c),Lt(r,i)}function H0(r,i){i===0&&((r.mode&1)===0?i=1:(i=ja,ja<<=1,(ja&130023424)===0&&(ja=4194304)));var c=Tt();r=Un(r,i),r!==null&&(Di(r,i,c),Lt(r,c))}function aC(r){var i=r.memoizedState,c=0;i!==null&&(c=i.retryLane),H0(r,c)}function lC(r,i){var c=0;switch(r.tag){case 13:var f=r.stateNode,x=r.memoizedState;x!==null&&(c=x.retryLane);break;case 19:f=r.stateNode;break;default:throw Error(n(314))}f!==null&&f.delete(i),H0(r,c)}var G0;G0=function(r,i,c){if(r!==null)if(r.memoizedProps!==i.pendingProps||At.current)Mt=!0;else{if((r.lanes&c)===0&&(i.flags&128)===0)return Mt=!1,q2(r,i,c);Mt=(r.flags&131072)!==0}else Mt=!1,Ye&&(i.flags&1048576)!==0&&Sg(i,Ka,i.index);switch(i.lanes=0,i.tag){case 2:var f=i.type;cl(r,i),r=i.pendingProps;var x=Or(i,_t.current);Ur(i,c),x=hd(null,i,f,r,x,c);var v=fd();return i.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Dt(f)?(v=!0,Ha(i)):v=!1,i.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,id(i),x.updater=al,i.stateNode=x,x._reactInternals=i,vd(i,f,r,c),i=Nd(null,i,f,!0,v,c)):(i.tag=0,Ye&&v&&qu(i),kt(null,i,x,c),i=i.child),i;case 16:f=i.elementType;e:{switch(cl(r,i),r=i.pendingProps,x=f._init,f=x(f._payload),i.type=f,x=i.tag=uC(f),r=an(f,r),x){case 0:i=bd(null,i,f,r,c);break e;case 1:i=y0(null,i,f,r,c);break e;case 11:i=f0(null,i,f,r,c);break e;case 14:i=m0(null,i,f,an(f.type,r),c);break e}throw Error(n(306,f,""))}return i;case 0:return f=i.type,x=i.pendingProps,x=i.elementType===f?x:an(f,x),bd(r,i,f,x,c);case 1:return f=i.type,x=i.pendingProps,x=i.elementType===f?x:an(f,x),y0(r,i,f,x,c);case 3:e:{if(v0(i),r===null)throw Error(n(387));f=i.pendingProps,v=i.memoizedState,x=v.element,Dg(r,i),el(i,f,null,c);var b=i.memoizedState;if(f=b.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){x=$r(Error(n(423)),i),i=w0(r,i,f,c,x);break e}else if(f!==x){x=$r(Error(n(424)),i),i=w0(r,i,f,c,x);break e}else for(Ht=ds(i.stateNode.containerInfo.firstChild),$t=i,Ye=!0,on=null,c=Rg(i,null,f,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Br(),f===x){i=$n(r,i,c);break e}kt(r,i,f,c)}i=i.child}return i;case 5:return Lg(i),r===null&&Zu(i),f=i.type,x=i.pendingProps,v=r!==null?r.memoizedProps:null,b=x.children,Wu(f,x)?b=null:v!==null&&Wu(f,v)&&(i.flags|=32),x0(r,i),kt(r,i,b,c),i.child;case 6:return r===null&&Zu(i),null;case 13:return _0(r,i,c);case 4:return od(i,i.stateNode.containerInfo),f=i.pendingProps,r===null?i.child=zr(i,null,f,c):kt(r,i,f,c),i.child;case 11:return f=i.type,x=i.pendingProps,x=i.elementType===f?x:an(f,x),f0(r,i,f,x,c);case 7:return kt(r,i,i.pendingProps,c),i.child;case 8:return kt(r,i,i.pendingProps.children,c),i.child;case 12:return kt(r,i,i.pendingProps.children,c),i.child;case 10:e:{if(f=i.type._context,x=i.pendingProps,v=i.memoizedProps,b=x.value,Be(Xa,f._currentValue),f._currentValue=b,v!==null)if(rn(v.value,b)){if(v.children===x.children&&!At.current){i=$n(r,i,c);break e}}else for(v=i.child,v!==null&&(v.return=i);v!==null;){var E=v.dependencies;if(E!==null){b=v.child;for(var P=E.firstContext;P!==null;){if(P.context===f){if(v.tag===1){P=Wn(-1,c&-c),P.tag=2;var O=v.updateQueue;if(O!==null){O=O.shared;var U=O.pending;U===null?P.next=P:(P.next=U.next,U.next=P),O.pending=P}}v.lanes|=c,P=v.alternate,P!==null&&(P.lanes|=c),sd(v.return,c,i),E.lanes|=c;break}P=P.next}}else if(v.tag===10)b=v.type===i.type?null:v.child;else if(v.tag===18){if(b=v.return,b===null)throw Error(n(341));b.lanes|=c,E=b.alternate,E!==null&&(E.lanes|=c),sd(b,c,i),b=v.sibling}else b=v.child;if(b!==null)b.return=v;else for(b=v;b!==null;){if(b===i){b=null;break}if(v=b.sibling,v!==null){v.return=b.return,b=v;break}b=b.return}v=b}kt(r,i,x.children,c),i=i.child}return i;case 9:return x=i.type,f=i.pendingProps.children,Ur(i,c),x=Qt(x),f=f(x),i.flags|=1,kt(r,i,f,c),i.child;case 14:return f=i.type,x=an(f,i.pendingProps),x=an(f.type,x),m0(r,i,f,x,c);case 15:return p0(r,i,i.type,i.pendingProps,c);case 17:return f=i.type,x=i.pendingProps,x=i.elementType===f?x:an(f,x),cl(r,i),i.tag=1,Dt(f)?(r=!0,Ha(i)):r=!1,Ur(i,c),o0(i,f,x),vd(i,f,x,c),Nd(null,i,f,!0,r,c);case 19:return N0(r,i,c);case 22:return g0(r,i,c)}throw Error(n(156,i.tag))};function Y0(r,i){return jp(r,i)}function cC(r,i,c,f){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(r,i,c,f){return new cC(r,i,c,f)}function Wd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function uC(r){if(typeof r=="function")return Wd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===$)return 11;if(r===G)return 14}return 2}function bs(r,i){var c=r.alternate;return c===null?(c=Jt(r.tag,i,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=i,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&14680064,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,i=r.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c}function wl(r,i,c,f,x,v){var b=2;if(f=r,typeof r=="function")Wd(r)&&(b=1);else if(typeof r=="string")b=5;else e:switch(r){case z:return sr(c.children,x,v,i);case F:b=8,x|=8;break;case X:return r=Jt(12,c,i,x|2),r.elementType=X,r.lanes=v,r;case le:return r=Jt(13,c,i,x),r.elementType=le,r.lanes=v,r;case pe:return r=Jt(19,c,i,x),r.elementType=pe,r.lanes=v,r;case oe:return _l(c,x,v,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case ie:b=10;break e;case xe:b=9;break e;case $:b=11;break e;case G:b=14;break e;case me:b=16,f=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return i=Jt(b,c,i,x),i.elementType=r,i.type=f,i.lanes=v,i}function sr(r,i,c,f){return r=Jt(7,r,f,i),r.lanes=c,r}function _l(r,i,c,f){return r=Jt(22,r,f,i),r.elementType=oe,r.lanes=c,r.stateNode={isHidden:!1},r}function $d(r,i,c){return r=Jt(6,r,null,i),r.lanes=c,r}function Hd(r,i,c){return i=Jt(4,r.children!==null?r.children:[],r.key,i),i.lanes=c,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function dC(r,i,c,f,x){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yu(0),this.expirationTimes=yu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yu(0),this.identifierPrefix=f,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Gd(r,i,c,f,x,v,b,E,P){return r=new dC(r,i,c,E,P),i===1?(i=1,v===!0&&(i|=8)):i=0,v=Jt(3,null,null,i),r.current=v,v.stateNode=r,v.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},id(v),r}function hC(r,i,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:f==null?null:""+f,children:r,containerInfo:i,implementation:c}}function K0(r){if(!r)return fs;r=r._reactInternals;e:{if(Hs(r)!==r||r.tag!==1)throw Error(n(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Dt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(n(171))}if(r.tag===1){var c=r.type;if(Dt(c))return bg(r,c,i)}return i}function q0(r,i,c,f,x,v,b,E,P){return r=Gd(c,f,!0,r,x,v,b,E,P),r.context=K0(null),c=r.current,f=Tt(),x=ws(c),v=Wn(f,x),v.callback=i??null,gs(c,v,x),r.current.lanes=x,Di(r,x,f),Lt(r,f),r}function bl(r,i,c,f){var x=i.current,v=Tt(),b=ws(x);return c=K0(c),i.context===null?i.context=c:i.pendingContext=c,i=Wn(v,b),i.payload={element:r},f=f===void 0?null:f,f!==null&&(i.callback=f),r=gs(x,i,b),r!==null&&(un(r,x,b,v),Ja(r,x,b)),b}function Nl(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Q0(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<i?c:i}}function Yd(r,i){Q0(r,i),(r=r.alternate)&&Q0(r,i)}function fC(){return null}var X0=typeof reportError=="function"?reportError:function(r){console.error(r)};function Kd(r){this._internalRoot=r}Cl.prototype.render=Kd.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(n(409));bl(r,i,null,null)},Cl.prototype.unmount=Kd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;er(function(){bl(null,r,null,null)}),i[Fn]=null}};function Cl(r){this._internalRoot=r}Cl.prototype.unstable_scheduleHydration=function(r){if(r){var i=Dp();r={blockedOn:null,target:r,priority:i};for(var c=0;c<ls.length&&i!==0&&i<ls[c].priority;c++);ls.splice(c,0,r),c===0&&Lp(r)}};function qd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Sl(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Z0(){}function mC(r,i,c,f,x){if(x){if(typeof f=="function"){var v=f;f=function(){var O=Nl(b);v.call(O)}}var b=q0(i,f,r,0,null,!1,!1,"",Z0);return r._reactRootContainer=b,r[Fn]=b.current,Ki(r.nodeType===8?r.parentNode:r),er(),b}for(;x=r.lastChild;)r.removeChild(x);if(typeof f=="function"){var E=f;f=function(){var O=Nl(P);E.call(O)}}var P=Gd(r,0,!1,null,null,!1,!1,"",Z0);return r._reactRootContainer=P,r[Fn]=P.current,Ki(r.nodeType===8?r.parentNode:r),er(function(){bl(i,P,c,f)}),P}function jl(r,i,c,f,x){var v=c._reactRootContainer;if(v){var b=v;if(typeof x=="function"){var E=x;x=function(){var P=Nl(b);E.call(P)}}bl(i,b,r,x)}else b=mC(c,i,r,x,f);return Nl(b)}Rp=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var c=Ai(i.pendingLanes);c!==0&&(vu(i,c|1),Lt(i,nt()),(Se&6)===0&&(Yr=nt()+500,ms()))}break;case 13:er(function(){var f=Un(r,1);if(f!==null){var x=Tt();un(f,r,1,x)}}),Yd(r,1)}},wu=function(r){if(r.tag===13){var i=Un(r,134217728);if(i!==null){var c=Tt();un(i,r,134217728,c)}Yd(r,134217728)}},Ap=function(r){if(r.tag===13){var i=ws(r),c=Un(r,i);if(c!==null){var f=Tt();un(c,r,i,f)}Yd(r,i)}},Dp=function(){return Ae},Mp=function(r,i){var c=Ae;try{return Ae=r,i()}finally{Ae=c}},hu=function(r,i,c){switch(i){case"input":if(ru(r,c),i=c.name,c.type==="radio"&&i!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<c.length;i++){var f=c[i];if(f!==r&&f.form===r.form){var x=Wa(f);if(!x)throw Error(n(90));ip(f),ru(f,x)}}}break;case"textarea":up(r,c);break;case"select":i=c.value,i!=null&&Cr(r,!!c.multiple,i,!1)}},vp=zd,wp=er;var pC={usingClientEntryPoint:!1,Events:[Xi,Dr,Wa,xp,yp,zd]},ho={findFiberByHostInstance:Gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gC={bundleType:ho.bundleType,version:ho.version,rendererPackageName:ho.rendererPackageName,rendererConfig:ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Cp(r),r===null?null:r.stateNode},findFiberByHostInstance:ho.findFiberByHostInstance||fC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var El=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!El.isDisabled&&El.supportsFiber)try{Ca=El.inject(gC),wn=El}catch{}}return Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pC,Ft.createPortal=function(r,i){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qd(i))throw Error(n(200));return hC(r,i,null,c)},Ft.createRoot=function(r,i){if(!qd(r))throw Error(n(299));var c=!1,f="",x=X0;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(x=i.onRecoverableError)),i=Gd(r,1,!1,null,null,c,!1,f,x),r[Fn]=i.current,Ki(r.nodeType===8?r.parentNode:r),new Kd(i)},Ft.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=Cp(i),r=r===null?null:r.stateNode,r},Ft.flushSync=function(r){return er(r)},Ft.hydrate=function(r,i,c){if(!Sl(i))throw Error(n(200));return jl(null,r,i,!0,c)},Ft.hydrateRoot=function(r,i,c){if(!qd(r))throw Error(n(405));var f=c!=null&&c.hydratedSources||null,x=!1,v="",b=X0;if(c!=null&&(c.unstable_strictMode===!0&&(x=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onRecoverableError!==void 0&&(b=c.onRecoverableError)),i=q0(i,null,r,1,c??null,x,!1,v,b),r[Fn]=i.current,Ki(r),f)for(r=0;r<f.length;r++)c=f[r],x=c._getVersion,x=x(c._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[c,x]:i.mutableSourceEagerHydrationData.push(c,x);return new Cl(i)},Ft.render=function(r,i,c){if(!Sl(i))throw Error(n(200));return jl(null,r,i,!1,c)},Ft.unmountComponentAtNode=function(r){if(!Sl(r))throw Error(n(40));return r._reactRootContainer?(er(function(){jl(null,null,r,!1,function(){r._reactRootContainer=null,r[Fn]=null})}),!0):!1},Ft.unstable_batchedUpdates=zd,Ft.unstable_renderSubtreeIntoContainer=function(r,i,c,f){if(!Sl(c))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return jl(r,i,c,!1,f)},Ft.version="18.3.1-next-f1338f8080-20240426",Ft}var ox;function tw(){if(ox)return Zd.exports;ox=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Zd.exports=SC(),Zd.exports}var ax;function jC(){if(ax)return kl;ax=1;var t=tw();return kl.createRoot=t.createRoot,kl.hydrateRoot=t.hydrateRoot,kl}var EC=jC();const kC=zf(EC);tw();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mo(){return Mo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Mo.apply(this,arguments)}var ks;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ks||(ks={}));const lx="popstate";function TC(t){t===void 0&&(t={});function e(o,l){let{pathname:u="/",search:h="",hash:d=""}=_r(o.location.hash.substr(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),zh("",{pathname:u,search:h,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(o,l){let u=o.document.querySelector("base"),h="";if(u&&u.getAttribute("href")){let d=o.location.href,m=d.indexOf("#");h=m===-1?d:d.slice(0,m)}return h+"#"+(typeof l=="string"?l:Ql(l))}function s(o,l){Pc(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return IC(e,n,s,t)}function Xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Pc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PC(){return Math.random().toString(36).substr(2,8)}function cx(t,e){return{usr:t.state,key:t.key,idx:e}}function zh(t,e,n,s){return n===void 0&&(n=null),Mo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_r(e):e,{state:n,key:e&&e.key||s||PC()})}function Ql(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function _r(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function IC(t,e,n,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,u=o.history,h=ks.Pop,d=null,m=p();m==null&&(m=0,u.replaceState(Mo({},u.state,{idx:m}),""));function p(){return(u.state||{idx:null}).idx}function g(){h=ks.Pop;let S=p(),T=S==null?null:S-m;m=S,d&&d({action:h,location:C.location,delta:T})}function y(S,T){h=ks.Push;let N=zh(C.location,S,T);n&&n(N,S),m=p()+1;let j=cx(N,m),D=C.createHref(N);try{u.pushState(j,"",D)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;o.location.assign(D)}l&&d&&d({action:h,location:C.location,delta:1})}function w(S,T){h=ks.Replace;let N=zh(C.location,S,T);n&&n(N,S),m=p();let j=cx(N,m),D=C.createHref(N);u.replaceState(j,"",D),l&&d&&d({action:h,location:C.location,delta:0})}function _(S){let T=o.location.origin!=="null"?o.location.origin:o.location.href,N=typeof S=="string"?S:Ql(S);return N=N.replace(/ $/,"%20"),Xe(T,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,T)}let C={get action(){return h},get location(){return t(o,u)},listen(S){if(d)throw new Error("A history only accepts one active listener");return o.addEventListener(lx,g),d=S,()=>{o.removeEventListener(lx,g),d=null}},createHref(S){return e(o,S)},createURL:_,encodeLocation(S){let T=_(S);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:y,replace:w,go(S){return u.go(S)}};return C}var ux;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ux||(ux={}));function RC(t,e,n){return n===void 0&&(n="/"),AC(t,e,n)}function AC(t,e,n,s){let o=typeof e=="string"?_r(e):e,l=ci(o.pathname||"/",n);if(l==null)return null;let u=nw(t);DC(u);let h=null;for(let d=0;h==null&&d<u.length;++d){let m=HC(l);h=WC(u[d],m)}return h}function nw(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let o=(l,u,h)=>{let d={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};d.relativePath.startsWith("/")&&(Xe(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let m=Ps([s,d.relativePath]),p=n.concat(d);l.children&&l.children.length>0&&(Xe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),nw(l.children,e,p,m)),!(l.path==null&&!l.index)&&e.push({path:m,score:VC(m,l.index),routesMeta:p})};return t.forEach((l,u)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))o(l,u);else for(let d of sw(l.path))o(l,u,d)}),e}function sw(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let u=sw(s.join("/")),h=[];return h.push(...u.map(d=>d===""?l:[l,d].join("/"))),o&&h.push(...u),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function DC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:UC(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const MC=/^:[\w-]+$/,OC=3,LC=2,FC=1,BC=10,zC=-2,dx=t=>t==="*";function VC(t,e){let n=t.split("/"),s=n.length;return n.some(dx)&&(s+=zC),e&&(s+=LC),n.filter(o=>!dx(o)).reduce((o,l)=>o+(MC.test(l)?OC:l===""?FC:BC),s)}function UC(t,e){return t.length===e.length&&t.slice(0,-1).every((s,o)=>s===e[o])?t[t.length-1]-e[e.length-1]:0}function WC(t,e,n){let{routesMeta:s}=t,o={},l="/",u=[];for(let h=0;h<s.length;++h){let d=s[h],m=h===s.length-1,p=l==="/"?e:e.slice(l.length)||"/",g=Vh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},p),y=d.route;if(!g)return null;Object.assign(o,g.params),u.push({params:o,pathname:Ps([l,g.pathname]),pathnameBase:QC(Ps([l,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(l=Ps([l,g.pathnameBase]))}return u}function Vh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=$C(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let l=o[0],u=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:s.reduce((m,p,g)=>{let{paramName:y,isOptional:w}=p;if(y==="*"){let C=h[g]||"";u=l.slice(0,l.length-C.length).replace(/(.)\/+$/,"$1")}const _=h[g];return w&&!_?m[y]=void 0:m[y]=(_||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:u,pattern:t}}function $C(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Pc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,d)=>(s.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function HC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ci(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}const GC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YC=t=>GC.test(t);function KC(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:o=""}=typeof t=="string"?_r(t):t,l;if(n)if(YC(n))l=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),Pc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+n))}n.startsWith("/")?l=hx(n.substring(1),"/"):l=hx(n,e)}else l=e;return{pathname:l,search:XC(s),hash:ZC(o)}}function hx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function th(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Vf(t,e){let n=qC(t);return e?n.map((s,o)=>o===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Uf(t,e,n,s){s===void 0&&(s=!1);let o;typeof t=="string"?o=_r(t):(o=Mo({},t),Xe(!o.pathname||!o.pathname.includes("?"),th("?","pathname","search",o)),Xe(!o.pathname||!o.pathname.includes("#"),th("#","pathname","hash",o)),Xe(!o.search||!o.search.includes("#"),th("#","search","hash",o)));let l=t===""||o.pathname==="",u=l?"/":o.pathname,h;if(u==null)h=n;else{let g=e.length-1;if(!s&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),g-=1;o.pathname=y.join("/")}h=g>=0?e[g]:"/"}let d=KC(o,h),m=u&&u!=="/"&&u.endsWith("/"),p=(l||u===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(m||p)&&(d.pathname+="/"),d}const Ps=t=>t.join("/").replace(/\/\/+/g,"/"),QC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),XC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ZC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function JC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const rw=["post","put","patch","delete"];new Set(rw);const eS=["get",...rw];new Set(eS);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oo(){return Oo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Oo.apply(this,arguments)}const Ic=k.createContext(null),iw=k.createContext(null),ns=k.createContext(null),Rc=k.createContext(null),Mn=k.createContext({outlet:null,matches:[],isDataRoute:!1}),ow=k.createContext(null);function tS(t,e){let{relative:n}=e===void 0?{}:e;xi()||Xe(!1);let{basename:s,navigator:o}=k.useContext(ns),{hash:l,pathname:u,search:h}=Ac(t,{relative:n}),d=u;return s!=="/"&&(d=u==="/"?s:Ps([s,u])),o.createHref({pathname:d,search:h,hash:l})}function xi(){return k.useContext(Rc)!=null}function yi(){return xi()||Xe(!1),k.useContext(Rc).location}function aw(t){k.useContext(ns).static||k.useLayoutEffect(t)}function On(){let{isDataRoute:t}=k.useContext(Mn);return t?gS():nS()}function nS(){xi()||Xe(!1);let t=k.useContext(Ic),{basename:e,future:n,navigator:s}=k.useContext(ns),{matches:o}=k.useContext(Mn),{pathname:l}=yi(),u=JSON.stringify(Vf(o,n.v7_relativeSplatPath)),h=k.useRef(!1);return aw(()=>{h.current=!0}),k.useCallback(function(m,p){if(p===void 0&&(p={}),!h.current)return;if(typeof m=="number"){s.go(m);return}let g=Uf(m,JSON.parse(u),l,p.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Ps([e,g.pathname])),(p.replace?s.replace:s.push)(g,p.state,p)},[e,s,u,l,t])}const sS=k.createContext(null);function rS(t){let e=k.useContext(Mn).outlet;return e&&k.createElement(sS.Provider,{value:t},e)}function lw(){let{matches:t}=k.useContext(Mn),e=t[t.length-1];return e?e.params:{}}function Ac(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=k.useContext(ns),{matches:o}=k.useContext(Mn),{pathname:l}=yi(),u=JSON.stringify(Vf(o,s.v7_relativeSplatPath));return k.useMemo(()=>Uf(t,JSON.parse(u),l,n==="path"),[t,u,l,n])}function iS(t,e){return oS(t,e)}function oS(t,e,n,s){xi()||Xe(!1);let{navigator:o}=k.useContext(ns),{matches:l}=k.useContext(Mn),u=l[l.length-1],h=u?u.params:{};u&&u.pathname;let d=u?u.pathnameBase:"/";u&&u.route;let m=yi(),p;if(e){var g;let S=typeof e=="string"?_r(e):e;d==="/"||(g=S.pathname)!=null&&g.startsWith(d)||Xe(!1),p=S}else p=m;let y=p.pathname||"/",w=y;if(d!=="/"){let S=d.replace(/^\//,"").split("/");w="/"+y.replace(/^\//,"").split("/").slice(S.length).join("/")}let _=RC(t,{pathname:w}),C=dS(_&&_.map(S=>Object.assign({},S,{params:Object.assign({},h,S.params),pathname:Ps([d,o.encodeLocation?o.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?d:Ps([d,o.encodeLocation?o.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),l,n,s);return e&&C?k.createElement(Rc.Provider,{value:{location:Oo({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:ks.Pop}},C):C}function aS(){let t=pS(),e=JC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:o},n):null,null)}const lS=k.createElement(aS,null);class cS extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(Mn.Provider,{value:this.props.routeContext},k.createElement(ow.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uS(t){let{routeContext:e,match:n,children:s}=t,o=k.useContext(Ic);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Mn.Provider,{value:e},s)}function dS(t,e,n,s){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var l;if(!n)return null;if(n.errors)t=n.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let u=t,h=(o=n)==null?void 0:o.errors;if(h!=null){let p=u.findIndex(g=>g.route.id&&(h==null?void 0:h[g.route.id])!==void 0);p>=0||Xe(!1),u=u.slice(0,Math.min(u.length,p+1))}let d=!1,m=-1;if(n&&s&&s.v7_partialHydration)for(let p=0;p<u.length;p++){let g=u[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:y,errors:w}=n,_=g.route.loader&&y[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||_){d=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((p,g,y)=>{let w,_=!1,C=null,S=null;n&&(w=h&&g.route.id?h[g.route.id]:void 0,C=g.route.errorElement||lS,d&&(m<0&&y===0?(xS("route-fallback"),_=!0,S=null):m===y&&(_=!0,S=g.route.hydrateFallbackElement||null)));let T=e.concat(u.slice(0,y+1)),N=()=>{let j;return w?j=C:_?j=S:g.route.Component?j=k.createElement(g.route.Component,null):g.route.element?j=g.route.element:j=p,k.createElement(uS,{match:g,routeContext:{outlet:p,matches:T,isDataRoute:n!=null},children:j})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?k.createElement(cS,{location:n.location,revalidation:n.revalidation,component:C,error:w,children:N(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):N()},null)}var cw=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(cw||{}),uw=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(uw||{});function hS(t){let e=k.useContext(Ic);return e||Xe(!1),e}function fS(t){let e=k.useContext(iw);return e||Xe(!1),e}function mS(t){let e=k.useContext(Mn);return e||Xe(!1),e}function dw(t){let e=mS(),n=e.matches[e.matches.length-1];return n.route.id||Xe(!1),n.route.id}function pS(){var t;let e=k.useContext(ow),n=fS(),s=dw();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function gS(){let{router:t}=hS(cw.UseNavigateStable),e=dw(uw.UseNavigateStable),n=k.useRef(!1);return aw(()=>{n.current=!0}),k.useCallback(function(o,l){l===void 0&&(l={}),n.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,Oo({fromRouteId:e},l)))},[t,e])}const fx={};function xS(t,e,n){fx[t]||(fx[t]=!0)}function yS(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function hw(t){let{to:e,replace:n,state:s,relative:o}=t;xi()||Xe(!1);let{future:l,static:u}=k.useContext(ns),{matches:h}=k.useContext(Mn),{pathname:d}=yi(),m=On(),p=Uf(e,Vf(h,l.v7_relativeSplatPath),d,o==="path"),g=JSON.stringify(p);return k.useEffect(()=>m(JSON.parse(g),{replace:n,state:s,relative:o}),[m,g,o,n,s]),null}function fw(t){return rS(t.context)}function Oe(t){Xe(!1)}function vS(t){let{basename:e="/",children:n=null,location:s,navigationType:o=ks.Pop,navigator:l,static:u=!1,future:h}=t;xi()&&Xe(!1);let d=e.replace(/^\/*/,"/"),m=k.useMemo(()=>({basename:d,navigator:l,static:u,future:Oo({v7_relativeSplatPath:!1},h)}),[d,h,l,u]);typeof s=="string"&&(s=_r(s));let{pathname:p="/",search:g="",hash:y="",state:w=null,key:_="default"}=s,C=k.useMemo(()=>{let S=ci(p,d);return S==null?null:{location:{pathname:S,search:g,hash:y,state:w,key:_},navigationType:o}},[d,p,g,y,w,_,o]);return C==null?null:k.createElement(ns.Provider,{value:m},k.createElement(Rc.Provider,{children:n,value:C}))}function wS(t){let{children:e,location:n}=t;return iS(Uh(e),n)}new Promise(()=>{});function Uh(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(s,o)=>{if(!k.isValidElement(s))return;let l=[...e,o];if(s.type===k.Fragment){n.push.apply(n,Uh(s.props.children,l));return}s.type!==Oe&&Xe(!1),!s.props.index||!s.props.children||Xe(!1);let u={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=Uh(s.props.children,l)),n.push(u)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xl(){return Xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Xl.apply(this,arguments)}function mw(t,e){if(t==null)return{};var n={},s=Object.keys(t),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function _S(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function bS(t,e){return t.button===0&&(!e||e==="_self")&&!_S(t)}const NS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],CS=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],SS="6";try{window.__reactRouterVersion=SS}catch{}const jS=k.createContext({isTransitioning:!1}),ES="startTransition",mx=bC[ES];function kS(t){let{basename:e,children:n,future:s,window:o}=t,l=k.useRef();l.current==null&&(l.current=TC({window:o,v5Compat:!0}));let u=l.current,[h,d]=k.useState({action:u.action,location:u.location}),{v7_startTransition:m}=s||{},p=k.useCallback(g=>{m&&mx?mx(()=>d(g)):d(g)},[d,m]);return k.useLayoutEffect(()=>u.listen(p),[u,p]),k.useEffect(()=>yS(s),[s]),k.createElement(vS,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:u,future:s})}const TS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=k.forwardRef(function(e,n){let{onClick:s,relative:o,reloadDocument:l,replace:u,state:h,target:d,to:m,preventScrollReset:p,viewTransition:g}=e,y=mw(e,NS),{basename:w}=k.useContext(ns),_,C=!1;if(typeof m=="string"&&PS.test(m)&&(_=m,TS))try{let j=new URL(window.location.href),D=m.startsWith("//")?new URL(j.protocol+m):new URL(m),L=ci(D.pathname,w);D.origin===j.origin&&L!=null?m=L+D.search+D.hash:C=!0}catch{}let S=tS(m,{relative:o}),T=RS(m,{replace:u,state:h,target:d,preventScrollReset:p,relative:o,viewTransition:g});function N(j){s&&s(j),j.defaultPrevented||T(j)}return k.createElement("a",Xl({},y,{href:_||S,onClick:C||l?s:N,ref:n,target:d}))}),pw=k.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:o=!1,className:l="",end:u=!1,style:h,to:d,viewTransition:m,children:p}=e,g=mw(e,CS),y=Ac(d,{relative:g.relative}),w=yi(),_=k.useContext(iw),{navigator:C,basename:S}=k.useContext(ns),T=_!=null&&AS(y)&&m===!0,N=C.encodeLocation?C.encodeLocation(y).pathname:y.pathname,j=w.pathname,D=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;o||(j=j.toLowerCase(),D=D?D.toLowerCase():null,N=N.toLowerCase()),D&&S&&(D=ci(D,S)||D);const L=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let W=j===N||!u&&j.startsWith(N)&&j.charAt(L)==="/",z=D!=null&&(D===N||!u&&D.startsWith(N)&&D.charAt(N.length)==="/"),F={isActive:W,isPending:z,isTransitioning:T},X=W?s:void 0,ie;typeof l=="function"?ie=l(F):ie=[l,W?"active":null,z?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let xe=typeof h=="function"?h(F):h;return k.createElement(Ce,Xl({},g,{"aria-current":X,className:ie,ref:n,style:xe,to:d,viewTransition:m}),typeof p=="function"?p(F):p)});var Wh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Wh||(Wh={}));var px;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(px||(px={}));function IS(t){let e=k.useContext(Ic);return e||Xe(!1),e}function RS(t,e){let{target:n,replace:s,state:o,preventScrollReset:l,relative:u,viewTransition:h}=e===void 0?{}:e,d=On(),m=yi(),p=Ac(t,{relative:u});return k.useCallback(g=>{if(bS(g,n)){g.preventDefault();let y=s!==void 0?s:Ql(m)===Ql(p);d(t,{replace:y,state:o,preventScrollReset:l,relative:u,viewTransition:h})}},[m,d,p,s,o,n,t,l,u,h])}function AS(t,e){e===void 0&&(e={});let n=k.useContext(jS);n==null&&Xe(!1);let{basename:s}=IS(Wh.useViewTransitionState),o=Ac(t,{relative:e.relative});if(!n.isTransitioning)return!1;let l=ci(n.currentLocation.pathname,s)||n.currentLocation.pathname,u=ci(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Vh(o.pathname,u)!=null||Vh(o.pathname,l)!=null}const DS={},gx=t=>{let e;const n=new Set,s=(p,g)=>{const y=typeof p=="function"?p(e):p;if(!Object.is(y,e)){const w=e;e=g??(typeof y!="object"||y===null)?y:Object.assign({},e,y),n.forEach(_=>_(e,w))}},o=()=>e,d={setState:s,getState:o,getInitialState:()=>m,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(DS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},m=e=t(s,o,d);return d},MS=t=>t?gx(t):gx;var nh={exports:{}},sh={},rh={exports:{}},ih={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xx;function OS(){if(xx)return ih;xx=1;var t=oa();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var n=typeof Object.is=="function"?Object.is:e,s=t.useState,o=t.useEffect,l=t.useLayoutEffect,u=t.useDebugValue;function h(g,y){var w=y(),_=s({inst:{value:w,getSnapshot:y}}),C=_[0].inst,S=_[1];return l(function(){C.value=w,C.getSnapshot=y,d(C)&&S({inst:C})},[g,w,y]),o(function(){return d(C)&&S({inst:C}),g(function(){d(C)&&S({inst:C})})},[g]),u(w),w}function d(g){var y=g.getSnapshot;g=g.value;try{var w=y();return!n(g,w)}catch{return!0}}function m(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:h;return ih.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,ih}var yx;function LS(){return yx||(yx=1,rh.exports=OS()),rh.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vx;function FS(){if(vx)return sh;vx=1;var t=oa(),e=LS();function n(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var s=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,l=t.useRef,u=t.useEffect,h=t.useMemo,d=t.useDebugValue;return sh.useSyncExternalStoreWithSelector=function(m,p,g,y,w){var _=l(null);if(_.current===null){var C={hasValue:!1,value:null};_.current=C}else C=_.current;_=h(function(){function T(W){if(!N){if(N=!0,j=W,W=y(W),w!==void 0&&C.hasValue){var z=C.value;if(w(z,W))return D=z}return D=W}if(z=D,s(j,W))return z;var F=y(W);return w!==void 0&&w(z,F)?(j=W,z):(j=W,D=F)}var N=!1,j,D,L=g===void 0?null:g;return[function(){return T(p())},L===null?void 0:function(){return T(L())}]},[p,g,y,w]);var S=o(m,_[0],_[1]);return u(function(){C.hasValue=!0,C.value=S},[S]),d(S),S},sh}var wx;function BS(){return wx||(wx=1,nh.exports=FS()),nh.exports}var zS=BS();const VS=zf(zS),gw={},{useDebugValue:US}=Me,{useSyncExternalStoreWithSelector:WS}=VS;let _x=!1;const $S=t=>t;function HS(t,e=$S,n){(gw?"production":void 0)!=="production"&&n&&!_x&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),_x=!0);const s=WS(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return US(s),s}const bx=t=>{(gw?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?MS(t):t,n=(s,o)=>HS(e,s,o);return Object.assign(n,e),n},GS=t=>t?bx(t):bx,YS={};function KS(t,e){let n;try{n=t()}catch{return}return{getItem:o=>{var l;const u=d=>d===null?null:JSON.parse(d,void 0),h=(l=n.getItem(o))!=null?l:null;return h instanceof Promise?h.then(u):u(h)},setItem:(o,l)=>n.setItem(o,JSON.stringify(l,void 0)),removeItem:o=>n.removeItem(o)}}const Lo=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(s){return Lo(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return Lo(s)(n)}}}},qS=(t,e)=>(n,s,o)=>{let l={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:S=>S,version:0,merge:(S,T)=>({...T,...S}),...e},u=!1;const h=new Set,d=new Set;let m;try{m=l.getStorage()}catch{}if(!m)return t((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...S)},s,o);const p=Lo(l.serialize),g=()=>{const S=l.partialize({...s()});let T;const N=p({state:S,version:l.version}).then(j=>m.setItem(l.name,j)).catch(j=>{T=j});if(T)throw T;return N},y=o.setState;o.setState=(S,T)=>{y(S,T),g()};const w=t((...S)=>{n(...S),g()},s,o);let _;const C=()=>{var S;if(!m)return;u=!1,h.forEach(N=>N(s()));const T=((S=l.onRehydrateStorage)==null?void 0:S.call(l,s()))||void 0;return Lo(m.getItem.bind(m))(l.name).then(N=>{if(N)return l.deserialize(N)}).then(N=>{if(N)if(typeof N.version=="number"&&N.version!==l.version){if(l.migrate)return l.migrate(N.state,N.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return N.state}).then(N=>{var j;return _=l.merge(N,(j=s())!=null?j:w),n(_,!0),g()}).then(()=>{T==null||T(_,void 0),u=!0,d.forEach(N=>N(_))}).catch(N=>{T==null||T(void 0,N)})};return o.persist={setOptions:S=>{l={...l,...S},S.getStorage&&(m=S.getStorage())},clearStorage:()=>{m==null||m.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>C(),hasHydrated:()=>u,onHydrate:S=>(h.add(S),()=>{h.delete(S)}),onFinishHydration:S=>(d.add(S),()=>{d.delete(S)})},C(),_||w},QS=(t,e)=>(n,s,o)=>{let l={storage:KS(()=>localStorage),partialize:C=>C,version:0,merge:(C,S)=>({...S,...C}),...e},u=!1;const h=new Set,d=new Set;let m=l.storage;if(!m)return t((...C)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...C)},s,o);const p=()=>{const C=l.partialize({...s()});return m.setItem(l.name,{state:C,version:l.version})},g=o.setState;o.setState=(C,S)=>{g(C,S),p()};const y=t((...C)=>{n(...C),p()},s,o);o.getInitialState=()=>y;let w;const _=()=>{var C,S;if(!m)return;u=!1,h.forEach(N=>{var j;return N((j=s())!=null?j:y)});const T=((S=l.onRehydrateStorage)==null?void 0:S.call(l,(C=s())!=null?C:y))||void 0;return Lo(m.getItem.bind(m))(l.name).then(N=>{if(N)if(typeof N.version=="number"&&N.version!==l.version){if(l.migrate)return[!0,l.migrate(N.state,N.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,N.state];return[!1,void 0]}).then(N=>{var j;const[D,L]=N;if(w=l.merge(L,(j=s())!=null?j:y),n(w,!0),D)return p()}).then(()=>{T==null||T(w,void 0),w=s(),u=!0,d.forEach(N=>N(w))}).catch(N=>{T==null||T(void 0,N)})};return o.persist={setOptions:C=>{l={...l,...C},C.storage&&(m=C.storage)},clearStorage:()=>{m==null||m.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>_(),hasHydrated:()=>u,onHydrate:C=>(h.add(C),()=>{h.delete(C)}),onFinishHydration:C=>(d.add(C),()=>{d.delete(C)})},l.skipHydration||_(),w||y},XS=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((YS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),qS(t,e)):QS(t,e),ZS=XS;var Nx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q=function(t,e){if(!t)throw vi(e)},vi=function(t){return new Error("Firebase Database ("+xw.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let o=t.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},JS=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const o=t[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=t[n++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=t[n++],u=t[n++],h=t[n++],d=((o&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(d>>10)),e[s++]=String.fromCharCode(56320+(d&1023))}else{const l=t[n++],u=t[n++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Wf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<t.length;o+=3){const l=t[o],u=o+1<t.length,h=u?t[o+1]:0,d=o+2<t.length,m=d?t[o+2]:0,p=l>>2,g=(l&3)<<4|h>>4;let y=(h&15)<<2|m>>6,w=m&63;d||(w=64,u||(y=64)),s.push(n[p],n[g],n[y],n[w])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<t.length;){const l=n[t.charAt(o++)],h=o<t.length?n[t.charAt(o)]:0;++o;const m=o<t.length?n[t.charAt(o)]:64;++o;const g=o<t.length?n[t.charAt(o)]:64;if(++o,l==null||h==null||m==null||g==null)throw new ej;const y=l<<2|h>>4;if(s.push(y),m!==64){const w=h<<4&240|m>>2;if(s.push(w),g!==64){const _=m<<6&192|g;s.push(_)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ej extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vw=function(t){const e=yw(t);return Wf.encodeByteArray(e,!0)},Zl=function(t){return vw(t).replace(/\./g,"")},$h=function(t){try{return Wf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(t){return ww(void 0,t)}function ww(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!nj(n)||(t[n]=ww(t[n],e[n]));return t}function nj(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=()=>sj().__FIREBASE_DEFAULTS__,ij=()=>{if(typeof process>"u"||typeof Nx>"u")return;const t=Nx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$h(t[1]);return e&&JSON.parse(e)},_w=()=>{try{return rj()||ij()||oj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aj=t=>{var e,n;return(n=(e=_w())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},bw=t=>{const e=aj(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Nw=()=>{var t;return(t=_w())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Zl(JSON.stringify(n)),Zl(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lj())}function cj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uj(){return xw.NODE_ADMIN===!0}function dj(){try{return typeof indexedDB=="object"}catch{return!1}}function hj(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj="FirebaseError";class wi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=fj,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jw.prototype.create)}}class jw{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?mj(l,s):"Error",h=`${this.serviceName}: ${u} (${o}).`;return new wi(o,h,s)}}function mj(t,e){return t.replace(pj,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const pj=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(t){return JSON.parse(t)}function ut(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=function(t){let e={},n={},s={},o="";try{const l=t.split(".");e=Fo($h(l[0])||""),n=Fo($h(l[1])||""),o=l[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:o}},gj=function(t){const e=Ew(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},xj=function(t){const e=Ew(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ui(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Cx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jl(t,e,n){const s={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(s[o]=e.call(n,t[o],o,t));return s}function Hh(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const l=t[o],u=e[o];if(Sx(l)&&Sx(u)){if(!Hh(l,u))return!1}else if(l!==u)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Sx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let g=0;g<16;g++)s[g]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let g=0;g<16;g++)s[g]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let g=16;g<80;g++){const y=s[g-3]^s[g-8]^s[g-14]^s[g-16];s[g]=(y<<1|y>>>31)&4294967295}let o=this.chain_[0],l=this.chain_[1],u=this.chain_[2],h=this.chain_[3],d=this.chain_[4],m,p;for(let g=0;g<80;g++){g<40?g<20?(m=h^l&(u^h),p=1518500249):(m=l^u^h,p=1859775393):g<60?(m=l&u|h&(l|u),p=2400959708):(m=l^u^h,p=3395469782);const y=(o<<5|o>>>27)+m+d+p+s[g]&4294967295;d=h,h=u,u=(l<<30|l>>>2)&4294967295,l=o,o=y}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let o=0;const l=this.buf_;let u=this.inbuf_;for(;o<n;){if(u===0)for(;o<=s;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(l[u]=e.charCodeAt(o),++u,++o,u===this.blockSize){this.compress_(l),u=0;break}}else for(;o<n;)if(l[u]=e[o],++u,++o,u===this.blockSize){this.compress_(l),u=0;break}}this.inbuf_=u,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let o=0;o<5;o++)for(let l=24;l>=0;l-=8)e[s]=this.chain_[o]>>l&255,++s;return e}}function $f(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let o=t.charCodeAt(s);if(o>=55296&&o<=56319){const l=o-55296;s++,q(s<t.length,"Surrogate pair missing trail surrogate.");const u=t.charCodeAt(s)-56320;o=65536+(l<<10)+u}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Mc=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t){return t&&t._delegate?t._delegate:t}class di{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Dc;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Nj(e))try{this.getOrInitializeService({instanceIdentifier:ir})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ir){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ir){return this.instances.has(e)}getOptions(e=ir){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);s===h&&u.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const u=this.instances.get(o);return u&&e(u,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:bj(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ir){return this.component?this.component.multipleInstances?e:ir:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bj(t){return t===ir?void 0:t}function Nj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _j(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ze||(ze={}));const Sj={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},jj=ze.INFO,Ej={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},kj=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),o=Ej[e];if(o)console[o](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kw{constructor(e){this.name=e,this._logLevel=jj,this._logHandler=kj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Sj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const Tj=(t,e)=>e.some(n=>t instanceof n);let jx,Ex;function Pj(){return jx||(jx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ij(){return Ex||(Ex=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tw=new WeakMap,Gh=new WeakMap,Pw=new WeakMap,oh=new WeakMap,Hf=new WeakMap;function Rj(t){const e=new Promise((n,s)=>{const o=()=>{t.removeEventListener("success",l),t.removeEventListener("error",u)},l=()=>{n(Is(t.result)),o()},u=()=>{s(t.error),o()};t.addEventListener("success",l),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&Tw.set(n,t)}).catch(()=>{}),Hf.set(e,t),e}function Aj(t){if(Gh.has(t))return;const e=new Promise((n,s)=>{const o=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",u),t.removeEventListener("abort",u)},l=()=>{n(),o()},u=()=>{s(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",l),t.addEventListener("error",u),t.addEventListener("abort",u)});Gh.set(t,e)}let Yh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Pw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Is(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Dj(t){Yh=t(Yh)}function Mj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(ah(this),e,...n);return Pw.set(s,e.sort?e.sort():[e]),Is(s)}:Ij().includes(t)?function(...e){return t.apply(ah(this),e),Is(Tw.get(this))}:function(...e){return Is(t.apply(ah(this),e))}}function Oj(t){return typeof t=="function"?Mj(t):(t instanceof IDBTransaction&&Aj(t),Tj(t,Pj())?new Proxy(t,Yh):t)}function Is(t){if(t instanceof IDBRequest)return Rj(t);if(oh.has(t))return oh.get(t);const e=Oj(t);return e!==t&&(oh.set(t,e),Hf.set(e,t)),e}const ah=t=>Hf.get(t);function Lj(t,e,{blocked:n,upgrade:s,blocking:o,terminated:l}={}){const u=indexedDB.open(t,e),h=Is(u);return s&&u.addEventListener("upgradeneeded",d=>{s(Is(u.result),d.oldVersion,d.newVersion,Is(u.transaction),d)}),n&&u.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{l&&d.addEventListener("close",()=>l()),o&&d.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const Fj=["get","getKey","getAll","getAllKeys","count"],Bj=["put","add","delete","clear"],lh=new Map;function kx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lh.get(e))return lh.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=Bj.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Fj.includes(n)))return;const l=async function(u,...h){const d=this.transaction(u,o?"readwrite":"readonly");let m=d.store;return s&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),o&&d.done]))[0]};return lh.set(e,l),l}Dj(t=>({...t,get:(e,n,s)=>kx(e,n)||t.get(e,n,s),has:(e,n)=>!!kx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Vj(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Vj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kh="@firebase/app",Tx="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new kw("@firebase/app"),Uj="@firebase/app-compat",Wj="@firebase/analytics-compat",$j="@firebase/analytics",Hj="@firebase/app-check-compat",Gj="@firebase/app-check",Yj="@firebase/auth",Kj="@firebase/auth-compat",qj="@firebase/database",Qj="@firebase/data-connect",Xj="@firebase/database-compat",Zj="@firebase/functions",Jj="@firebase/functions-compat",eE="@firebase/installations",tE="@firebase/installations-compat",nE="@firebase/messaging",sE="@firebase/messaging-compat",rE="@firebase/performance",iE="@firebase/performance-compat",oE="@firebase/remote-config",aE="@firebase/remote-config-compat",lE="@firebase/storage",cE="@firebase/storage-compat",uE="@firebase/firestore",dE="@firebase/vertexai-preview",hE="@firebase/firestore-compat",fE="firebase",mE="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="[DEFAULT]",pE={[Kh]:"fire-core",[Uj]:"fire-core-compat",[$j]:"fire-analytics",[Wj]:"fire-analytics-compat",[Gj]:"fire-app-check",[Hj]:"fire-app-check-compat",[Yj]:"fire-auth",[Kj]:"fire-auth-compat",[qj]:"fire-rtdb",[Qj]:"fire-data-connect",[Xj]:"fire-rtdb-compat",[Zj]:"fire-fn",[Jj]:"fire-fn-compat",[eE]:"fire-iid",[tE]:"fire-iid-compat",[nE]:"fire-fcm",[sE]:"fire-fcm-compat",[rE]:"fire-perf",[iE]:"fire-perf-compat",[oE]:"fire-rc",[aE]:"fire-rc-compat",[lE]:"fire-gcs",[cE]:"fire-gcs-compat",[uE]:"fire-fst",[hE]:"fire-fst-compat",[dE]:"fire-vertex","fire-js":"fire-js",[fE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new Map,gE=new Map,Qh=new Map;function Px(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bo(t){const e=t.name;if(Qh.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;Qh.set(e,t);for(const n of ec.values())Px(n,t);for(const n of gE.values())Px(n,t);return!0}function Iw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rs=new jw("app","Firebase",xE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=mE;function Aw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:qh,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw Rs.create("bad-app-name",{appName:String(o)});if(n||(n=Nw()),!n)throw Rs.create("no-options");const l=ec.get(o);if(l){if(Hh(n,l.options)&&Hh(s,l.config))return l;throw Rs.create("duplicate-app",{appName:o})}const u=new Cj(o);for(const d of Qh.values())u.addComponent(d);const h=new yE(n,s,u);return ec.set(o,h),h}function Dw(t=qh){const e=ec.get(t);if(!e&&t===qh&&Nw())return Aw();if(!e)throw Rs.create("no-app",{appName:t});return e}function As(t,e,n){var s;let o=(s=pE[t])!==null&&s!==void 0?s:t;n&&(o+=`-${n}`);const l=o.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${o}" with version "${e}":`];l&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(h.join(" "));return}Bo(new di(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="firebase-heartbeat-database",wE=1,zo="firebase-heartbeat-store";let ch=null;function Mw(){return ch||(ch=Lj(vE,wE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rs.create("idb-open",{originalErrorMessage:t.message})})),ch}async function _E(t){try{const n=(await Mw()).transaction(zo),s=await n.objectStore(zo).get(Ow(t));return await n.done,s}catch(e){if(e instanceof wi)Qn.warn(e.message);else{const n=Rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qn.warn(n.message)}}}async function Ix(t,e){try{const s=(await Mw()).transaction(zo,"readwrite");await s.objectStore(zo).put(e,Ow(t)),await s.done}catch(n){if(n instanceof wi)Qn.warn(n.message);else{const s=Rs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qn.warn(s.message)}}}function Ow(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=1024,NE=720*60*60*1e3;class CE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jE(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Rx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const h=new Date(u.date).valueOf();return Date.now()-h<=NE}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Qn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Rx(),{heartbeatsToSend:s,unsentEntries:o}=SE(this._heartbeatsCache.heartbeats),l=Zl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Qn.warn(n),""}}}function Rx(){return new Date().toISOString().substring(0,10)}function SE(t,e=bE){const n=[];let s=t.slice();for(const o of t){const l=n.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),Ax(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Ax(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class jE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dj()?hj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _E(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ix(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ix(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Ax(t){return Zl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(t){Bo(new di("platform-logger",e=>new zj(e),"PRIVATE")),Bo(new di("heartbeat",e=>new CE(e),"PRIVATE")),As(Kh,Tx,t),As(Kh,Tx,"esm2017"),As("fire-js","")}EE("");var Dx={};const Mx="@firebase/database",Ox="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lw="";function kE(t){Lw=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ut(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Fo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ss(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new TE(e)}}catch{}return new PE},cr=Fw("localStorage"),IE=Fw("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=new kw("@firebase/database"),RE=(function(){let t=1;return function(){return t++}})(),Bw=function(t){const e=wj(t),n=new vj;n.update(e);const s=n.digest();return Wf.encodeByteArray(s)},aa=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=aa.apply(null,s):typeof s=="object"?e+=ut(s):e+=s,e+=" "}return e};let So=null,Lx=!0;const AE=function(t,e){q(!0,"Can't turn on custom loggers persistently."),oi.logLevel=ze.VERBOSE,So=oi.log.bind(oi)},St=function(...t){if(Lx===!0&&(Lx=!1,So===null&&IE.get("logging_enabled")===!0&&AE()),So){const e=aa.apply(null,t);So(e)}},la=function(t){return function(...e){St(t,...e)}},Xh=function(...t){const e="FIREBASE INTERNAL ERROR: "+aa(...t);oi.error(e)},Xn=function(...t){const e=`FIREBASE FATAL ERROR: ${aa(...t)}`;throw oi.error(e),new Error(e)},zt=function(...t){const e="FIREBASE WARNING: "+aa(...t);oi.warn(e)},DE=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&zt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},zw=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},ME=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},hi="[MIN_NAME]",pr="[MAX_NAME]",_i=function(t,e){if(t===e)return 0;if(t===hi||e===pr)return-1;if(e===hi||t===pr)return 1;{const n=Fx(t),s=Fx(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},OE=function(t,e){return t===e?0:t<e?-1:1},mo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ut(e))},Gf=function(t){if(typeof t!="object"||t===null)return ut(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=ut(e[s]),n+=":",n+=Gf(t[e[s]]);return n+="}",n},Vw=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let o=0;o<n;o+=e)o+e>n?s.push(t.substring(o,n)):s.push(t.substring(o,o+e));return s};function Vt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Uw=function(t){q(!zw(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let o,l,u,h,d;t===0?(l=0,u=0,o=1/t===-1/0?1:0):(o=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(h=Math.min(Math.floor(Math.log(t)/Math.LN2),s),l=h+s,u=Math.round(t*Math.pow(2,n-h)-Math.pow(2,n))):(l=0,u=Math.round(t/Math.pow(2,1-s-n))));const m=[];for(d=n;d;d-=1)m.push(u%2?1:0),u=Math.floor(u/2);for(d=e;d;d-=1)m.push(l%2?1:0),l=Math.floor(l/2);m.push(o?1:0),m.reverse();const p=m.join("");let g="";for(d=0;d<64;d+=8){let y=parseInt(p.substr(d,8),2).toString(16);y.length===1&&(y="0"+y),g=g+y}return g.toLowerCase()},LE=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},FE=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function BE(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const zE=new RegExp("^-?(0*)\\d{1,10}$"),VE=-2147483648,UE=2147483647,Fx=function(t){if(zE.test(t)){const e=Number(t);if(e>=VE&&e<=UE)return e}return null},bi=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw zt("Exception was thrown by user callback.",n),e},Math.floor(0))}},WE=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},jo=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){zt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(St("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',zt(e)}}class Bl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Bl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="5",Ww="v",$w="s",Hw="r",Gw="f",Yw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Kw="ls",qw="p",Zh="ac",Qw="websocket",Xw="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,n,s,o,l=!1,u="",h=!1,d=!1){this.secure=n,this.namespace=s,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=cr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&cr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function GE(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Jw(t,e,n){q(typeof e=="string","typeof type must == string"),q(typeof n=="object","typeof params must == object");let s;if(e===Qw)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Xw)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);GE(t)&&(n.ns=t.namespace);const o=[];return Vt(n,(l,u)=>{o.push(l+"="+u)}),s+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(){this.counters_={}}incrementCounter(e,n=1){ss(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return tj(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh={},dh={};function Kf(t){const e=t.toString();return uh[e]||(uh[e]=new YE),uh[e]}function KE(t,e){const n=t.toString();return dh[n]||(dh[n]=e()),dh[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<s.length;++o)s[o]&&bi(()=>{this.onMessage_(s[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="start",QE="close",XE="pLPCommand",ZE="pRTLPCB",e1="id",t1="pw",n1="ser",JE="cb",ek="seg",tk="ts",nk="d",sk="dframe",s1=1870,r1=30,rk=s1-r1,ik=25e3,ok=3e4;class Jr{constructor(e,n,s,o,l,u,h){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=o,this.authToken=l,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=la(e),this.stats_=Kf(n),this.urlFn=d=>(this.appCheckToken&&(d[Zh]=this.appCheckToken),Jw(n,Xw,d))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new qE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ok)),ME(()=>{if(this.isClosed_)return;this.scriptTagHolder=new qf((...l)=>{const[u,h,d,m,p]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===Bx)this.id=h,this.password=d;else if(u===QE)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...l)=>{const[u,h]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const s={};s[Bx]="t",s[n1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[JE]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Ww]=Yf,this.transportSessionId&&(s[$w]=this.transportSessionId),this.lastSessionId&&(s[Kw]=this.lastSessionId),this.applicationId&&(s[qw]=this.applicationId),this.appCheckToken&&(s[Zh]=this.appCheckToken),typeof location<"u"&&location.hostname&&Yw.test(location.hostname)&&(s[Hw]=Gw);const o=this.urlFn(s);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Jr.forceAllow_=!0}static forceDisallow(){Jr.forceDisallow_=!0}static isAvailable(){return Jr.forceAllow_?!0:!Jr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!LE()&&!FE()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ut(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=vw(n),o=Vw(s,rk);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[sk]="t",s[e1]=e,s[t1]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ut(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class qf{constructor(e,n,s,o){this.onDisconnect=s,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=RE(),window[XE+this.uniqueCallbackIdentifier]=e,window[ZE+this.uniqueCallbackIdentifier]=n,this.myIFrame=qf.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){St("frame writing exception"),h.stack&&St(h.stack),St(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||St("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[e1]=this.myID,e[t1]=this.myPW,e[n1]=this.currentSerial;let n=this.urlFn(e),s="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+r1+s.length<=s1;){const u=this.pendingSegs.shift();s=s+"&"+ek+o+"="+u.seg+"&"+tk+o+"="+u.ts+"&"+nk+o+"="+u.d,o++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(s,Math.floor(ik)),l=()=>{clearTimeout(o),s()};this.addTag(e,l)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const o=s.readyState;(!o||o==="loaded"||o==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{St("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=16384,lk=45e3;let tc=null;typeof MozWebSocket<"u"?tc=MozWebSocket:typeof WebSocket<"u"&&(tc=WebSocket);class fn{constructor(e,n,s,o,l,u,h){this.connId=e,this.applicationId=s,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=la(this.connId),this.stats_=Kf(n),this.connURL=fn.connectionURL_(n,u,h,o,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,o,l){const u={};return u[Ww]=Yf,typeof location<"u"&&location.hostname&&Yw.test(location.hostname)&&(u[Hw]=Gw),n&&(u[$w]=n),s&&(u[Kw]=s),o&&(u[Zh]=o),l&&(u[qw]=l),Jw(e,Qw,u)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,cr.set("previous_websocket_failure",!0);try{let s;uj(),this.mySock=new tc(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){fn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&tc!==null&&!fn.forceDisallow_}static previouslyFailed(){return cr.isInMemoryStorage||cr.get("previous_websocket_failure")===!0}markConnectionHealthy(){cr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=Fo(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(q(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=ut(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Vw(n,ak);s.length>1&&this.sendString_(String(s.length));for(let o=0;o<s.length;o++)this.sendString_(s[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(lk))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}fn.responsesRequiredToBeHealthy=2;fn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Jr,fn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=fn&&fn.isAvailable();let s=n&&!fn.previouslyFailed();if(e.webSocketOnly&&(n||zt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[fn];else{const o=this.transports_=[];for(const l of Vo.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);Vo.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Vo.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=6e4,uk=5e3,dk=10*1024,hk=100*1024,hh="t",zx="d",fk="s",Vx="r",mk="e",Ux="o",Wx="a",$x="n",Hx="p",pk="h";class gk{constructor(e,n,s,o,l,u,h,d,m,p){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=d,this.onKill_=m,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=la("c:"+this.id+":"),this.transportManager_=new Vo(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=jo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>hk?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>dk?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(hh in e){const n=e[hh];n===Wx?this.upgradeIfSecondaryHealthy_():n===Vx?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Ux&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=mo("t",e),s=mo("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Hx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Wx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:$x,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=mo("t",e),s=mo("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=mo(hh,e);if(zx in e){const s=e[zx];if(n===pk){const o=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===$x){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===fk?this.onConnectionShutdown_(s):n===Vx?this.onReset_(s):n===mk?Xh("Server Error: "+s):n===Ux?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Xh("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Yf!==s&&zt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),jo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ck))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(uk))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Hx,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(cr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{put(e,n,s,o){}merge(e,n,s,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.allowedEvents_=e,this.listeners_={},q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let o=0;o<s.length;o++)s[o].callback.apply(s[o].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const o=this.getInitialEvent(e);o&&n.apply(s,o)}off(e,n,s){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===n&&(!s||s===o[l].context)){o.splice(l,1);return}}validateEventType_(e){q(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends o1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Sw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new nc}getInitialEvent(e){return q(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=32,Yx=768;class Le{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[s]=this.pieces_[o],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Pe(){return new Le("")}function we(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ls(t){return t.pieces_.length-t.pieceNum_}function Ve(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Le(t.pieces_,e)}function a1(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function xk(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function l1(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function c1(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Le(e,0)}function dt(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof Le)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let o=0;o<s.length;o++)s[o].length>0&&n.push(s[o])}return new Le(n,0)}function Ne(t){return t.pieceNum_>=t.pieces_.length}function Pt(t,e){const n=we(t),s=we(e);if(n===null)return e;if(n===s)return Pt(Ve(t),Ve(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Qf(t,e){if(Ls(t)!==Ls(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function mn(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(Ls(t)>Ls(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class yk{constructor(e,n){this.errorPrefix_=n,this.parts_=l1(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Mc(this.parts_[s]);u1(this)}}function vk(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Mc(e),u1(t)}function wk(t){const e=t.parts_.pop();t.byteLength_-=Mc(e),t.parts_.length>0&&(t.byteLength_-=1)}function u1(t){if(t.byteLength_>Yx)throw new Error(t.errorPrefix_+"has a key path longer than "+Yx+" bytes ("+t.byteLength_+").");if(t.parts_.length>Gx)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Gx+") or object contains a cycle "+or(t))}function or(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf extends o1{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new Xf}getInitialEvent(e){return q(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=1e3,_k=300*1e3,Kx=30*1e3,bk=1.3,Nk=3e4,Ck="server_kill",qx=3;class qn extends i1{constructor(e,n,s,o,l,u,h,d){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=u,this.appCheckTokenProvider_=h,this.authOverride_=d,this.id=qn.nextPersistentConnectionId_++,this.log_=la("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=po,this.maxReconnectDelay_=_k,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&nc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const o=++this.requestNumber_,l={r:o,a:e,b:n};this.log_(ut(l)),q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),s&&(this.requestCBHash_[o]=s)}get(e){this.initConnection_();const n=new Dc,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const h=u.d;u.s==="ok"?n.resolve(h):n.reject(h)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),n.promise}listen(e,n,s,o){this.initConnection_();const l=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+l),this.listens.has(u)||this.listens.set(u,new Map),q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),q(!this.listens.get(u).has(l),"listen() called twice for same path/queryId.");const h={onComplete:o,hashFn:n,query:e,tag:s};this.listens.get(u).set(l,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+s+" for "+o);const l={p:s},u="q";e.tag&&(l.q=n._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(u,l,h=>{const d=h.d,m=h.s;qn.warnOnListenWarnings_(d,n),(this.listens.get(s)&&this.listens.get(s).get(o))===e&&(this.log_("listen response",h),m!=="ok"&&this.removeListen_(s,o),e.onComplete&&e.onComplete(m,d))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ss(e,"w")){const s=ui(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',l=n._path.toString();zt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||xj(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Kx)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=gj(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,o=>{const l=o.s,u=o.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+o),q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,o)&&this.connected_&&this.sendUnlisten_(s,o,e._queryObject,n)}sendUnlisten_(e,n,s,o){this.log_("Unlisten on "+e+" for "+n);const l={p:e},u="n";o&&(l.q=s,l.t=o),this.sendRequest(u,l)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,o){const l={p:n,d:s};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,u=>{o&&setTimeout(()=>{o(u.s,u.d)},Math.floor(0))})}put(e,n,s,o){this.putInternal("p",e,n,s,o)}merge(e,n,s,o){this.putInternal("m",e,n,s,o)}putInternal(e,n,s,o,l){this.initConnection_();const u={p:n,d:s};l!==void 0&&(u.h=l),this.outstandingPuts_.push({action:e,request:u,onComplete:o}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,l=>{this.log_(n+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const l=s.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ut(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Xh("Unrecognized action received from server: "+ut(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=po,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=po,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Nk&&(this.reconnectDelay_=po),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*bk)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+qn.nextConnectionId_++,l=this.lastSessionId;let u=!1,h=null;const d=function(){h?h.close():(u=!0,s())},m=function(g){q(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(g)};this.realtime_={close:d,sendRequest:m};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[g,y]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);u?St("getToken() completed but was canceled"):(St("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=y&&y.token,h=new gk(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,w=>{zt(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(Ck)},l))}catch(g){this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&zt(g),d())}}}interrupt(e){St("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){St("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Cx(this.interruptReasons_)&&(this.reconnectDelay_=po,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(l=>Gf(l)).join("$"):s="default";const o=this.removeListen_(e,s);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const s=new Le(e).toString();let o;if(this.listens.has(s)){const l=this.listens.get(s);o=l.get(n),l.delete(n),l.size===0&&this.listens.delete(s)}else o=void 0;return o}onAuthRevoked_(e,n){St("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=qx&&(this.reconnectDelay_=Kx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){St("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=qx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Lw.replace(/\./g,"-")]=1,Sw()?e["framework.cordova"]=1:cj()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=nc.getInstance().currentlyOnline();return Cx(this.interruptReasons_)&&e}}qn.nextPersistentConnectionId_=0;qn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new _e(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new _e(hi,e),o=new _e(hi,n);return this.compare(s,o)!==0}minPost(){return _e.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tl;class d1 extends Oc{static get __EMPTY_NODE(){return Tl}static set __EMPTY_NODE(e){Tl=e}compare(e,n){return _i(e.name,n.name)}isDefinedOn(e){throw vi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return _e.MIN}maxPost(){return new _e(pr,Tl)}makePost(e,n){return q(typeof e=="string","KeyIndex indexValue must always be a string."),new _e(e,Tl)}toString(){return".key"}}const ai=new d1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n,s,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=n?s(e.key,n):1,o&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class gt{constructor(e,n,s,o,l){this.key=e,this.value=n,this.color=s??gt.RED,this.left=o??Bt.EMPTY_NODE,this.right=l??Bt.EMPTY_NODE}copy(e,n,s,o,l){return new gt(e??this.key,n??this.value,s??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const l=s(e,o.key);return l<0?o=o.copy(null,null,null,o.left.insert(e,n,s),null):l===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Bt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,o;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Bt.EMPTY_NODE;o=s.right.min_(),s=s.copy(o.key,o.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}gt.RED=!0;gt.BLACK=!1;class Sk{copy(e,n,s,o,l){return this}insert(e,n,s){return new gt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Bt{constructor(e,n=Bt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Bt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,gt.BLACK,null,null))}remove(e){return new Bt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,gt.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,o=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return o?o.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(o=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Pl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Pl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Pl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Pl(this.root_,null,this.comparator_,!0,e)}}Bt.EMPTY_NODE=new Sk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t,e){return _i(t.name,e.name)}function Zf(t,e){return _i(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jh;function Ek(t){Jh=t}const h1=function(t){return typeof t=="number"?"number:"+Uw(t):"string:"+t},f1=function(t){if(t.isLeafNode()){const e=t.val();q(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ss(e,".sv"),"Priority must be a string or number.")}else q(t===Jh||t.isEmpty(),"priority of unexpected type.");q(t===Jh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qx;class pt{constructor(e,n=pt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),f1(this.priorityNode_)}static set __childrenNodeConstructor(e){Qx=e}static get __childrenNodeConstructor(){return Qx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new pt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:pt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ne(e)?this:we(e)===".priority"?this.priorityNode_:pt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:pt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=we(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(q(s!==".priority"||Ls(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,pt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ve(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+h1(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Uw(this.value_):e+=this.value_,this.lazyHash_=Bw(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===pt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof pt.__childrenNodeConstructor?-1:(q(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,o=pt.VALUE_TYPE_ORDER.indexOf(n),l=pt.VALUE_TYPE_ORDER.indexOf(s);return q(o>=0,"Unknown leaf type: "+n),q(l>=0,"Unknown leaf type: "+s),o===l?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}pt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m1,p1;function kk(t){m1=t}function Tk(t){p1=t}class Pk extends Oc{compare(e,n){const s=e.node.getPriority(),o=n.node.getPriority(),l=s.compareTo(o);return l===0?_i(e.name,n.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return _e.MIN}maxPost(){return new _e(pr,new pt("[PRIORITY-POST]",p1))}makePost(e,n){const s=m1(e);return new _e(n,new pt("[PRIORITY-POST]",s))}toString(){return".priority"}}const tt=new Pk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=Math.log(2);class Rk{constructor(e){const n=l=>parseInt(Math.log(l)/Ik,10),s=l=>parseInt(Array(l+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=s(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const sc=function(t,e,n,s){t.sort(e);const o=function(d,m){const p=m-d;let g,y;if(p===0)return null;if(p===1)return g=t[d],y=n?n(g):g,new gt(y,g.node,gt.BLACK,null,null);{const w=parseInt(p/2,10)+d,_=o(d,w),C=o(w+1,m);return g=t[w],y=n?n(g):g,new gt(y,g.node,gt.BLACK,_,C)}},l=function(d){let m=null,p=null,g=t.length;const y=function(_,C){const S=g-_,T=g;g-=_;const N=o(S+1,T),j=t[S],D=n?n(j):j;w(new gt(D,j.node,C,null,N))},w=function(_){m?(m.left=_,m=_):(p=_,m=_)};for(let _=0;_<d.count;++_){const C=d.nextBitIsOne(),S=Math.pow(2,d.count-(_+1));C?y(S,gt.BLACK):(y(S,gt.BLACK),y(S,gt.RED))}return p},u=new Rk(t.length),h=l(u);return new Bt(s||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fh;const qr={};class Yn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return q(qr&&tt,"ChildrenNode.ts has not been loaded"),fh=fh||new Yn({".priority":qr},{".priority":tt}),fh}get(e){const n=ui(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Bt?n:null}hasIndex(e){return ss(this.indexSet_,e.toString())}addIndex(e,n){q(e!==ai,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let o=!1;const l=n.getIterator(_e.Wrap);let u=l.getNext();for(;u;)o=o||e.isDefinedOn(u.node),s.push(u),u=l.getNext();let h;o?h=sc(s,e.getCompare()):h=qr;const d=e.toString(),m=Object.assign({},this.indexSet_);m[d]=e;const p=Object.assign({},this.indexes_);return p[d]=h,new Yn(p,m)}addToIndexes(e,n){const s=Jl(this.indexes_,(o,l)=>{const u=ui(this.indexSet_,l);if(q(u,"Missing index implementation for "+l),o===qr)if(u.isDefinedOn(e.node)){const h=[],d=n.getIterator(_e.Wrap);let m=d.getNext();for(;m;)m.name!==e.name&&h.push(m),m=d.getNext();return h.push(e),sc(h,u.getCompare())}else return qr;else{const h=n.get(e.name);let d=o;return h&&(d=d.remove(new _e(e.name,h))),d.insert(e,e.node)}});return new Yn(s,this.indexSet_)}removeFromIndexes(e,n){const s=Jl(this.indexes_,o=>{if(o===qr)return o;{const l=n.get(e.name);return l?o.remove(new _e(e.name,l)):o}});return new Yn(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go;class he{constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&f1(this.priorityNode_),this.children_.isEmpty()&&q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return go||(go=new he(new Bt(Zf),null,Yn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||go}updatePriority(e){return this.children_.isEmpty()?this:new he(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?go:n}}getChild(e){const n=we(e);return n===null?this:this.getImmediateChild(n).getChild(Ve(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(q(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new _e(e,n);let o,l;n.isEmpty()?(o=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(s,this.children_)):(o=this.children_.insert(e,n),l=this.indexMap_.addToIndexes(s,this.children_));const u=o.isEmpty()?go:this.priorityNode_;return new he(o,u,l)}}updateChild(e,n){const s=we(e);if(s===null)return n;{q(we(e)!==".priority"||Ls(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(s).updateChild(Ve(e),n);return this.updateImmediateChild(s,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,o=0,l=!0;if(this.forEachChild(tt,(u,h)=>{n[u]=h.val(e),s++,l&&he.INTEGER_REGEXP_.test(u)?o=Math.max(o,Number(u)):l=!1}),!e&&l&&o<2*s){const u=[];for(const h in n)u[h]=n[h];return u}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+h1(this.getPriority().val())+":"),this.forEachChild(tt,(n,s)=>{const o=s.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":Bw(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const o=this.resolveIndex_(s);if(o){const l=o.getPredecessorKey(new _e(e,n));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new _e(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new _e(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,_e.Wrap);let l=o.peek();for(;l!=null&&n.compare(l,e)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,_e.Wrap);let l=o.peek();for(;l!=null&&n.compare(l,e)>0;)o.getNext(),l=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ca?-1:0}withIndex(e){if(e===ai||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new he(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ai||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(tt),o=n.getIterator(tt);let l=s.getNext(),u=o.getNext();for(;l&&u;){if(l.name!==u.name||!l.node.equals(u.node))return!1;l=s.getNext(),u=o.getNext()}return l===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===ai?null:this.indexMap_.get(e.toString())}}he.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Ak extends he{constructor(){super(new Bt(Zf),he.EMPTY_NODE,Yn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return he.EMPTY_NODE}isEmpty(){return!1}}const ca=new Ak;Object.defineProperties(_e,{MIN:{value:new _e(hi,he.EMPTY_NODE)},MAX:{value:new _e(pr,ca)}});d1.__EMPTY_NODE=he.EMPTY_NODE;pt.__childrenNodeConstructor=he;Ek(ca);Tk(ca);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=!0;function xt(t,e=null){if(t===null)return he.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),q(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new pt(n,xt(e))}if(!(t instanceof Array)&&Dk){const n=[];let s=!1;if(Vt(t,(u,h)=>{if(u.substring(0,1)!=="."){const d=xt(h);d.isEmpty()||(s=s||!d.getPriority().isEmpty(),n.push(new _e(u,d)))}}),n.length===0)return he.EMPTY_NODE;const l=sc(n,jk,u=>u.name,Zf);if(s){const u=sc(n,tt.getCompare());return new he(l,xt(e),new Yn({".priority":u},{".priority":tt}))}else return new he(l,xt(e),Yn.Default)}else{let n=he.EMPTY_NODE;return Vt(t,(s,o)=>{if(ss(t,s)&&s.substring(0,1)!=="."){const l=xt(o);(l.isLeafNode()||!l.isEmpty())&&(n=n.updateImmediateChild(s,l))}}),n.updatePriority(xt(e))}}kk(xt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk extends Oc{constructor(e){super(),this.indexPath_=e,q(!Ne(e)&&we(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),o=this.extractChild(n.node),l=s.compareTo(o);return l===0?_i(e.name,n.name):l}makePost(e,n){const s=xt(e),o=he.EMPTY_NODE.updateChild(this.indexPath_,s);return new _e(n,o)}maxPost(){const e=he.EMPTY_NODE.updateChild(this.indexPath_,ca);return new _e(pr,e)}toString(){return l1(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok extends Oc{compare(e,n){const s=e.node.compareTo(n.node);return s===0?_i(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return _e.MIN}maxPost(){return _e.MAX}makePost(e,n){const s=xt(e);return new _e(n,s)}toString(){return".value"}}const Lk=new Ok;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t){return{type:"value",snapshotNode:t}}function fi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Uo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Wo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Fk(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e){this.index_=e}updateChild(e,n,s,o,l,u){q(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(n);return h.getChild(o).equals(s.getChild(o))&&h.isEmpty()===s.isEmpty()||(u!=null&&(s.isEmpty()?e.hasChild(n)?u.trackChildChange(Uo(n,h)):q(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(fi(n,s)):u.trackChildChange(Wo(n,s,h))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(tt,(o,l)=>{n.hasChild(o)||s.trackChildChange(Uo(o,l))}),n.isLeafNode()||n.forEachChild(tt,(o,l)=>{if(e.hasChild(o)){const u=e.getImmediateChild(o);u.equals(l)||s.trackChildChange(Wo(o,l,u))}else s.trackChildChange(fi(o,l))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?he.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.indexedFilter_=new Jf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=$o.getStartPost_(e),this.endPost_=$o.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,o,l,u){return this.matches(new _e(n,s))||(s=he.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,o,l,u)}updateFullNode(e,n,s){n.isLeafNode()&&(n=he.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(he.EMPTY_NODE);const l=this;return n.forEachChild(tt,(u,h)=>{l.matches(new _e(u,h))||(o=o.updateImmediateChild(u,he.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new $o(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,o,l,u){return this.rangedFilter_.matches(new _e(n,s))||(s=he.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,o,l,u):this.fullLimitUpdateChild_(e,n,s,l,u)}updateFullNode(e,n,s){let o;if(n.isLeafNode()||n.isEmpty())o=he.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=he.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const h=l.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))o=o.updateImmediateChild(h.name,h.node),u++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(he.EMPTY_NODE);let l;this.reverse_?l=o.getReverseIterator(this.index_):l=o.getIterator(this.index_);let u=0;for(;l.hasNext();){const h=l.getNext();u<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?u++:o=o.updateImmediateChild(h.name,he.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,o,l){let u;if(this.reverse_){const g=this.index_.getCompare();u=(y,w)=>g(w,y)}else u=this.index_.getCompare();const h=e;q(h.numChildren()===this.limit_,"");const d=new _e(n,s),m=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),p=this.rangedFilter_.matches(d);if(h.hasChild(n)){const g=h.getImmediateChild(n);let y=o.getChildAfterChild(this.index_,m,this.reverse_);for(;y!=null&&(y.name===n||h.hasChild(y.name));)y=o.getChildAfterChild(this.index_,y,this.reverse_);const w=y==null?1:u(y,d);if(p&&!s.isEmpty()&&w>=0)return l!=null&&l.trackChildChange(Wo(n,s,g)),h.updateImmediateChild(n,s);{l!=null&&l.trackChildChange(Uo(n,g));const C=h.updateImmediateChild(n,he.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(l!=null&&l.trackChildChange(fi(y.name,y.node)),C.updateImmediateChild(y.name,y.node)):C}}else return s.isEmpty()?e:p&&u(m,d)>=0?(l!=null&&(l.trackChildChange(Uo(m.name,m.node)),l.trackChildChange(fi(n,s))),h.updateImmediateChild(n,s).updateImmediateChild(m.name,he.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:hi}hasEnd(){return this.endSet_}getIndexEndValue(){return q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:pr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===tt}copy(){const e=new em;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function zk(t){return t.loadsAllData()?new Jf(t.getIndex()):t.hasLimit()?new Bk(t):new $o(t)}function Xx(t){const e={};if(t.isDefault())return e;let n;if(t.index_===tt?n="$priority":t.index_===Lk?n="$value":t.index_===ai?n="$key":(q(t.index_ instanceof Mk,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ut(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=ut(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+ut(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=ut(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+ut(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Zx(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==tt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends i1{constructor(e,n,s,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.log_=la("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,s,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=rc.getListenId_(e,s),h={};this.listens_[u]=h;const d=Xx(e._queryParams);this.restRequest_(l+".json",d,(m,p)=>{let g=p;if(m===404&&(g=null,m=null),m===null&&this.onDataUpdate_(l,g,!1,s),ui(this.listens_,u)===h){let y;m?m===401?y="permission_denied":y="rest_error:"+m:y="ok",o(y,null)}})}unlisten(e,n){const s=rc.getListenId_(e,n);delete this.listens_[s]}get(e){const n=Xx(e._queryParams),s=e._path.toString(),o=new Dc;return this.restRequest_(s+".json",n,(l,u)=>{let h=u;l===404&&(h=null,l=null),l===null?(this.onDataUpdate_(s,h,!1,null),o.resolve(h)):o.reject(new Error(h))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(n.auth=o.accessToken),l&&l.token&&(n.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+yj(n);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(s&&h.readyState===4){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let d=null;if(h.status>=200&&h.status<300){try{d=Fo(h.responseText)}catch{zt("Failed to parse JSON response for "+u+": "+h.responseText)}s(null,d)}else h.status!==401&&h.status!==404&&zt("Got unsuccessful REST response for "+u+" Status: "+h.status),s(h.status);s=null}},h.open("GET",u,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.rootNode_=he.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(){return{value:null,children:new Map}}function x1(t,e,n){if(Ne(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=we(e);t.children.has(s)||t.children.set(s,ic());const o=t.children.get(s);e=Ve(e),x1(o,e,n)}}function ef(t,e,n){t.value!==null?n(e,t.value):Uk(t,(s,o)=>{const l=new Le(e.toString()+"/"+s);ef(o,l,n)})}function Uk(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Vt(this.last_,(s,o)=>{n[s]=n[s]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=10*1e3,$k=30*1e3,Hk=300*1e3;class Gk{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Wk(e);const s=Jx+($k-Jx)*Math.random();jo(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;Vt(e,(o,l)=>{l>0&&ss(this.statsToReport_,o)&&(n[o]=l,s=!0)}),s&&this.server_.reportStats(n),jo(this.reportStats_.bind(this),Math.floor(Math.random()*2*Hk))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(pn||(pn={}));function y1(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function tm(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function nm(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=pn.ACK_USER_WRITE,this.source=y1()}operationForChild(e){if(Ne(this.path)){if(this.affectedTree.value!=null)return q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Le(e));return new oc(Pe(),n,this.revert)}}else return q(we(this.path)===e,"operationForChild called for unrelated child."),new oc(Ve(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n){this.source=e,this.path=n,this.type=pn.LISTEN_COMPLETE}operationForChild(e){return Ne(this.path)?new Ho(this.source,Pe()):new Ho(this.source,Ve(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=pn.OVERWRITE}operationForChild(e){return Ne(this.path)?new gr(this.source,Pe(),this.snap.getImmediateChild(e)):new gr(this.source,Ve(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=pn.MERGE}operationForChild(e){if(Ne(this.path)){const n=this.children.subtree(new Le(e));return n.isEmpty()?null:n.value?new gr(this.source,Pe(),n.value):new Go(this.source,Pe(),n)}else return q(we(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Go(this.source,Ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ne(e))return this.isFullyInitialized()&&!this.filtered_;const n=we(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Kk(t,e,n,s){const o=[],l=[];return e.forEach(u=>{u.type==="child_changed"&&t.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(Fk(u.childName,u.snapshotNode))}),xo(t,o,"child_removed",e,s,n),xo(t,o,"child_added",e,s,n),xo(t,o,"child_moved",l,s,n),xo(t,o,"child_changed",e,s,n),xo(t,o,"value",e,s,n),o}function xo(t,e,n,s,o,l){const u=s.filter(h=>h.type===n);u.sort((h,d)=>Qk(t,h,d)),u.forEach(h=>{const d=qk(t,h,l);o.forEach(m=>{m.respondsTo(h.type)&&e.push(m.createEvent(d,t.query_))})})}function qk(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Qk(t,e,n){if(e.childName==null||n.childName==null)throw vi("Should only compare child_ events.");const s=new _e(e.childName,e.snapshotNode),o=new _e(n.childName,n.snapshotNode);return t.index_.compare(s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(t,e){return{eventCache:t,serverCache:e}}function Eo(t,e,n,s){return Lc(new Fs(e,n,s),t.serverCache)}function v1(t,e,n,s){return Lc(t.eventCache,new Fs(e,n,s))}function ac(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function xr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mh;const Xk=()=>(mh||(mh=new Bt(OE)),mh);class He{constructor(e,n=Xk()){this.value=e,this.children=n}static fromObject(e){let n=new He(null);return Vt(e,(s,o)=>{n=n.set(new Le(s),o)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Pe(),value:this.value};if(Ne(e))return null;{const s=we(e),o=this.children.get(s);if(o!==null){const l=o.findRootMostMatchingPathAndValue(Ve(e),n);return l!=null?{path:dt(new Le(s),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ne(e))return this;{const n=we(e),s=this.children.get(n);return s!==null?s.subtree(Ve(e)):new He(null)}}set(e,n){if(Ne(e))return new He(n,this.children);{const s=we(e),l=(this.children.get(s)||new He(null)).set(Ve(e),n),u=this.children.insert(s,l);return new He(this.value,u)}}remove(e){if(Ne(e))return this.children.isEmpty()?new He(null):new He(null,this.children);{const n=we(e),s=this.children.get(n);if(s){const o=s.remove(Ve(e));let l;return o.isEmpty()?l=this.children.remove(n):l=this.children.insert(n,o),this.value===null&&l.isEmpty()?new He(null):new He(this.value,l)}else return this}}get(e){if(Ne(e))return this.value;{const n=we(e),s=this.children.get(n);return s?s.get(Ve(e)):null}}setTree(e,n){if(Ne(e))return n;{const s=we(e),l=(this.children.get(s)||new He(null)).setTree(Ve(e),n);let u;return l.isEmpty()?u=this.children.remove(s):u=this.children.insert(s,l),new He(this.value,u)}}fold(e){return this.fold_(Pe(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((o,l)=>{s[o]=l.fold_(dt(e,o),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,Pe(),n)}findOnPath_(e,n,s){const o=this.value?s(n,this.value):!1;if(o)return o;if(Ne(e))return null;{const l=we(e),u=this.children.get(l);return u?u.findOnPath_(Ve(e),dt(n,l),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Pe(),n)}foreachOnPath_(e,n,s){if(Ne(e))return this;{this.value&&s(n,this.value);const o=we(e),l=this.children.get(o);return l?l.foreachOnPath_(Ve(e),dt(n,o),s):new He(null)}}foreach(e){this.foreach_(Pe(),e)}foreach_(e,n){this.children.inorderTraversal((s,o)=>{o.foreach_(dt(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.writeTree_=e}static empty(){return new xn(new He(null))}}function ko(t,e,n){if(Ne(e))return new xn(new He(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const o=s.path;let l=s.value;const u=Pt(o,e);return l=l.updateChild(u,n),new xn(t.writeTree_.set(o,l))}else{const o=new He(n),l=t.writeTree_.setTree(e,o);return new xn(l)}}}function ey(t,e,n){let s=t;return Vt(n,(o,l)=>{s=ko(s,dt(e,o),l)}),s}function ty(t,e){if(Ne(e))return xn.empty();{const n=t.writeTree_.setTree(e,new He(null));return new xn(n)}}function tf(t,e){return Nr(t,e)!=null}function Nr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Pt(n.path,e)):null}function ny(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(tt,(s,o)=>{e.push(new _e(s,o))}):t.writeTree_.children.inorderTraversal((s,o)=>{o.value!=null&&e.push(new _e(s,o.value))}),e}function Ds(t,e){if(Ne(e))return t;{const n=Nr(t,e);return n!=null?new xn(new He(n)):new xn(t.writeTree_.subtree(e))}}function nf(t){return t.writeTree_.isEmpty()}function mi(t,e){return w1(Pe(),t.writeTree_,e)}function w1(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((o,l)=>{o===".priority"?(q(l.value!==null,"Priority writes must always be leaf nodes"),s=l.value):n=w1(dt(t,o),l,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(dt(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t,e){return C1(e,t)}function Zk(t,e,n,s,o){q(s>t.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:o}),o&&(t.visibleWrites=ko(t.visibleWrites,e,n)),t.lastWriteId=s}function Jk(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function eT(t,e){const n=t.allWrites.findIndex(h=>h.writeId===e);q(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let o=s.visible,l=!1,u=t.allWrites.length-1;for(;o&&u>=0;){const h=t.allWrites[u];h.visible&&(u>=n&&tT(h,s.path)?o=!1:mn(s.path,h.path)&&(l=!0)),u--}if(o){if(l)return nT(t),!0;if(s.snap)t.visibleWrites=ty(t.visibleWrites,s.path);else{const h=s.children;Vt(h,d=>{t.visibleWrites=ty(t.visibleWrites,dt(s.path,d))})}return!0}else return!1}function tT(t,e){if(t.snap)return mn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&mn(dt(t.path,n),e))return!0;return!1}function nT(t){t.visibleWrites=_1(t.allWrites,sT,Pe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function sT(t){return t.visible}function _1(t,e,n){let s=xn.empty();for(let o=0;o<t.length;++o){const l=t[o];if(e(l)){const u=l.path;let h;if(l.snap)mn(n,u)?(h=Pt(n,u),s=ko(s,h,l.snap)):mn(u,n)&&(h=Pt(u,n),s=ko(s,Pe(),l.snap.getChild(h)));else if(l.children){if(mn(n,u))h=Pt(n,u),s=ey(s,h,l.children);else if(mn(u,n))if(h=Pt(u,n),Ne(h))s=ey(s,Pe(),l.children);else{const d=ui(l.children,we(h));if(d){const m=d.getChild(Ve(h));s=ko(s,Pe(),m)}}}else throw vi("WriteRecord should have .snap or .children")}}return s}function b1(t,e,n,s,o){if(!s&&!o){const l=Nr(t.visibleWrites,e);if(l!=null)return l;{const u=Ds(t.visibleWrites,e);if(nf(u))return n;if(n==null&&!tf(u,Pe()))return null;{const h=n||he.EMPTY_NODE;return mi(u,h)}}}else{const l=Ds(t.visibleWrites,e);if(!o&&nf(l))return n;if(!o&&n==null&&!tf(l,Pe()))return null;{const u=function(m){return(m.visible||o)&&(!s||!~s.indexOf(m.writeId))&&(mn(m.path,e)||mn(e,m.path))},h=_1(t.allWrites,u,e),d=n||he.EMPTY_NODE;return mi(h,d)}}}function rT(t,e,n){let s=he.EMPTY_NODE;const o=Nr(t.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(tt,(l,u)=>{s=s.updateImmediateChild(l,u)}),s;if(n){const l=Ds(t.visibleWrites,e);return n.forEachChild(tt,(u,h)=>{const d=mi(Ds(l,new Le(u)),h);s=s.updateImmediateChild(u,d)}),ny(l).forEach(u=>{s=s.updateImmediateChild(u.name,u.node)}),s}else{const l=Ds(t.visibleWrites,e);return ny(l).forEach(u=>{s=s.updateImmediateChild(u.name,u.node)}),s}}function iT(t,e,n,s,o){q(s||o,"Either existingEventSnap or existingServerSnap must exist");const l=dt(e,n);if(tf(t.visibleWrites,l))return null;{const u=Ds(t.visibleWrites,l);return nf(u)?o.getChild(n):mi(u,o.getChild(n))}}function oT(t,e,n,s){const o=dt(e,n),l=Nr(t.visibleWrites,o);if(l!=null)return l;if(s.isCompleteForChild(n)){const u=Ds(t.visibleWrites,o);return mi(u,s.getNode().getImmediateChild(n))}else return null}function aT(t,e){return Nr(t.visibleWrites,e)}function lT(t,e,n,s,o,l,u){let h;const d=Ds(t.visibleWrites,e),m=Nr(d,Pe());if(m!=null)h=m;else if(n!=null)h=mi(d,n);else return[];if(h=h.withIndex(u),!h.isEmpty()&&!h.isLeafNode()){const p=[],g=u.getCompare(),y=l?h.getReverseIteratorFrom(s,u):h.getIteratorFrom(s,u);let w=y.getNext();for(;w&&p.length<o;)g(w,s)!==0&&p.push(w),w=y.getNext();return p}else return[]}function cT(){return{visibleWrites:xn.empty(),allWrites:[],lastWriteId:-1}}function lc(t,e,n,s){return b1(t.writeTree,t.treePath,e,n,s)}function sm(t,e){return rT(t.writeTree,t.treePath,e)}function sy(t,e,n,s){return iT(t.writeTree,t.treePath,e,n,s)}function cc(t,e){return aT(t.writeTree,dt(t.treePath,e))}function uT(t,e,n,s,o,l){return lT(t.writeTree,t.treePath,e,n,s,o,l)}function rm(t,e,n){return oT(t.writeTree,t.treePath,e,n)}function N1(t,e){return C1(dt(t.treePath,e),t.writeTree)}function C1(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;q(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),q(s!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(s);if(o){const l=o.type;if(n==="child_added"&&l==="child_removed")this.changeMap.set(s,Wo(s,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&l==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&l==="child_changed")this.changeMap.set(s,Uo(s,o.oldSnap));else if(n==="child_changed"&&l==="child_added")this.changeMap.set(s,fi(s,e.snapshotNode));else if(n==="child_changed"&&l==="child_changed")this.changeMap.set(s,Wo(s,e.snapshotNode,o.oldSnap));else throw vi("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const S1=new hT;class im{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Fs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rm(this.writes_,e,s)}}getChildAfterChild(e,n,s){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:xr(this.viewCache_),l=uT(this.writes_,o,n,1,s,e);return l.length===0?null:l[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){return{filter:t}}function mT(t,e){q(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),q(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function pT(t,e,n,s,o){const l=new dT;let u,h;if(n.type===pn.OVERWRITE){const m=n;m.source.fromUser?u=sf(t,e,m.path,m.snap,s,o,l):(q(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered()&&!Ne(m.path),u=uc(t,e,m.path,m.snap,s,o,h,l))}else if(n.type===pn.MERGE){const m=n;m.source.fromUser?u=xT(t,e,m.path,m.children,s,o,l):(q(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered(),u=rf(t,e,m.path,m.children,s,o,h,l))}else if(n.type===pn.ACK_USER_WRITE){const m=n;m.revert?u=wT(t,e,m.path,s,o,l):u=yT(t,e,m.path,m.affectedTree,s,o,l)}else if(n.type===pn.LISTEN_COMPLETE)u=vT(t,e,n.path,s,l);else throw vi("Unknown operation type: "+n.type);const d=l.getChanges();return gT(e,u,d),{viewCache:u,changes:d}}function gT(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const o=s.getNode().isLeafNode()||s.getNode().isEmpty(),l=ac(t);(n.length>0||!t.eventCache.isFullyInitialized()||o&&!s.getNode().equals(l)||!s.getNode().getPriority().equals(l.getPriority()))&&n.push(g1(ac(e)))}}function j1(t,e,n,s,o,l){const u=e.eventCache;if(cc(s,n)!=null)return e;{let h,d;if(Ne(n))if(q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=xr(e),p=m instanceof he?m:he.EMPTY_NODE,g=sm(s,p);h=t.filter.updateFullNode(e.eventCache.getNode(),g,l)}else{const m=lc(s,xr(e));h=t.filter.updateFullNode(e.eventCache.getNode(),m,l)}else{const m=we(n);if(m===".priority"){q(Ls(n)===1,"Can't have a priority with additional path components");const p=u.getNode();d=e.serverCache.getNode();const g=sy(s,n,p,d);g!=null?h=t.filter.updatePriority(p,g):h=u.getNode()}else{const p=Ve(n);let g;if(u.isCompleteForChild(m)){d=e.serverCache.getNode();const y=sy(s,n,u.getNode(),d);y!=null?g=u.getNode().getImmediateChild(m).updateChild(p,y):g=u.getNode().getImmediateChild(m)}else g=rm(s,m,e.serverCache);g!=null?h=t.filter.updateChild(u.getNode(),m,g,p,o,l):h=u.getNode()}}return Eo(e,h,u.isFullyInitialized()||Ne(n),t.filter.filtersNodes())}}function uc(t,e,n,s,o,l,u,h){const d=e.serverCache;let m;const p=u?t.filter:t.filter.getIndexedFilter();if(Ne(n))m=p.updateFullNode(d.getNode(),s,null);else if(p.filtersNodes()&&!d.isFiltered()){const w=d.getNode().updateChild(n,s);m=p.updateFullNode(d.getNode(),w,null)}else{const w=we(n);if(!d.isCompleteForPath(n)&&Ls(n)>1)return e;const _=Ve(n),S=d.getNode().getImmediateChild(w).updateChild(_,s);w===".priority"?m=p.updatePriority(d.getNode(),S):m=p.updateChild(d.getNode(),w,S,_,S1,null)}const g=v1(e,m,d.isFullyInitialized()||Ne(n),p.filtersNodes()),y=new im(o,g,l);return j1(t,g,n,o,y,h)}function sf(t,e,n,s,o,l,u){const h=e.eventCache;let d,m;const p=new im(o,e,l);if(Ne(n))m=t.filter.updateFullNode(e.eventCache.getNode(),s,u),d=Eo(e,m,!0,t.filter.filtersNodes());else{const g=we(n);if(g===".priority")m=t.filter.updatePriority(e.eventCache.getNode(),s),d=Eo(e,m,h.isFullyInitialized(),h.isFiltered());else{const y=Ve(n),w=h.getNode().getImmediateChild(g);let _;if(Ne(y))_=s;else{const C=p.getCompleteChild(g);C!=null?a1(y)===".priority"&&C.getChild(c1(y)).isEmpty()?_=C:_=C.updateChild(y,s):_=he.EMPTY_NODE}if(w.equals(_))d=e;else{const C=t.filter.updateChild(h.getNode(),g,_,y,p,u);d=Eo(e,C,h.isFullyInitialized(),t.filter.filtersNodes())}}}return d}function ry(t,e){return t.eventCache.isCompleteForChild(e)}function xT(t,e,n,s,o,l,u){let h=e;return s.foreach((d,m)=>{const p=dt(n,d);ry(e,we(p))&&(h=sf(t,h,p,m,o,l,u))}),s.foreach((d,m)=>{const p=dt(n,d);ry(e,we(p))||(h=sf(t,h,p,m,o,l,u))}),h}function iy(t,e,n){return n.foreach((s,o)=>{e=e.updateChild(s,o)}),e}function rf(t,e,n,s,o,l,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,m;Ne(n)?m=s:m=new He(null).setTree(n,s);const p=e.serverCache.getNode();return m.children.inorderTraversal((g,y)=>{if(p.hasChild(g)){const w=e.serverCache.getNode().getImmediateChild(g),_=iy(t,w,y);d=uc(t,d,new Le(g),_,o,l,u,h)}}),m.children.inorderTraversal((g,y)=>{const w=!e.serverCache.isCompleteForChild(g)&&y.value===null;if(!p.hasChild(g)&&!w){const _=e.serverCache.getNode().getImmediateChild(g),C=iy(t,_,y);d=uc(t,d,new Le(g),C,o,l,u,h)}}),d}function yT(t,e,n,s,o,l,u){if(cc(o,n)!=null)return e;const h=e.serverCache.isFiltered(),d=e.serverCache;if(s.value!=null){if(Ne(n)&&d.isFullyInitialized()||d.isCompleteForPath(n))return uc(t,e,n,d.getNode().getChild(n),o,l,h,u);if(Ne(n)){let m=new He(null);return d.getNode().forEachChild(ai,(p,g)=>{m=m.set(new Le(p),g)}),rf(t,e,n,m,o,l,h,u)}else return e}else{let m=new He(null);return s.foreach((p,g)=>{const y=dt(n,p);d.isCompleteForPath(y)&&(m=m.set(p,d.getNode().getChild(y)))}),rf(t,e,n,m,o,l,h,u)}}function vT(t,e,n,s,o){const l=e.serverCache,u=v1(e,l.getNode(),l.isFullyInitialized()||Ne(n),l.isFiltered());return j1(t,u,n,s,S1,o)}function wT(t,e,n,s,o,l){let u;if(cc(s,n)!=null)return e;{const h=new im(s,e,o),d=e.eventCache.getNode();let m;if(Ne(n)||we(n)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=lc(s,xr(e));else{const g=e.serverCache.getNode();q(g instanceof he,"serverChildren would be complete if leaf node"),p=sm(s,g)}p=p,m=t.filter.updateFullNode(d,p,l)}else{const p=we(n);let g=rm(s,p,e.serverCache);g==null&&e.serverCache.isCompleteForChild(p)&&(g=d.getImmediateChild(p)),g!=null?m=t.filter.updateChild(d,p,g,Ve(n),h,l):e.eventCache.getNode().hasChild(p)?m=t.filter.updateChild(d,p,he.EMPTY_NODE,Ve(n),h,l):m=d,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=lc(s,xr(e)),u.isLeafNode()&&(m=t.filter.updateFullNode(m,u,l)))}return u=e.serverCache.isFullyInitialized()||cc(s,Pe())!=null,Eo(e,m,u,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,o=new Jf(s.getIndex()),l=zk(s);this.processor_=fT(l);const u=n.serverCache,h=n.eventCache,d=o.updateFullNode(he.EMPTY_NODE,u.getNode(),null),m=l.updateFullNode(he.EMPTY_NODE,h.getNode(),null),p=new Fs(d,u.isFullyInitialized(),o.filtersNodes()),g=new Fs(m,h.isFullyInitialized(),l.filtersNodes());this.viewCache_=Lc(g,p),this.eventGenerator_=new Yk(this.query_)}get query(){return this.query_}}function bT(t){return t.viewCache_.serverCache.getNode()}function NT(t){return ac(t.viewCache_)}function CT(t,e){const n=xr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ne(e)&&!n.getImmediateChild(we(e)).isEmpty())?n.getChild(e):null}function oy(t){return t.eventRegistrations_.length===0}function ST(t,e){t.eventRegistrations_.push(e)}function ay(t,e,n){const s=[];if(n){q(e==null,"A cancel should cancel all event registrations.");const o=t.query._path;t.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(n,o);u&&s.push(u)})}if(e){let o=[];for(let l=0;l<t.eventRegistrations_.length;++l){const u=t.eventRegistrations_[l];if(!u.matches(e))o.push(u);else if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(l+1));break}}t.eventRegistrations_=o}else t.eventRegistrations_=[];return s}function ly(t,e,n,s){e.type===pn.MERGE&&e.source.queryId!==null&&(q(xr(t.viewCache_),"We should always have a full cache before handling merges"),q(ac(t.viewCache_),"Missing event cache, even though we have a server cache"));const o=t.viewCache_,l=pT(t.processor_,o,e,n,s);return mT(t.processor_,l.viewCache),q(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=l.viewCache,E1(t,l.changes,l.viewCache.eventCache.getNode(),null)}function jT(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(tt,(l,u)=>{s.push(fi(l,u))}),n.isFullyInitialized()&&s.push(g1(n.getNode())),E1(t,s,n.getNode(),e)}function E1(t,e,n,s){const o=s?[s]:t.eventRegistrations_;return Kk(t.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc;class k1{constructor(){this.views=new Map}}function ET(t){q(!dc,"__referenceConstructor has already been defined"),dc=t}function kT(){return q(dc,"Reference.ts has not been loaded"),dc}function TT(t){return t.views.size===0}function om(t,e,n,s){const o=e.source.queryId;if(o!==null){const l=t.views.get(o);return q(l!=null,"SyncTree gave us an op for an invalid query."),ly(l,e,n,s)}else{let l=[];for(const u of t.views.values())l=l.concat(ly(u,e,n,s));return l}}function T1(t,e,n,s,o){const l=e._queryIdentifier,u=t.views.get(l);if(!u){let h=lc(n,o?s:null),d=!1;h?d=!0:s instanceof he?(h=sm(n,s),d=!1):(h=he.EMPTY_NODE,d=!1);const m=Lc(new Fs(h,d,!1),new Fs(s,o,!1));return new _T(e,m)}return u}function PT(t,e,n,s,o,l){const u=T1(t,e,s,o,l);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,u),ST(u,n),jT(u,n)}function IT(t,e,n,s){const o=e._queryIdentifier,l=[];let u=[];const h=Bs(t);if(o==="default")for(const[d,m]of t.views.entries())u=u.concat(ay(m,n,s)),oy(m)&&(t.views.delete(d),m.query._queryParams.loadsAllData()||l.push(m.query));else{const d=t.views.get(o);d&&(u=u.concat(ay(d,n,s)),oy(d)&&(t.views.delete(o),d.query._queryParams.loadsAllData()||l.push(d.query)))}return h&&!Bs(t)&&l.push(new(kT())(e._repo,e._path)),{removed:l,events:u}}function P1(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ms(t,e){let n=null;for(const s of t.views.values())n=n||CT(s,e);return n}function I1(t,e){if(e._queryParams.loadsAllData())return Bc(t);{const s=e._queryIdentifier;return t.views.get(s)}}function R1(t,e){return I1(t,e)!=null}function Bs(t){return Bc(t)!=null}function Bc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc;function RT(t){q(!hc,"__referenceConstructor has already been defined"),hc=t}function AT(){return q(hc,"Reference.ts has not been loaded"),hc}let DT=1;class cy{constructor(e){this.listenProvider_=e,this.syncPointTree_=new He(null),this.pendingWriteTree_=cT(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function A1(t,e,n,s,o){return Zk(t.pendingWriteTree_,e,n,s,o),o?da(t,new gr(y1(),e,n)):[]}function ur(t,e,n=!1){const s=Jk(t.pendingWriteTree_,e);if(eT(t.pendingWriteTree_,e)){let l=new He(null);return s.snap!=null?l=l.set(Pe(),!0):Vt(s.children,u=>{l=l.set(new Le(u),!0)}),da(t,new oc(s.path,l,n))}else return[]}function ua(t,e,n){return da(t,new gr(tm(),e,n))}function MT(t,e,n){const s=He.fromObject(n);return da(t,new Go(tm(),e,s))}function OT(t,e){return da(t,new Ho(tm(),e))}function LT(t,e,n){const s=lm(t,n);if(s){const o=cm(s),l=o.path,u=o.queryId,h=Pt(l,e),d=new Ho(nm(u),h);return um(t,l,d)}else return[]}function fc(t,e,n,s,o=!1){const l=e._path,u=t.syncPointTree_.get(l);let h=[];if(u&&(e._queryIdentifier==="default"||R1(u,e))){const d=IT(u,e,n,s);TT(u)&&(t.syncPointTree_=t.syncPointTree_.remove(l));const m=d.removed;if(h=d.events,!o){const p=m.findIndex(y=>y._queryParams.loadsAllData())!==-1,g=t.syncPointTree_.findOnPath(l,(y,w)=>Bs(w));if(p&&!g){const y=t.syncPointTree_.subtree(l);if(!y.isEmpty()){const w=zT(y);for(let _=0;_<w.length;++_){const C=w[_],S=C.query,T=L1(t,C);t.listenProvider_.startListening(To(S),Yo(t,S),T.hashFn,T.onComplete)}}}!g&&m.length>0&&!s&&(p?t.listenProvider_.stopListening(To(e),null):m.forEach(y=>{const w=t.queryToTagMap.get(zc(y));t.listenProvider_.stopListening(To(y),w)}))}VT(t,m)}return h}function D1(t,e,n,s){const o=lm(t,s);if(o!=null){const l=cm(o),u=l.path,h=l.queryId,d=Pt(u,e),m=new gr(nm(h),d,n);return um(t,u,m)}else return[]}function FT(t,e,n,s){const o=lm(t,s);if(o){const l=cm(o),u=l.path,h=l.queryId,d=Pt(u,e),m=He.fromObject(n),p=new Go(nm(h),d,m);return um(t,u,p)}else return[]}function of(t,e,n,s=!1){const o=e._path;let l=null,u=!1;t.syncPointTree_.foreachOnPath(o,(y,w)=>{const _=Pt(y,o);l=l||Ms(w,_),u=u||Bs(w)});let h=t.syncPointTree_.get(o);h?(u=u||Bs(h),l=l||Ms(h,Pe())):(h=new k1,t.syncPointTree_=t.syncPointTree_.set(o,h));let d;l!=null?d=!0:(d=!1,l=he.EMPTY_NODE,t.syncPointTree_.subtree(o).foreachChild((w,_)=>{const C=Ms(_,Pe());C&&(l=l.updateImmediateChild(w,C))}));const m=R1(h,e);if(!m&&!e._queryParams.loadsAllData()){const y=zc(e);q(!t.queryToTagMap.has(y),"View does not exist, but we have a tag");const w=UT();t.queryToTagMap.set(y,w),t.tagToQueryMap.set(w,y)}const p=Fc(t.pendingWriteTree_,o);let g=PT(h,e,n,p,l,d);if(!m&&!u&&!s){const y=I1(h,e);g=g.concat(WT(t,e,y))}return g}function am(t,e,n){const o=t.pendingWriteTree_,l=t.syncPointTree_.findOnPath(e,(u,h)=>{const d=Pt(u,e),m=Ms(h,d);if(m)return m});return b1(o,e,l,n,!0)}function BT(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(m,p)=>{const g=Pt(m,n);s=s||Ms(p,g)});let o=t.syncPointTree_.get(n);o?s=s||Ms(o,Pe()):(o=new k1,t.syncPointTree_=t.syncPointTree_.set(n,o));const l=s!=null,u=l?new Fs(s,!0,!1):null,h=Fc(t.pendingWriteTree_,e._path),d=T1(o,e,h,l?u.getNode():he.EMPTY_NODE,l);return NT(d)}function da(t,e){return M1(e,t.syncPointTree_,null,Fc(t.pendingWriteTree_,Pe()))}function M1(t,e,n,s){if(Ne(t.path))return O1(t,e,n,s);{const o=e.get(Pe());n==null&&o!=null&&(n=Ms(o,Pe()));let l=[];const u=we(t.path),h=t.operationForChild(u),d=e.children.get(u);if(d&&h){const m=n?n.getImmediateChild(u):null,p=N1(s,u);l=l.concat(M1(h,d,m,p))}return o&&(l=l.concat(om(o,t,s,n))),l}}function O1(t,e,n,s){const o=e.get(Pe());n==null&&o!=null&&(n=Ms(o,Pe()));let l=[];return e.children.inorderTraversal((u,h)=>{const d=n?n.getImmediateChild(u):null,m=N1(s,u),p=t.operationForChild(u);p&&(l=l.concat(O1(p,h,d,m)))}),o&&(l=l.concat(om(o,t,s,n))),l}function L1(t,e){const n=e.query,s=Yo(t,n);return{hashFn:()=>(bT(e)||he.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return s?LT(t,n._path,s):OT(t,n._path);{const l=BE(o,n);return fc(t,n,null,l)}}}}function Yo(t,e){const n=zc(e);return t.queryToTagMap.get(n)}function zc(t){return t._path.toString()+"$"+t._queryIdentifier}function lm(t,e){return t.tagToQueryMap.get(e)}function cm(t){const e=t.indexOf("$");return q(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Le(t.substr(0,e))}}function um(t,e,n){const s=t.syncPointTree_.get(e);q(s,"Missing sync point for query tag that we're tracking");const o=Fc(t.pendingWriteTree_,e);return om(s,n,o,null)}function zT(t){return t.fold((e,n,s)=>{if(n&&Bs(n))return[Bc(n)];{let o=[];return n&&(o=P1(n)),Vt(s,(l,u)=>{o=o.concat(u)}),o}})}function To(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(AT())(t._repo,t._path):t}function VT(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const o=zc(s),l=t.queryToTagMap.get(o);t.queryToTagMap.delete(o),t.tagToQueryMap.delete(l)}}}function UT(){return DT++}function WT(t,e,n){const s=e._path,o=Yo(t,e),l=L1(t,n),u=t.listenProvider_.startListening(To(e),o,l.hashFn,l.onComplete),h=t.syncPointTree_.subtree(s);if(o)q(!Bs(h.value),"If we're adding a query, it shouldn't be shadowed");else{const d=h.fold((m,p,g)=>{if(!Ne(m)&&p&&Bs(p))return[Bc(p).query];{let y=[];return p&&(y=y.concat(P1(p).map(w=>w.query))),Vt(g,(w,_)=>{y=y.concat(_)}),y}});for(let m=0;m<d.length;++m){const p=d[m];t.listenProvider_.stopListening(To(p),Yo(t,p))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new dm(n)}node(){return this.node_}}class hm{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=dt(this.path_,e);return new hm(this.syncTree_,n)}node(){return am(this.syncTree_,this.path_)}}const $T=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},uy=function(t,e,n){if(!t||typeof t!="object")return t;if(q(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return HT(t[".sv"],e,n);if(typeof t[".sv"]=="object")return GT(t[".sv"],e);q(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},HT=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:q(!1,"Unexpected server value: "+t)}},GT=function(t,e,n){t.hasOwnProperty("increment")||q(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&q(!1,"Unexpected increment value: "+s);const o=e.node();if(q(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return s;const u=o.getValue();return typeof u!="number"?s:u+s},YT=function(t,e,n,s){return fm(e,new hm(n,t),s)},F1=function(t,e,n){return fm(t,new dm(e),n)};function fm(t,e,n){const s=t.getPriority().val(),o=uy(s,e.getImmediateChild(".priority"),n);let l;if(t.isLeafNode()){const u=t,h=uy(u.getValue(),e,n);return h!==u.getValue()||o!==u.getPriority().val()?new pt(h,xt(o)):t}else{const u=t;return l=u,o!==u.getPriority().val()&&(l=l.updatePriority(new pt(o))),u.forEachChild(tt,(h,d)=>{const m=fm(d,e.getImmediateChild(h),n);m!==d&&(l=l.updateImmediateChild(h,m))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function pm(t,e){let n=e instanceof Le?e:new Le(e),s=t,o=we(n);for(;o!==null;){const l=ui(s.node.children,o)||{children:{},childCount:0};s=new mm(o,s,l),n=Ve(n),o=we(n)}return s}function Ni(t){return t.node.value}function B1(t,e){t.node.value=e,af(t)}function z1(t){return t.node.childCount>0}function KT(t){return Ni(t)===void 0&&!z1(t)}function Vc(t,e){Vt(t.node.children,(n,s)=>{e(new mm(n,t,s))})}function V1(t,e,n,s){n&&e(t),Vc(t,o=>{V1(o,e,!0)})}function qT(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function ha(t){return new Le(t.parent===null?t.name:ha(t.parent)+"/"+t.name)}function af(t){t.parent!==null&&QT(t.parent,t.name,t)}function QT(t,e,n){const s=KT(n),o=ss(t.node.children,e);s&&o?(delete t.node.children[e],t.node.childCount--,af(t)):!s&&!o&&(t.node.children[e]=n.node,t.node.childCount++,af(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=/[\[\].#$\/\u0000-\u001F\u007F]/,ZT=/[\[\].#$\u0000-\u001F\u007F]/,ph=10*1024*1024,U1=function(t){return typeof t=="string"&&t.length!==0&&!XT.test(t)},W1=function(t){return typeof t=="string"&&t.length!==0&&!ZT.test(t)},JT=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),W1(t)},eP=function(t,e,n,s){gm($f(t,"value"),e,n)},gm=function(t,e,n){const s=n instanceof Le?new yk(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+or(s));if(typeof e=="function")throw new Error(t+"contains a function "+or(s)+" with contents = "+e.toString());if(zw(e))throw new Error(t+"contains "+e.toString()+" "+or(s));if(typeof e=="string"&&e.length>ph/3&&Mc(e)>ph)throw new Error(t+"contains a string greater than "+ph+" utf8 bytes "+or(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,l=!1;if(Vt(e,(u,h)=>{if(u===".value")o=!0;else if(u!==".priority"&&u!==".sv"&&(l=!0,!U1(u)))throw new Error(t+" contains an invalid key ("+u+") "+or(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);vk(s,u),gm(t,h,s),wk(s)}),o&&l)throw new Error(t+' contains ".value" child '+or(s)+" in addition to actual children.")}},$1=function(t,e,n,s){if(!W1(n))throw new Error($f(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},tP=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),$1(t,e,n)},nP=function(t,e){if(we(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},sP=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!U1(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!JT(n))throw new Error($f(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function xm(t,e){let n=null;for(let s=0;s<e.length;s++){const o=e[s],l=o.getPath();n!==null&&!Qf(l,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:l}),n.events.push(o)}n&&t.eventLists_.push(n)}function H1(t,e,n){xm(t,n),G1(t,s=>Qf(s,e))}function Pn(t,e,n){xm(t,n),G1(t,s=>mn(s,e)||mn(e,s))}function G1(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const o=t.eventLists_[s];if(o){const l=o.path;e(l)?(iP(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function iP(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();So&&St("event: "+n.toString()),bi(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP="repo_interrupt",aP=25;class lP{constructor(e,n,s,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rP,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ic(),this.transactionQueueTree_=new mm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function cP(t,e,n){if(t.stats_=Kf(t.repoInfo_),t.forceRestClient_||WE())t.server_=new rc(t.repoInfo_,(s,o,l,u)=>{dy(t,s,o,l,u)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>hy(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ut(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new qn(t.repoInfo_,e,(s,o,l,u)=>{dy(t,s,o,l,u)},s=>{hy(t,s)},s=>{dP(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=KE(t.repoInfo_,()=>new Gk(t.stats_,t.server_)),t.infoData_=new Vk,t.infoSyncTree_=new cy({startListening:(s,o,l,u)=>{let h=[];const d=t.infoData_.getNode(s._path);return d.isEmpty()||(h=ua(t.infoSyncTree_,s._path,d),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),vm(t,"connected",!1),t.serverSyncTree_=new cy({startListening:(s,o,l,u)=>(t.server_.listen(s,l,o,(h,d)=>{const m=u(h,d);Pn(t.eventQueue_,s._path,m)}),[]),stopListening:(s,o)=>{t.server_.unlisten(s,o)}})}function uP(t){const n=t.infoData_.getNode(new Le(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ym(t){return $T({timestamp:uP(t)})}function dy(t,e,n,s,o){t.dataUpdateCount++;const l=new Le(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let u=[];if(o)if(s){const d=Jl(n,m=>xt(m));u=FT(t.serverSyncTree_,l,d,o)}else{const d=xt(n);u=D1(t.serverSyncTree_,l,d,o)}else if(s){const d=Jl(n,m=>xt(m));u=MT(t.serverSyncTree_,l,d)}else{const d=xt(n);u=ua(t.serverSyncTree_,l,d)}let h=l;u.length>0&&(h=Wc(t,l)),Pn(t.eventQueue_,h,u)}function hy(t,e){vm(t,"connected",e),e===!1&&mP(t)}function dP(t,e){Vt(e,(n,s)=>{vm(t,n,s)})}function vm(t,e,n){const s=new Le("/.info/"+e),o=xt(n);t.infoData_.updateSnapshot(s,o);const l=ua(t.infoSyncTree_,s,o);Pn(t.eventQueue_,s,l)}function Y1(t){return t.nextWriteId_++}function hP(t,e,n){const s=BT(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(o=>{const l=xt(o).withIndex(e._queryParams.getIndex());of(t.serverSyncTree_,e,n,!0);let u;if(e._queryParams.loadsAllData())u=ua(t.serverSyncTree_,e._path,l);else{const h=Yo(t.serverSyncTree_,e);u=D1(t.serverSyncTree_,e._path,l,h)}return Pn(t.eventQueue_,e._path,u),fc(t.serverSyncTree_,e,n,null,!0),l},o=>(Uc(t,"get for query "+ut(e)+" failed: "+o),Promise.reject(new Error(o))))}function fP(t,e,n,s,o){Uc(t,"set",{path:e.toString(),value:n,priority:s});const l=ym(t),u=xt(n,s),h=am(t.serverSyncTree_,e),d=F1(u,h,l),m=Y1(t),p=A1(t.serverSyncTree_,e,d,m,!0);xm(t.eventQueue_,p),t.server_.put(e.toString(),u.val(!0),(y,w)=>{const _=y==="ok";_||zt("set at "+e+" failed: "+y);const C=ur(t.serverSyncTree_,m,!_);Pn(t.eventQueue_,e,C),xP(t,o,y,w)});const g=Z1(t,e);Wc(t,g),Pn(t.eventQueue_,g,[])}function mP(t){Uc(t,"onDisconnectEvents");const e=ym(t),n=ic();ef(t.onDisconnect_,Pe(),(o,l)=>{const u=YT(o,l,t.serverSyncTree_,e);x1(n,o,u)});let s=[];ef(n,Pe(),(o,l)=>{s=s.concat(ua(t.serverSyncTree_,o,l));const u=Z1(t,o);Wc(t,u)}),t.onDisconnect_=ic(),Pn(t.eventQueue_,Pe(),s)}function pP(t,e,n){let s;we(e._path)===".info"?s=of(t.infoSyncTree_,e,n):s=of(t.serverSyncTree_,e,n),H1(t.eventQueue_,e._path,s)}function fy(t,e,n){let s;we(e._path)===".info"?s=fc(t.infoSyncTree_,e,n):s=fc(t.serverSyncTree_,e,n),H1(t.eventQueue_,e._path,s)}function gP(t){t.persistentConnection_&&t.persistentConnection_.interrupt(oP)}function Uc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),St(n,...e)}function xP(t,e,n,s){e&&bi(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let l=o;s&&(l+=": "+s);const u=new Error(l);u.code=o,e(u)}})}function K1(t,e,n){return am(t.serverSyncTree_,e,n)||he.EMPTY_NODE}function wm(t,e=t.transactionQueueTree_){if(e||$c(t,e),Ni(e)){const n=Q1(t,e);q(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&yP(t,ha(e),n)}else z1(e)&&Vc(e,n=>{wm(t,n)})}function yP(t,e,n){const s=n.map(m=>m.currentWriteId),o=K1(t,e,s);let l=o;const u=o.hash();for(let m=0;m<n.length;m++){const p=n[m];q(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const g=Pt(e,p.path);l=l.updateChild(g,p.currentOutputSnapshotRaw)}const h=l.val(!0),d=e;t.server_.put(d.toString(),h,m=>{Uc(t,"transaction put response",{path:d.toString(),status:m});let p=[];if(m==="ok"){const g=[];for(let y=0;y<n.length;y++)n[y].status=2,p=p.concat(ur(t.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&g.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();$c(t,pm(t.transactionQueueTree_,e)),wm(t,t.transactionQueueTree_),Pn(t.eventQueue_,e,p);for(let y=0;y<g.length;y++)bi(g[y])}else{if(m==="datastale")for(let g=0;g<n.length;g++)n[g].status===3?n[g].status=4:n[g].status=0;else{zt("transaction at "+d.toString()+" failed: "+m);for(let g=0;g<n.length;g++)n[g].status=4,n[g].abortReason=m}Wc(t,e)}},u)}function Wc(t,e){const n=q1(t,e),s=ha(n),o=Q1(t,n);return vP(t,o,s),s}function vP(t,e,n){if(e.length===0)return;const s=[];let o=[];const u=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const d=e[h],m=Pt(n,d.path);let p=!1,g;if(q(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)p=!0,g=d.abortReason,o=o.concat(ur(t.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=aP)p=!0,g="maxretry",o=o.concat(ur(t.serverSyncTree_,d.currentWriteId,!0));else{const y=K1(t,d.path,u);d.currentInputSnapshot=y;const w=e[h].update(y.val());if(w!==void 0){gm("transaction failed: Data returned ",w,d.path);let _=xt(w);typeof w=="object"&&w!=null&&ss(w,".priority")||(_=_.updatePriority(y.getPriority()));const S=d.currentWriteId,T=ym(t),N=F1(_,y,T);d.currentOutputSnapshotRaw=_,d.currentOutputSnapshotResolved=N,d.currentWriteId=Y1(t),u.splice(u.indexOf(S),1),o=o.concat(A1(t.serverSyncTree_,d.path,N,d.currentWriteId,d.applyLocally)),o=o.concat(ur(t.serverSyncTree_,S,!0))}else p=!0,g="nodata",o=o.concat(ur(t.serverSyncTree_,d.currentWriteId,!0))}Pn(t.eventQueue_,n,o),o=[],p&&(e[h].status=2,(function(y){setTimeout(y,Math.floor(0))})(e[h].unwatcher),e[h].onComplete&&(g==="nodata"?s.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):s.push(()=>e[h].onComplete(new Error(g),!1,null))))}$c(t,t.transactionQueueTree_);for(let h=0;h<s.length;h++)bi(s[h]);wm(t,t.transactionQueueTree_)}function q1(t,e){let n,s=t.transactionQueueTree_;for(n=we(e);n!==null&&Ni(s)===void 0;)s=pm(s,n),e=Ve(e),n=we(e);return s}function Q1(t,e){const n=[];return X1(t,e,n),n.sort((s,o)=>s.order-o.order),n}function X1(t,e,n){const s=Ni(e);if(s)for(let o=0;o<s.length;o++)n.push(s[o]);Vc(e,o=>{X1(t,o,n)})}function $c(t,e){const n=Ni(e);if(n){let s=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[s]=n[o],s++);n.length=s,B1(e,n.length>0?n:void 0)}Vc(e,s=>{$c(t,s)})}function Z1(t,e){const n=ha(q1(t,e)),s=pm(t.transactionQueueTree_,e);return qT(s,o=>{gh(t,o)}),gh(t,s),V1(s,o=>{gh(t,o)}),n}function gh(t,e){const n=Ni(e);if(n){const s=[];let o=[],l=-1;for(let u=0;u<n.length;u++)n[u].status===3||(n[u].status===1?(q(l===u-1,"All SENT items should be at beginning of queue."),l=u,n[u].status=3,n[u].abortReason="set"):(q(n[u].status===0,"Unexpected transaction status in abort"),n[u].unwatcher(),o=o.concat(ur(t.serverSyncTree_,n[u].currentWriteId,!0)),n[u].onComplete&&s.push(n[u].onComplete.bind(null,new Error("set"),!1,null))));l===-1?B1(e,void 0):n.length=l+1,Pn(t.eventQueue_,ha(e),o);for(let u=0;u<s.length;u++)bi(s[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let o=n[s];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function _P(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):zt(`Invalid query segment '${n}' in query '${t}'`)}return e}const my=function(t,e){const n=bP(t),s=n.namespace;n.domain==="firebase.com"&&Xn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Xn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||DE();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Zw(n.host,n.secure,s,o,e,"",s!==n.subdomain),path:new Le(n.pathString)}},bP=function(t){let e="",n="",s="",o="",l="",u=!0,h="https",d=443;if(typeof t=="string"){let m=t.indexOf("//");m>=0&&(h=t.substring(0,m-1),t=t.substring(m+2));let p=t.indexOf("/");p===-1&&(p=t.length);let g=t.indexOf("?");g===-1&&(g=t.length),e=t.substring(0,Math.min(p,g)),p<g&&(o=wP(t.substring(p,g)));const y=_P(t.substring(Math.min(t.length,g)));m=e.indexOf(":"),m>=0?(u=h==="https"||h==="wss",d=parseInt(e.substring(m+1),10)):m=e.length;const w=e.slice(0,m);if(w.toLowerCase()==="localhost")n="localhost";else if(w.split(".").length<=2)n=w;else{const _=e.indexOf(".");s=e.substring(0,_).toLowerCase(),n=e.substring(_+1),l=s}"ns"in y&&(l=y.ns)}return{host:e,port:d,domain:n,subdomain:s,secure:u,scheme:h,pathString:o,namespace:l}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,n,s,o){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ut(this.snapshot.exportVal())}}class CP{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n,s,o){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=o}get key(){return Ne(this._path)?null:a1(this._path)}get ref(){return new rs(this._repo,this._path)}get _queryIdentifier(){const e=Zx(this._queryParams),n=Gf(e);return n==="{}"?"default":n}get _queryObject(){return Zx(this._queryParams)}isEqual(e){if(e=br(e),!(e instanceof _m))return!1;const n=this._repo===e._repo,s=Qf(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&s&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+xk(this._path)}}class rs extends _m{constructor(e,n){super(e,n,new em,!1)}get parent(){const e=c1(this._path);return e===null?null:new rs(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ko{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Le(e),s=lf(this.ref,e);return new Ko(this._node.getChild(n),s,tt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,o)=>e(new Ko(o,lf(this.ref,s),tt)))}hasChild(e){const n=new Le(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function bo(t,e){return t=br(t),t._checkNotDeleted("ref"),e!==void 0?lf(t._root,e):t._root}function lf(t,e){return t=br(t),we(t._path)===null?tP("child","path",e):$1("child","path",e),new rs(t._repo,dt(t._path,e))}function zl(t,e){t=br(t),nP("set",t._path),eP("set",e,t._path);const n=new Dc;return fP(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function SP(t){t=br(t);const e=new J1(()=>{}),n=new Hc(e);return hP(t._repo,t,n).then(s=>new Ko(s,new rs(t._repo,t._path),t._queryParams.getIndex()))}class Hc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new NP("value",this,new Ko(e.snapshotNode,new rs(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new CP(this,e,n):null}matches(e){return e instanceof Hc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function jP(t,e,n,s,o){let l;if(typeof s=="object"&&(l=void 0,o=s),typeof s=="function"&&(l=s),o&&o.onlyOnce){const d=n,m=(p,g)=>{fy(t._repo,t,h),d(p,g)};m.userCallback=n.userCallback,m.context=n.context,n=m}const u=new J1(n,l||void 0),h=new Hc(u);return pP(t._repo,t,h),()=>fy(t._repo,t,h)}function py(t,e,n,s){return jP(t,"value",e,n,s)}ET(rs);RT(rs);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="FIREBASE_DATABASE_EMULATOR_HOST",cf={};let kP=!1;function TP(t,e,n,s){t.repoInfo_=new Zw(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),s&&(t.authTokenProvider_=s)}function PP(t,e,n,s,o){let l=s||t.options.databaseURL;l===void 0&&(t.options.projectId||Xn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),St("Using default host for project ",t.options.projectId),l=`${t.options.projectId}-default-rtdb.firebaseio.com`);let u=my(l,o),h=u.repoInfo,d;typeof process<"u"&&Dx&&(d=Dx[EP]),d?(l=`http://${d}?ns=${h.namespace}`,u=my(l,o),h=u.repoInfo):u.repoInfo.secure;const m=new HE(t.name,t.options,e);sP("Invalid Firebase Database URL",u),Ne(u.path)||Xn("Database URL must point to the root of a Firebase Database (not including a child path).");const p=RP(h,t,m,new $E(t.name,n));return new AP(p,t)}function IP(t,e){const n=cf[e];(!n||n[t.key]!==t)&&Xn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),gP(t),delete n[t.key]}function RP(t,e,n,s){let o=cf[e.name];o||(o={},cf[e.name]=o);let l=o[t.toURLString()];return l&&Xn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new lP(t,kP,n,s),o[t.toURLString()]=l,l}class AP{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(cP(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new rs(this._repo,Pe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(IP(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Xn("Cannot call "+e+" on a deleted database.")}}function DP(t=Dw(),e){const n=Iw(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=bw("database");s&&MP(n,...s)}return n}function MP(t,e,n,s={}){t=br(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Xn("Cannot call useEmulator() after instance has already been initialized.");const o=t._repoInternal;let l;if(o.repoInfo_.nodeAdmin)s.mockUserToken&&Xn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Bl(Bl.OWNER);else if(s.mockUserToken){const u=typeof s.mockUserToken=="string"?s.mockUserToken:Cw(s.mockUserToken,t.app.options.projectId);l=new Bl(u)}TP(o,e,n,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t){kE(Rw),Bo(new di("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return PP(s,o,l,n)},"PUBLIC").setMultipleInstances(!0)),As(Mx,Ox,t),As(Mx,Ox,"esm2017")}qn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};qn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};OP();var LP="firebase",FP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As(LP,FP,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="firebasestorage.googleapis.com",BP="storageBucket",zP=120*1e3,VP=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln extends wi{constructor(e,n,s=0){super(xh(e),`Firebase Storage: ${n} (${xh(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ln.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var In;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(In||(In={}));function xh(t){return"storage/"+t}function UP(){const t="An unknown error occurred, please check the error payload for server response.";return new Ln(In.UNKNOWN,t)}function WP(){return new Ln(In.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $P(){return new Ln(In.CANCELED,"User canceled the upload/download.")}function HP(t){return new Ln(In.INVALID_URL,"Invalid URL '"+t+"'.")}function GP(t){return new Ln(In.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function gy(t){return new Ln(In.INVALID_ARGUMENT,t)}function t_(){return new Ln(In.APP_DELETED,"The Firebase app was deleted.")}function YP(t){return new Ln(In.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=gn.makeFromUrl(e,n)}catch{return new gn(e,"")}if(s.path==="")return s;throw GP(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function l(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+o+u,"i"),d={bucket:1,path:3};function m(D){D.path_=decodeURIComponent(D.path)}const p="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",w=new RegExp(`^https?://${g}/${p}/b/${o}/o${y}`,"i"),_={bucket:1,path:3},C=n===e_?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",T=new RegExp(`^https?://${C}/${o}/${S}`,"i"),j=[{regex:h,indices:d,postModify:l},{regex:w,indices:_,postModify:m},{regex:T,indices:{bucket:1,path:2},postModify:m}];for(let D=0;D<j.length;D++){const L=j[D],W=L.regex.exec(e);if(W){const z=W[L.indices.bucket];let F=W[L.indices.path];F||(F=""),s=new gn(z,F),L.postModify(s);break}}if(s==null)throw HP(e);return s}}class KP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t,e,n){let s=1,o=null,l=null,u=!1,h=0;function d(){return h===2}let m=!1;function p(...S){m||(m=!0,e.apply(null,S))}function g(S){o=setTimeout(()=>{o=null,t(w,d())},S)}function y(){l&&clearTimeout(l)}function w(S,...T){if(m){y();return}if(S){y(),p.call(null,S,...T);return}if(d()||u){y(),p.call(null,S,...T);return}s<64&&(s*=2);let j;h===1?(h=2,j=0):j=(s+Math.random())*1e3,g(j)}let _=!1;function C(S){_||(_=!0,y(),!m&&(o!==null?(S||(h=2),clearTimeout(o),g(0)):S||(h=1)))}return g(0),l=setTimeout(()=>{u=!0,C(!0)},n),C}function QP(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t){return t!==void 0}function xy(t,e,n,s){if(s<e)throw gy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw gy(`Invalid value for '${t}'. Expected ${n} or less.`)}function ZP(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const o=e(s)+"="+e(t[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var mc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(mc||(mc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(t,e){const n=t>=500&&t<600,o=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return n||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,n,s,o,l,u,h,d,m,p,g,y=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=d,this.timeout_=m,this.progressCallback_=p,this.connectionFactory_=g,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,_)=>{this.resolve_=w,this.reject_=_,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new Il(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=h=>{const d=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,m)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const h=l.getErrorCode()===mc.NO_ERROR,d=l.getStatus();if(!h||JP(d,this.additionalRetryCodes_)&&this.retry){const p=l.getErrorCode()===mc.ABORT;s(!1,new Il(!1,null,p));return}const m=this.successCodes_.indexOf(d)!==-1;s(!0,new Il(m,l))})},n=(s,o)=>{const l=this.resolve_,u=this.reject_,h=o.connection;if(o.wasSuccessCode)try{const d=this.callback_(h,h.getResponse());XP(d)?l(d):l()}catch(d){u(d)}else if(h!==null){const d=UP();d.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,d)):u(d)}else if(o.canceled){const d=this.appDelete_?t_():$P();u(d)}else{const d=WP();u(d)}};this.canceled_?n(!1,new Il(!1,null,!0)):this.backoffId_=qP(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&QP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Il{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function t4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function n4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function s4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function r4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function i4(t,e,n,s,o,l,u=!0){const h=ZP(t.urlParams),d=t.url+h,m=Object.assign({},t.headers);return s4(m,e),t4(m,n),n4(m,l),r4(m,s),new e4(d,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,o,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function a4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this._service=e,n instanceof gn?this._location=n:this._location=gn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new pc(e,n)}get root(){const e=new gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return a4(this._location.path)}get storage(){return this._service}get parent(){const e=o4(this._location.path);if(e===null)return null;const n=new gn(this._location.bucket,e);return new pc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw YP(e)}}function yy(t,e){const n=e==null?void 0:e[BP];return n==null?null:gn.makeFromBucketSpec(n,t)}function l4(t,e,n,s={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:o}=s;o&&(t._overrideAuthToken=typeof o=="string"?o:Cw(o,t.app.options.projectId))}class c4{constructor(e,n,s,o,l){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=l,this._bucket=null,this._host=e_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zP,this._maxUploadRetryTime=VP,this._requests=new Set,o!=null?this._bucket=gn.makeFromBucketSpec(o,this._host):this._bucket=yy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=gn.makeFromBucketSpec(this._url,e):this._bucket=yy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pc(this,e)}_makeRequest(e,n,s,o,l=!0){if(this._deleted)return new KP(t_());{const u=i4(e,this._appId,s,o,n,this._firebaseVersion,l);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const vy="@firebase/storage",wy="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="storage";function u4(t=Dw(),e){t=br(t);const s=Iw(t,n_).getImmediate({identifier:e}),o=bw("storage");return o&&d4(s,...o),s}function d4(t,e,n,s={}){l4(t,e,n,s)}function h4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new c4(n,s,o,e,Rw)}function f4(){Bo(new di(n_,h4,"PUBLIC").setMultipleInstances(!0)),As(vy,wy,""),As(vy,wy,"esm2017")}f4();const m4={apiKey:"AIzaSyD3igZadwYVhXW9sjWex60dTKhWS_KQ5oo",authDomain:"couch-buddies.firebaseapp.com",databaseURL:"https://couch-buddies-default-rtdb.firebaseio.com",projectId:"couch-buddies",storageBucket:"couch-buddies.firebasestorage.app",messagingSenderId:"514995835203",appId:"1:514995835203:web:d75673f2c40a709a1c1ff6"},s_=Aw(m4),No=DP(s_);u4(s_);const uf=[{id:"prod-1",name:"CBD Gummy Bears",description:"Our signature CBD gummy bears. 25mg broad-spectrum CBD per gummy. Delicious mixed fruit flavors  strawberry, orange, grape & lemon. Lab-tested, THC-free. 30 count jar.",price:34.99,category:"CBD Gummies",sizes:["30ct","60ct","90ct"],colors:["Mixed Fruit","Tropical","Berry Blast"],stock:150,featured:!0,images:["https://images.unsplash.com/photo-1582058091505-f87a2e55a40f?w=600&h=600&fit=crop"],createdAt:"2026-01-15T00:00:00Z"},{id:"prod-2",name:"Sour CBD Worms",description:"Tangy, sour, and packed with 30mg CBD each. These sour worms come in neon rainbow colors with a sugar-coated crunch. Perfect for on-the-go wellness. 20 count pouch.",price:29.99,category:"CBD Gummies",sizes:["20ct","40ct"],colors:["Rainbow","Watermelon","Blue Raspberry"],stock:200,featured:!0,images:["https://images.unsplash.com/photo-1581798459219-318e76aecc7b?w=600&h=600&fit=crop"],createdAt:"2026-01-15T00:00:00Z"},{id:"prod-3",name:"Honey Lavender CBD Drops",description:"Premium CBD tincture infused with organic honey and calming lavender. 1000mg full-spectrum CBD per bottle. Dropper included for precise dosing. Great for relaxation and sleep.",price:49.99,category:"Tinctures",sizes:["500mg","1000mg","2000mg"],colors:["Honey Lavender","Peppermint","Natural"],stock:80,featured:!0,images:["https://images.unsplash.com/photo-1611070042580-e707a0c6ff26?w=600&h=600&fit=crop"],createdAt:"2026-01-20T00:00:00Z"},{id:"prod-4",name:"Candy Coated Chocolates",description:"Bite-sized candy-coated chocolate drops infused with 10mg CBD each. Creamy milk chocolate center with a colorful candy shell. Resealable pouch, 25 pieces.",price:24.99,category:"Chocolates",sizes:["25ct","50ct"],colors:["Milk Chocolate","Dark Chocolate","White Chocolate"],stock:120,featured:!1,images:["https://images.unsplash.com/photo-1548741487-18d363dc4469?w=600&h=600&fit=crop"],createdAt:"2026-01-25T00:00:00Z"},{id:"prod-5",name:"Peach Ring Gummies",description:"Classic peach ring shapes infused with 20mg CBD per piece. Sweet, peachy perfection with a chewy texture. Vegan and gluten-free. 30 count jar.",price:32.99,category:"CBD Gummies",sizes:["30ct","60ct"],colors:["Peach","Mango","Strawberry"],stock:90,featured:!0,images:["https://images.unsplash.com/photo-1528825871115-3581a5e31082?w=600&h=600&fit=crop"],createdAt:"2026-02-01T00:00:00Z"},{id:"prod-6",name:"CBD Lollipops",description:"Handcrafted artisan lollipops with 25mg CBD each. Made with organic cane sugar and natural flavors. Individually wrapped. Assorted fruit flavors. 10-pack.",price:19.99,category:"Hard Candy",sizes:["10-pack","20-pack"],colors:["Cherry","Green Apple","Watermelon","Grape"],stock:250,featured:!1,images:["https://images.unsplash.com/photo-1558618666-fcd25c85f82e?w=600&h=600&fit=crop"],createdAt:"2026-02-01T00:00:00Z"},{id:"prod-7",name:"Mega Sour Belts Variety Box",description:"Limited edition variety box of our best-selling sour belts. Includes strawberry, blue raspberry, green apple, and watermelon. Infused with 15mg CBD each. 40 belts per box.",price:44.99,category:"CBD Gummies",sizes:["40ct Box","80ct Box"],colors:["Variety Pack","All Strawberry","All Blue Raspberry"],stock:45,featured:!0,images:["https://images.unsplash.com/photo-1567401893414-76b7b1e5a7a5?w=600&h=600&fit=crop"],createdAt:"2026-02-05T00:00:00Z"},{id:"prod-8",name:"CBD Herbal Tea Sampler",description:"A curated collection of 6 herbal tea blends, each infused with 15mg CBD. Chamomile, peppermint, hibiscus, lemon ginger, turmeric chai, and berry rooibos. 18 sachets total.",price:27.99,category:"Beverages",sizes:["18 Sachets","36 Sachets"],colors:["Classic Sampler","Calming Blends","Energy Blends"],stock:160,featured:!1,images:["https://images.unsplash.com/photo-1556679343-c7306c1976bc?w=600&h=600&fit=crop"],createdAt:"2026-02-08T00:00:00Z"}],df=[{id:"staff-1",name:"Alex Rivera",email:"alex@couchbuddies.com",phone:"555-0101",role:"onsite",pin:"1111",clockedIn:!1,clockType:null,clockHistory:[],wallet:{balance:250,transactions:[{id:"wt1",type:"payment",amount:250,note:"Weekly pay",from:"Owner Treasury",time:"2026-02-07T17:00:00Z"}]},location:null,avatar:"AR",createdAt:"2026-01-01T00:00:00Z"},{id:"staff-2",name:"Jordan Lee",email:"jordan@couchbuddies.com",phone:"555-0102",role:"delivery",pin:"2222",clockedIn:!1,clockType:null,clockHistory:[],wallet:{balance:180,transactions:[{id:"wt2",type:"payment",amount:180,note:"Weekly pay",from:"Owner Treasury",time:"2026-02-07T17:00:00Z"}]},location:null,avatar:"JL",createdAt:"2026-01-01T00:00:00Z"},{id:"staff-3",name:"Sam Chen",email:"sam@couchbuddies.com",phone:"555-0103",role:"delivery",pin:"3333",clockedIn:!1,clockType:null,clockHistory:[],wallet:{balance:320,transactions:[{id:"wt3",type:"payment",amount:320,note:"Weekly pay + tips",from:"Owner Treasury",time:"2026-02-07T17:00:00Z"}]},location:null,avatar:"SC",createdAt:"2026-01-05T00:00:00Z"},{id:"staff-4",name:"Maya Patel",email:"maya@couchbuddies.com",phone:"555-0104",role:"onsite",pin:"4444",clockedIn:!1,clockType:null,clockHistory:[],wallet:{balance:200,transactions:[{id:"wt4",type:"payment",amount:200,note:"Weekly pay",from:"Owner Treasury",time:"2026-02-07T17:00:00Z"}]},location:null,avatar:"MP",createdAt:"2026-01-10T00:00:00Z"}],en=()=>Math.random().toString(36).substr(2,9)+Date.now().toString(36),Ie=GS(ZS((t,e)=>({_firebaseReady:!1,ownerProfile:{id:"owner-1",name:"Owner",email:"owner@couchbuddies.com",phone:"",businessName:"Couch Buddies",businessAddress:"",pin:"1234",avatar:"CB",createdAt:"2026-01-01T00:00:00Z"},updateOwnerProfile:n=>t(s=>{const o={...s.ownerProfile,...n};n.name&&(o.avatar=n.name.split(" ").map(u=>u[0]).join("").toUpperCase().slice(0,2)||"CB");const l=s.userRole==="owner"&&s.currentUser?{...s.currentUser,name:o.name,email:o.email,phone:o.phone}:s.currentUser;return{ownerProfile:o,currentUser:l}}),currentUser:null,userRole:null,loginAsCustomer:n=>t({currentUser:n,userRole:"customer"}),loginAsGuest:()=>t({currentUser:{id:"guest-"+en(),name:"Guest",email:"",isGuest:!0},userRole:"customer"}),loginAsOwner:n=>{const s=e().ownerProfile;return n===(s.pin||"1234")?(t({currentUser:{id:s.id||"owner-1",name:s.name||"Owner",email:s.email||"owner@couchbuddies.com",phone:s.phone||"",role:"owner"},userRole:"owner"}),!0):!1},loginAsStaff:(n,s)=>{const o=e().staff.find(l=>l.id===n);return o&&(s==="0000"||s===o.pin)?(t({currentUser:{...o},userRole:"staff"}),!0):!1},logout:()=>t({currentUser:null,userRole:null}),products:uf,addProduct:n=>t(s=>({products:[...s.products,{...n,id:en(),createdAt:new Date().toISOString()}]})),updateProduct:(n,s)=>t(o=>({products:o.products.map(l=>l.id===n?{...l,...s}:l)})),deleteProduct:n=>t(s=>({products:s.products.filter(o=>o.id!==n)})),cart:[],addToCart:(n,s=1,o="M",l="")=>t(u=>{var d;return u.cart.find(m=>m.productId===n.id&&m.size===o&&m.color===l)?{cart:u.cart.map(m=>m.productId===n.id&&m.size===o&&m.color===l?{...m,quantity:m.quantity+s}:m)}:{cart:[...u.cart,{id:en(),productId:n.id,name:n.name,price:n.price,image:((d=n.images)==null?void 0:d[0])||n.image,quantity:s,size:o,color:l}]}}),updateCartItem:(n,s)=>t(o=>({cart:s<=0?o.cart.filter(l=>l.id!==n):o.cart.map(l=>l.id===n?{...l,quantity:s}:l)})),removeFromCart:n=>t(s=>({cart:s.cart.filter(o=>o.id!==n)})),clearCart:()=>t({cart:[]}),orders:[],createOrder:n=>{const s={id:"ORD-"+en().toUpperCase(),...n,status:"pending",createdAt:new Date().toISOString(),timeline:[{status:"pending",time:new Date().toISOString(),note:"Order placed"}]};return t(o=>({orders:[...o.orders,s],cart:[]})),s},updateOrderStatus:(n,s,o="")=>t(l=>({orders:l.orders.map(u=>u.id===n?{...u,status:s,timeline:[...u.timeline,{status:s,time:new Date().toISOString(),note:o}]}:u)})),assignDriver:(n,s)=>t(o=>({orders:o.orders.map(l=>{var u;return l.id===n?{...l,driverId:s,status:"assigned",timeline:[...l.timeline,{status:"assigned",time:new Date().toISOString(),note:`Assigned to driver ${((u=o.staff.find(h=>h.id===s))==null?void 0:u.name)||s}`}]}:l})})),staff:df,addStaff:n=>t(s=>({staff:[...s.staff,{id:en(),clockedIn:!1,clockHistory:[],wallet:{balance:0,transactions:[]},location:null,createdAt:new Date().toISOString(),...n,avatar:n.name?n.name.split(" ").map(o=>o[0]).join("").toUpperCase():"??"}]})),updateStaff:(n,s)=>t(o=>({staff:o.staff.map(l=>l.id===n?{...l,...s}:l)})),deleteStaff:n=>t(s=>({staff:s.staff.filter(o=>o.id!==n)})),clockIn:(n,s,o)=>t(l=>({staff:l.staff.map(u=>u.id===n?{...u,clockedIn:!0,clockType:s,location:o,clockHistory:[...u.clockHistory,{type:"clock-in",staffType:s,time:new Date().toISOString(),location:o}]}:u)})),clockOut:n=>t(s=>({staff:s.staff.map(o=>o.id===n?{...o,clockedIn:!1,clockType:null,location:null,clockHistory:[...o.clockHistory,{type:"clock-out",time:new Date().toISOString()}]}:o)})),updateStaffLocation:(n,s)=>t(o=>({staff:o.staff.map(l=>l.id===n?{...l,location:s}:l)})),payStaff:(n,s,o="")=>t(l=>{var h;const u={id:en(),type:"payment",amount:s,note:o,from:"Owner Treasury",time:new Date().toISOString()};return{staff:l.staff.map(d=>d.id===n?{...d,wallet:{balance:d.wallet.balance+s,transactions:[...d.wallet.transactions,u]}}:d),treasury:{...l.treasury,balance:l.treasury.balance-s,transactions:[...l.treasury.transactions,{...u,type:"staff-payment",to:((h=l.staff.find(d=>d.id===n))==null?void 0:h.name)||n}]}}}),treasury:{balance:5e4,accounts:[{id:"acc-1",name:"Business Checking",type:"bank",last4:"4521",connected:!0},{id:"acc-2",name:"Business Debit",type:"debit",last4:"8832",connected:!0}],transactions:[{id:"t1",type:"deposit",amount:5e4,note:"Initial funding",time:"2026-01-01T00:00:00Z",from:"Bank Transfer"}]},addTreasuryAccount:n=>t(s=>({treasury:{...s.treasury,accounts:[...s.treasury.accounts,{...n,id:en(),connected:!0}]}})),removeTreasuryAccount:n=>t(s=>({treasury:{...s.treasury,accounts:s.treasury.accounts.filter(o=>o.id!==n)}})),addTreasuryFunds:(n,s)=>t(o=>({treasury:{...o.treasury,balance:o.treasury.balance+n,transactions:[...o.treasury.transactions,{id:en(),type:"deposit",amount:n,note:s,time:new Date().toISOString(),from:"Manual Deposit"}]}})),messages:[{id:"m1",senderId:"staff-1",senderName:"Alex Rivera",text:"Good morning team! Store is open.",time:"2026-02-12T09:00:00Z",channel:"general"},{id:"m2",senderId:"staff-2",senderName:"Jordan Lee",text:"On my way for morning deliveries!",time:"2026-02-12T09:05:00Z",channel:"general"}],sendMessage:n=>t(s=>({messages:[...s.messages,{id:en(),...n,time:new Date().toISOString()}]})),inStoreSales:[],createInStoreSale:n=>{const s={id:"POS-"+en().toUpperCase(),...n,status:"pending",createdAt:new Date().toISOString()};return t(o=>({inStoreSales:[...o.inStoreSales,s]})),s},completeInStoreSale:n=>t(s=>{var o,l;return{inStoreSales:s.inStoreSales.map(u=>u.id===n?{...u,status:"completed"}:u),treasury:{...s.treasury,balance:s.treasury.balance+(((o=s.inStoreSales.find(u=>u.id===n))==null?void 0:o.total)||0),transactions:[...s.treasury.transactions,{id:en(),type:"sale",amount:((l=s.inStoreSales.find(u=>u.id===n))==null?void 0:l.total)||0,note:`In-store sale ${n}`,time:new Date().toISOString(),from:"In-Store POS"}]}}}),customers:[],registerCustomer:n=>t(s=>({customers:[...s.customers,{id:en(),...n,points:0,createdAt:new Date().toISOString()}]})),resetStore:()=>{const n={products:uf,staff:df,orders:[],messages:[],inStoreSales:[],customers:[],ownerProfile:{id:"owner-1",name:"Owner",email:"owner@couchbuddies.com",phone:"",businessName:"Couch Buddies",businessAddress:"",pin:"1234",avatar:"CB",createdAt:"2026-01-01T00:00:00Z"},treasury:{balance:5e4,accounts:[{id:"acc-1",name:"Business Checking",type:"bank",last4:"4521",connected:!0},{id:"acc-2",name:"Business Debit",type:"debit",last4:"8832",connected:!0}],transactions:[{id:"t1",type:"deposit",amount:5e4,note:"Initial funding",time:"2026-01-01T00:00:00Z",from:"Bank Transfer"}]}};zl(bo(No,"store"),JSON.parse(JSON.stringify(n))),t({...n,cart:[],currentUser:null,userRole:null})}}),{name:"couch-buddies-store",version:2,partialize:t=>({currentUser:t.currentUser,userRole:t.userRole,cart:t.cart}),migrate:(t,e)=>{if(e<2&&t)try{const n=["products","staff","orders","treasury","messages","inStoreSales","customers"],s={};let o=!1;for(const l of n)t[l]!==void 0&&(s[l]=t[l],o=!0);o&&localStorage.setItem("couch-buddies-v1-backup",JSON.stringify(s))}catch(n){console.warn("Failed to backup v1 state:",n)}return{currentUser:(t==null?void 0:t.currentUser)??null,userRole:(t==null?void 0:t.userRole)??null,cart:(t==null?void 0:t.cart)??[]}}}));var r_={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_y=Me.createContext&&Me.createContext(r_),p4=["attr","size","title"];function g4(t,e){if(t==null)return{};var n=x4(t,e),s,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(o=0;o<l.length;o++)s=l[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function x4(t,e){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function gc(){return gc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},gc.apply(this,arguments)}function by(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,s)}return n}function xc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?by(Object(n),!0).forEach(function(s){y4(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):by(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function y4(t,e,n){return e=v4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v4(t){var e=w4(t,"string");return typeof e=="symbol"?e:e+""}function w4(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function i_(t){return t&&t.map((e,n)=>Me.createElement(e.tag,xc({key:n},e.attr),i_(e.child)))}function de(t){return e=>Me.createElement(_4,gc({attr:xc({},t.attr)},e),i_(t.child))}function _4(t){var e=n=>{var{attr:s,size:o,title:l}=t,u=g4(t,p4),h=o||n.size||"1em",d;return n.className&&(d=n.className),t.className&&(d=(d?d+" ":"")+t.className),Me.createElement("svg",gc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,u,{className:d,style:xc(xc({color:t.color||n.color},n.style),t.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),l&&Me.createElement("title",null,l),t.children)};return _y!==void 0?Me.createElement(_y.Consumer,null,n=>e(n)):e(r_)}function b4(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function hf(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"17",y1:"7",x2:"7",y2:"17"},child:[]},{tag:"polyline",attr:{points:"17 17 7 17 7 7"},child:[]}]})(t)}function Gc(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function Vl(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(t)}function o_(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"},child:[]},{tag:"polyline",attr:{points:"7 7 17 7 17 17"},child:[]}]})(t)}function a_(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function N4(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(t)}function C4(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(t)}function Os(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function Kn(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function Ul(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(t)}function jt(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(t)}function S4(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(t)}function qo(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function j4(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function E4(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(t)}function k4(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function Yc(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function yh(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"4",y1:"9",x2:"20",y2:"9"},child:[]},{tag:"line",attr:{x1:"4",y1:"15",x2:"20",y2:"15"},child:[]},{tag:"line",attr:{x1:"10",y1:"3",x2:"8",y2:"21"},child:[]},{tag:"line",attr:{x1:"16",y1:"3",x2:"14",y2:"21"},child:[]}]})(t)}function l_(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"},child:[]}]})(t)}function Ny(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function Cy(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(t)}function c_(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"},child:[]}]})(t)}function u_(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(t)}function Qo(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(t)}function T4(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"},child:[]},{tag:"polyline",attr:{points:"10 17 15 12 10 7"},child:[]},{tag:"line",attr:{x1:"15",y1:"12",x2:"3",y2:"12"},child:[]}]})(t)}function bm(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function yc(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}function En(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function Nm(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(t)}function d_(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(t)}function Cm(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function P4(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"3 11 22 2 13 21 11 13 3 11"},child:[]}]})(t)}function yr(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function Xo(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(t)}function zs(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function Kc(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(t)}function qc(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function I4(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(t)}function R4(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function h_(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(t)}function fr(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"path",attr:{d:"M16 10a4 4 0 0 1-8 0"},child:[]}]})(t)}function Zo(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(t)}function A4(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"},child:[]}]})(t)}function Jo(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function D4(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(t)}function kn(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"3",width:"15",height:"13"},child:[]},{tag:"polygon",attr:{points:"16 8 20 8 23 11 23 16 16 16 16 8"},child:[]},{tag:"circle",attr:{cx:"5.5",cy:"18.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"18.5",cy:"18.5",r:"2.5"},child:[]}]})(t)}function Zn(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function Sm(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function Jn(t){return de({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}function Yt(){const[t,e]=k.useState(!1),{cart:n,currentUser:s,userRole:o,logout:l}=Ie(),u=On(),h=n.reduce((m,p)=>m+p.quantity,0),d=()=>{l(),u("/")};return a.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 glass border-b border-white/10",children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs(Ce,{to:"/",className:"flex items-center gap-2 group",children:[a.jsx("div",{className:"w-9 h-9 rounded-lg gradient-brand flex items-center justify-center font-bold text-sm",children:""}),a.jsx("span",{className:"font-display font-bold text-lg hidden sm:block group-hover:text-brand-400 transition-colors",children:"Couch Buddies"})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[a.jsx(Ce,{to:"/shop",className:"px-4 py-2 rounded-lg text-gray-300 hover:text-white hover:bg-white/10 transition-all text-sm font-medium",children:"Shop"}),s&&o==="customer"&&!s.isGuest&&a.jsxs(Ce,{to:"/orders",className:"px-4 py-2 rounded-lg text-gray-300 hover:text-white hover:bg-white/10 transition-all text-sm font-medium flex items-center gap-1.5",children:[a.jsx(yr,{size:15})," Orders"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Ce,{to:"/cart",className:"relative p-2.5 rounded-xl hover:bg-white/10 transition-all group",children:[a.jsx(Zo,{size:20,className:"text-gray-300 group-hover:text-white"}),h>0&&a.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 rounded-full bg-brand-500 text-white text-xs font-bold flex items-center justify-center",children:h})]}),s&&o==="customer"?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"hidden sm:block text-sm text-gray-400",children:s.isGuest?"Guest":s.name}),a.jsx("button",{onClick:d,className:"p-2.5 rounded-xl hover:bg-white/10 transition-all",title:"Sign out",children:a.jsx(bm,{size:18,className:"text-gray-400 hover:text-white"})})]}):a.jsxs(Ce,{to:"/auth",className:"flex items-center gap-1.5 px-3 py-2 rounded-xl text-sm font-medium text-gray-300 hover:text-white hover:bg-white/10 transition-all",children:[a.jsx(T4,{size:16})," Sign In"]}),a.jsx("button",{className:"md:hidden p-2 rounded-xl hover:bg-white/10 transition-all",onClick:()=>e(!t),children:t?a.jsx(Jn,{size:20}):a.jsx(Nm,{size:20})})]})]})}),t&&a.jsx("div",{className:"md:hidden border-t border-white/10 bg-surface-900/95 backdrop-blur-xl animate-slide-down",children:a.jsxs("div",{className:"px-4 py-3 space-y-1",children:[a.jsx(Ce,{to:"/shop",onClick:()=>e(!1),className:"block px-4 py-3 rounded-xl text-gray-300 hover:text-white hover:bg-white/10 transition-all font-medium",children:"Shop"}),s&&o==="customer"&&!s.isGuest&&a.jsx(Ce,{to:"/orders",onClick:()=>e(!1),className:"block px-4 py-3 rounded-xl text-gray-300 hover:text-white hover:bg-white/10 transition-all font-medium",children:"My Orders"})]})})]})}function Rn(){return a.jsx("footer",{className:"border-t border-white/10 bg-surface-950",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-12",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"w-9 h-9 rounded-lg gradient-brand flex items-center justify-center font-bold text-sm",children:""}),a.jsx("span",{className:"font-display font-bold text-lg",children:"Couch Buddies"})]}),a.jsx("p",{className:"text-gray-400 text-sm max-w-md leading-relaxed",children:"Sweet treats & CBD wellness goodies for the cozy crew. Handcrafted with love, lab-tested for quality, and delivered right to your door."})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-white mb-4",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx(Ce,{to:"/shop",className:"text-gray-400 hover:text-brand-400 text-sm transition-colors",children:"Shop All"})}),a.jsx("li",{children:a.jsx(Ce,{to:"/auth",className:"text-gray-400 hover:text-brand-400 text-sm transition-colors",children:"Sign In"})}),a.jsx("li",{children:a.jsx(Ce,{to:"/cart",className:"text-gray-400 hover:text-brand-400 text-sm transition-colors",children:"Cart"})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-white mb-4",children:"Portals"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx(Ce,{to:"/owner/login",className:"text-gray-400 hover:text-accent-400 text-sm transition-colors",children:"Owner Portal"})}),a.jsx("li",{children:a.jsx(Ce,{to:"/staff/login",className:"text-gray-400 hover:text-accent-400 text-sm transition-colors",children:"Staff Portal"})})]})]})]}),a.jsxs("div",{className:"mt-10 pt-6 border-t border-white/5 flex flex-col sm:flex-row items-center justify-between gap-4",children:[a.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",new Date().getFullYear()," Couch Buddies. All rights reserved."]}),a.jsxs("p",{className:"text-gray-500 text-xs flex items-center gap-1",children:["Made with ",a.jsx(l_,{size:12,className:"text-brand-400"})," and a whole lotta sugar"]})]})]})})}const jm=k.createContext({});function Em(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const f_=typeof window<"u",m_=f_?k.useLayoutEffect:k.useEffect,Qc=k.createContext(null);function km(t,e){t.indexOf(e)===-1&&t.push(e)}function vc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const An=(t,e,n)=>n>e?e:n<t?t:n;let Tm=()=>{};const es={},p_=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function g_(t){return typeof t=="object"&&t!==null}const x_=t=>/^0[^.\s]+$/u.test(t);function Pm(t){let e;return()=>(e===void 0&&(e=t()),e)}const nn=t=>t,M4=(t,e)=>n=>e(t(n)),fa=(...t)=>t.reduce(M4),ea=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class Im{constructor(){this.subscriptions=[]}add(e){return km(this.subscriptions,e),()=>vc(this.subscriptions,e)}notify(e,n,s){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,s);else for(let l=0;l<o;l++){const u=this.subscriptions[l];u&&u(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const yn=t=>t*1e3,tn=t=>t/1e3;function y_(t,e){return e?t*(1e3/e):0}const v_=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,O4=1e-7,L4=12;function F4(t,e,n,s,o){let l,u,h=0;do u=e+(n-e)/2,l=v_(u,s,o)-t,l>0?n=u:e=u;while(Math.abs(l)>O4&&++h<L4);return u}function ma(t,e,n,s){if(t===e&&n===s)return nn;const o=l=>F4(l,0,1,t,n);return l=>l===0||l===1?l:v_(o(l),e,s)}const w_=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,__=t=>e=>1-t(1-e),b_=ma(.33,1.53,.69,.99),Rm=__(b_),N_=w_(Rm),C_=t=>(t*=2)<1?.5*Rm(t):.5*(2-Math.pow(2,-10*(t-1))),Am=t=>1-Math.sin(Math.acos(t)),S_=__(Am),j_=w_(Am),B4=ma(.42,0,1,1),z4=ma(0,0,.58,1),E_=ma(.42,0,.58,1),V4=t=>Array.isArray(t)&&typeof t[0]!="number",k_=t=>Array.isArray(t)&&typeof t[0]=="number",U4={linear:nn,easeIn:B4,easeInOut:E_,easeOut:z4,circIn:Am,circInOut:j_,circOut:S_,backIn:Rm,backInOut:N_,backOut:b_,anticipate:C_},W4=t=>typeof t=="string",Sy=t=>{if(k_(t)){Tm(t.length===4);const[e,n,s,o]=t;return ma(e,n,s,o)}else if(W4(t))return U4[t];return t},Rl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function $4(t,e){let n=new Set,s=new Set,o=!1,l=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function d(p){u.has(p)&&(m.schedule(p),t()),p(h)}const m={schedule:(p,g=!1,y=!1)=>{const _=y&&o?n:s;return g&&u.add(p),_.has(p)||_.add(p),p},cancel:p=>{s.delete(p),u.delete(p)},process:p=>{if(h=p,o){l=!0;return}o=!0,[n,s]=[s,n],n.forEach(d),n.clear(),o=!1,l&&(l=!1,m.process(p))}};return m}const H4=40;function T_(t,e){let n=!1,s=!0;const o={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,u=Rl.reduce((j,D)=>(j[D]=$4(l),j),{}),{setup:h,read:d,resolveKeyframes:m,preUpdate:p,update:g,preRender:y,render:w,postRender:_}=u,C=()=>{const j=es.useManualTiming?o.timestamp:performance.now();n=!1,es.useManualTiming||(o.delta=s?1e3/60:Math.max(Math.min(j-o.timestamp,H4),1)),o.timestamp=j,o.isProcessing=!0,h.process(o),d.process(o),m.process(o),p.process(o),g.process(o),y.process(o),w.process(o),_.process(o),o.isProcessing=!1,n&&e&&(s=!1,t(C))},S=()=>{n=!0,s=!0,o.isProcessing||t(C)};return{schedule:Rl.reduce((j,D)=>{const L=u[D];return j[D]=(W,z=!1,F=!1)=>(n||S(),L.schedule(W,z,F)),j},{}),cancel:j=>{for(let D=0;D<Rl.length;D++)u[Rl[D]].cancel(j)},state:o,steps:u}}const{schedule:Ue,cancel:Vs,state:wt,steps:vh}=T_(typeof requestAnimationFrame<"u"?requestAnimationFrame:nn,!0);let Wl;function G4(){Wl=void 0}const It={now:()=>(Wl===void 0&&It.set(wt.isProcessing||es.useManualTiming?wt.timestamp:performance.now()),Wl),set:t=>{Wl=t,queueMicrotask(G4)}},P_=t=>e=>typeof e=="string"&&e.startsWith(t),I_=P_("--"),Y4=P_("var(--"),Dm=t=>Y4(t)?K4.test(t.split("/*")[0].trim()):!1,K4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function jy(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Ci={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ta={...Ci,transform:t=>An(0,1,t)},Al={...Ci,default:1},Po=t=>Math.round(t*1e5)/1e5,Mm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function q4(t){return t==null}const Q4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Om=(t,e)=>n=>!!(typeof n=="string"&&Q4.test(n)&&n.startsWith(t)||e&&!q4(n)&&Object.prototype.hasOwnProperty.call(n,e)),R_=(t,e,n)=>s=>{if(typeof s!="string")return s;const[o,l,u,h]=s.match(Mm);return{[t]:parseFloat(o),[e]:parseFloat(l),[n]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},X4=t=>An(0,255,t),wh={...Ci,transform:t=>Math.round(X4(t))},dr={test:Om("rgb","red"),parse:R_("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+wh.transform(t)+", "+wh.transform(e)+", "+wh.transform(n)+", "+Po(ta.transform(s))+")"};function Z4(t){let e="",n="",s="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,s+=s,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:o?parseInt(o,16)/255:1}}const ff={test:Om("#"),parse:Z4,transform:dr.transform},pa=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ss=pa("deg"),Tn=pa("%"),ne=pa("px"),J4=pa("vh"),eI=pa("vw"),Ey={...Tn,parse:t=>Tn.parse(t)/100,transform:t=>Tn.transform(t*100)},ei={test:Om("hsl","hue"),parse:R_("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Tn.transform(Po(e))+", "+Tn.transform(Po(n))+", "+Po(ta.transform(s))+")"},it={test:t=>dr.test(t)||ff.test(t)||ei.test(t),parse:t=>dr.test(t)?dr.parse(t):ei.test(t)?ei.parse(t):ff.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?dr.transform(t):ei.transform(t),getAnimatableNone:t=>{const e=it.parse(t);return e.alpha=0,it.transform(e)}},tI=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function nI(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Mm))==null?void 0:e.length)||0)+(((n=t.match(tI))==null?void 0:n.length)||0)>0}const A_="number",D_="color",sI="var",rI="var(",ky="${}",iI=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function na(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},o=[];let l=0;const h=e.replace(iI,d=>(it.test(d)?(s.color.push(l),o.push(D_),n.push(it.parse(d))):d.startsWith(rI)?(s.var.push(l),o.push(sI),n.push(d)):(s.number.push(l),o.push(A_),n.push(parseFloat(d))),++l,ky)).split(ky);return{values:n,split:h,indexes:s,types:o}}function M_(t){return na(t).values}function O_(t){const{split:e,types:n}=na(t),s=e.length;return o=>{let l="";for(let u=0;u<s;u++)if(l+=e[u],o[u]!==void 0){const h=n[u];h===A_?l+=Po(o[u]):h===D_?l+=it.transform(o[u]):l+=o[u]}return l}}const oI=t=>typeof t=="number"?0:it.test(t)?it.getAnimatableNone(t):t;function aI(t){const e=M_(t);return O_(t)(e.map(oI))}const Us={test:nI,parse:M_,createTransformer:O_,getAnimatableNone:aI};function _h(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function lI({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let o=0,l=0,u=0;if(!e)o=l=u=n;else{const h=n<.5?n*(1+e):n+e-n*e,d=2*n-h;o=_h(d,h,t+1/3),l=_h(d,h,t),u=_h(d,h,t-1/3)}return{red:Math.round(o*255),green:Math.round(l*255),blue:Math.round(u*255),alpha:s}}function wc(t,e){return n=>n>0?e:t}const Qe=(t,e,n)=>t+(e-t)*n,bh=(t,e,n)=>{const s=t*t,o=n*(e*e-s)+s;return o<0?0:Math.sqrt(o)},cI=[ff,dr,ei],uI=t=>cI.find(e=>e.test(t));function Ty(t){const e=uI(t);if(!e)return!1;let n=e.parse(t);return e===ei&&(n=lI(n)),n}const Py=(t,e)=>{const n=Ty(t),s=Ty(e);if(!n||!s)return wc(t,e);const o={...n};return l=>(o.red=bh(n.red,s.red,l),o.green=bh(n.green,s.green,l),o.blue=bh(n.blue,s.blue,l),o.alpha=Qe(n.alpha,s.alpha,l),dr.transform(o))},mf=new Set(["none","hidden"]);function dI(t,e){return mf.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function hI(t,e){return n=>Qe(t,e,n)}function Lm(t){return typeof t=="number"?hI:typeof t=="string"?Dm(t)?wc:it.test(t)?Py:pI:Array.isArray(t)?L_:typeof t=="object"?it.test(t)?Py:fI:wc}function L_(t,e){const n=[...t],s=n.length,o=t.map((l,u)=>Lm(l)(l,e[u]));return l=>{for(let u=0;u<s;u++)n[u]=o[u](l);return n}}function fI(t,e){const n={...t,...e},s={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(s[o]=Lm(t[o])(t[o],e[o]));return o=>{for(const l in s)n[l]=s[l](o);return n}}function mI(t,e){const n=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],u=t.indexes[l][s[l]],h=t.values[u]??0;n[o]=h,s[l]++}return n}const pI=(t,e)=>{const n=Us.createTransformer(e),s=na(t),o=na(e);return s.indexes.var.length===o.indexes.var.length&&s.indexes.color.length===o.indexes.color.length&&s.indexes.number.length>=o.indexes.number.length?mf.has(t)&&!o.values.length||mf.has(e)&&!s.values.length?dI(t,e):fa(L_(mI(s,o),o.values),n):wc(t,e)};function F_(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Qe(t,e,n):Lm(t)(t,e)}const gI=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ue.update(e,n),stop:()=>Vs(e),now:()=>wt.isProcessing?wt.timestamp:It.now()}},B_=(t,e,n=10)=>{let s="";const o=Math.max(Math.round(e/n),2);for(let l=0;l<o;l++)s+=Math.round(t(l/(o-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},_c=2e4;function Fm(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<_c;)e+=n,s=t.next(e);return e>=_c?1/0:e}function xI(t,e=100,n){const s=n({...t,keyframes:[0,e]}),o=Math.min(Fm(s),_c);return{type:"keyframes",ease:l=>s.next(o*l).value/e,duration:tn(o)}}const yI=5;function z_(t,e,n){const s=Math.max(e-yI,0);return y_(n-t(s),e-s)}const et={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Nh=.001;function vI({duration:t=et.duration,bounce:e=et.bounce,velocity:n=et.velocity,mass:s=et.mass}){let o,l,u=1-e;u=An(et.minDamping,et.maxDamping,u),t=An(et.minDuration,et.maxDuration,tn(t)),u<1?(o=m=>{const p=m*u,g=p*t,y=p-n,w=pf(m,u),_=Math.exp(-g);return Nh-y/w*_},l=m=>{const g=m*u*t,y=g*n+n,w=Math.pow(u,2)*Math.pow(m,2)*t,_=Math.exp(-g),C=pf(Math.pow(m,2),u);return(-o(m)+Nh>0?-1:1)*((y-w)*_)/C}):(o=m=>{const p=Math.exp(-m*t),g=(m-n)*t+1;return-Nh+p*g},l=m=>{const p=Math.exp(-m*t),g=(n-m)*(t*t);return p*g});const h=5/t,d=_I(o,l,h);if(t=yn(t),isNaN(d))return{stiffness:et.stiffness,damping:et.damping,duration:t};{const m=Math.pow(d,2)*s;return{stiffness:m,damping:u*2*Math.sqrt(s*m),duration:t}}}const wI=12;function _I(t,e,n){let s=n;for(let o=1;o<wI;o++)s=s-t(s)/e(s);return s}function pf(t,e){return t*Math.sqrt(1-e*e)}const bI=["duration","bounce"],NI=["stiffness","damping","mass"];function Iy(t,e){return e.some(n=>t[n]!==void 0)}function CI(t){let e={velocity:et.velocity,stiffness:et.stiffness,damping:et.damping,mass:et.mass,isResolvedFromDuration:!1,...t};if(!Iy(t,NI)&&Iy(t,bI))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),o=s*s,l=2*An(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:et.mass,stiffness:o,damping:l}}else{const n=vI(t);e={...e,...n,mass:et.mass},e.isResolvedFromDuration=!0}return e}function bc(t=et.visualDuration,e=et.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:o}=n;const l=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],h={done:!1,value:l},{stiffness:d,damping:m,mass:p,duration:g,velocity:y,isResolvedFromDuration:w}=CI({...n,velocity:-tn(n.velocity||0)}),_=y||0,C=m/(2*Math.sqrt(d*p)),S=u-l,T=tn(Math.sqrt(d/p)),N=Math.abs(S)<5;s||(s=N?et.restSpeed.granular:et.restSpeed.default),o||(o=N?et.restDelta.granular:et.restDelta.default);let j;if(C<1){const L=pf(T,C);j=W=>{const z=Math.exp(-C*T*W);return u-z*((_+C*T*S)/L*Math.sin(L*W)+S*Math.cos(L*W))}}else if(C===1)j=L=>u-Math.exp(-T*L)*(S+(_+T*S)*L);else{const L=T*Math.sqrt(C*C-1);j=W=>{const z=Math.exp(-C*T*W),F=Math.min(L*W,300);return u-z*((_+C*T*S)*Math.sinh(F)+L*S*Math.cosh(F))/L}}const D={calculatedDuration:w&&g||null,next:L=>{const W=j(L);if(w)h.done=L>=g;else{let z=L===0?_:0;C<1&&(z=L===0?yn(_):z_(j,L,W));const F=Math.abs(z)<=s,X=Math.abs(u-W)<=o;h.done=F&&X}return h.value=h.done?u:W,h},toString:()=>{const L=Math.min(Fm(D),_c),W=B_(z=>D.next(L*z).value,L,30);return L+"ms "+W},toTransition:()=>{}};return D}bc.applyToOptions=t=>{const e=xI(t,100,bc);return t.ease=e.ease,t.duration=yn(e.duration),t.type="keyframes",t};function gf({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:o=10,bounceStiffness:l=500,modifyTarget:u,min:h,max:d,restDelta:m=.5,restSpeed:p}){const g=t[0],y={done:!1,value:g},w=F=>h!==void 0&&F<h||d!==void 0&&F>d,_=F=>h===void 0?d:d===void 0||Math.abs(h-F)<Math.abs(d-F)?h:d;let C=n*e;const S=g+C,T=u===void 0?S:u(S);T!==S&&(C=T-g);const N=F=>-C*Math.exp(-F/s),j=F=>T+N(F),D=F=>{const X=N(F),ie=j(F);y.done=Math.abs(X)<=m,y.value=y.done?T:ie};let L,W;const z=F=>{w(y.value)&&(L=F,W=bc({keyframes:[y.value,_(y.value)],velocity:z_(j,F,y.value),damping:o,stiffness:l,restDelta:m,restSpeed:p}))};return z(0),{calculatedDuration:null,next:F=>{let X=!1;return!W&&L===void 0&&(X=!0,D(F),z(F)),L!==void 0&&F>=L?W.next(F-L):(!X&&D(F),y)}}}function SI(t,e,n){const s=[],o=n||es.mix||F_,l=t.length-1;for(let u=0;u<l;u++){let h=o(t[u],t[u+1]);if(e){const d=Array.isArray(e)?e[u]||nn:e;h=fa(d,h)}s.push(h)}return s}function jI(t,e,{clamp:n=!0,ease:s,mixer:o}={}){const l=t.length;if(Tm(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=SI(e,s,o),d=h.length,m=p=>{if(u&&p<t[0])return e[0];let g=0;if(d>1)for(;g<t.length-2&&!(p<t[g+1]);g++);const y=ea(t[g],t[g+1],p);return h[g](y)};return n?p=>m(An(t[0],t[l-1],p)):m}function EI(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const o=ea(0,e,s);t.push(Qe(n,1,o))}}function kI(t){const e=[0];return EI(e,t.length-1),e}function TI(t,e){return t.map(n=>n*e)}function PI(t,e){return t.map(()=>e||E_).splice(0,t.length-1)}function Io({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const o=V4(s)?s.map(Sy):Sy(s),l={done:!1,value:e[0]},u=TI(n&&n.length===e.length?n:kI(e),t),h=jI(u,e,{ease:Array.isArray(o)?o:PI(e,o)});return{calculatedDuration:t,next:d=>(l.value=h(d),l.done=d>=t,l)}}const II=t=>t!==null;function Bm(t,{repeat:e,repeatType:n="loop"},s,o=1){const l=t.filter(II),h=o<0||e&&n!=="loop"&&e%2===1?0:l.length-1;return!h||s===void 0?l[h]:s}const RI={decay:gf,inertia:gf,tween:Io,keyframes:Io,spring:bc};function V_(t){typeof t.type=="string"&&(t.type=RI[t.type])}class zm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const AI=t=>t/100;class Vm extends zm{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,o;const{motionValue:n}=this.options;n&&n.updatedAt!==It.now()&&this.tick(It.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(s=this.options).onStop)==null||o.call(s))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;V_(e);const{type:n=Io,repeat:s=0,repeatDelay:o=0,repeatType:l,velocity:u=0}=e;let{keyframes:h}=e;const d=n||Io;d!==Io&&typeof h[0]!="number"&&(this.mixKeyframes=fa(AI,F_(h[0],h[1])),h=[0,100]);const m=d({...e,keyframes:h});l==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...h].reverse(),velocity:-u})),m.calculatedDuration===null&&(m.calculatedDuration=Fm(m));const{calculatedDuration:p}=m;this.calculatedDuration=p,this.resolvedDuration=p+o,this.totalDuration=this.resolvedDuration*(s+1)-o,this.generator=m}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:o,mixKeyframes:l,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:d}=this;if(this.startTime===null)return s.next(0);const{delay:m=0,keyframes:p,repeat:g,repeatType:y,repeatDelay:w,type:_,onUpdate:C,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const T=this.currentTime-m*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?T<0:T>o;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let j=this.currentTime,D=s;if(g){const F=Math.min(this.currentTime,o)/h;let X=Math.floor(F),ie=F%1;!ie&&F>=1&&(ie=1),ie===1&&X--,X=Math.min(X,g+1),!!(X%2)&&(y==="reverse"?(ie=1-ie,w&&(ie-=w/h)):y==="mirror"&&(D=u)),j=An(0,1,ie)*h}const L=N?{done:!1,value:p[0]}:D.next(j);l&&(L.value=l(L.value));let{done:W}=L;!N&&d!==null&&(W=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&W);return z&&_!==gf&&(L.value=Bm(p,this.options,S,this.speed)),C&&C(L.value),z&&this.finish(),L}then(e,n){return this.finished.then(e,n)}get duration(){return tn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+tn(e)}get time(){return tn(this.currentTime)}set time(e){var n;e=yn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(It.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=tn(this.currentTime))}play(){var o,l;if(this.isStopped)return;const{driver:e=gI,startTime:n}=this.options;this.driver||(this.driver=e(u=>this.tick(u))),(l=(o=this.options).onPlay)==null||l.call(o);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(It.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function DI(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const hr=t=>t*180/Math.PI,xf=t=>{const e=hr(Math.atan2(t[1],t[0]));return yf(e)},MI={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:xf,rotateZ:xf,skewX:t=>hr(Math.atan(t[1])),skewY:t=>hr(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},yf=t=>(t=t%360,t<0&&(t+=360),t),Ry=xf,Ay=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Dy=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),OI={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ay,scaleY:Dy,scale:t=>(Ay(t)+Dy(t))/2,rotateX:t=>yf(hr(Math.atan2(t[6],t[5]))),rotateY:t=>yf(hr(Math.atan2(-t[2],t[0]))),rotateZ:Ry,rotate:Ry,skewX:t=>hr(Math.atan(t[4])),skewY:t=>hr(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function vf(t){return t.includes("scale")?1:0}function wf(t,e){if(!t||t==="none")return vf(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,o;if(n)s=OI,o=n;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=MI,o=h}if(!o)return vf(e);const l=s[e],u=o[1].split(",").map(FI);return typeof l=="function"?l(u):u[l]}const LI=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return wf(n,e)};function FI(t){return parseFloat(t.trim())}const Si=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ji=new Set(Si),My=t=>t===Ci||t===ne,BI=new Set(["x","y","z"]),zI=Si.filter(t=>!BI.has(t));function VI(t){const e=[];return zI.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Ts={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>wf(e,"x"),y:(t,{transform:e})=>wf(e,"y")};Ts.translateX=Ts.x;Ts.translateY=Ts.y;const mr=new Set;let _f=!1,bf=!1,Nf=!1;function U_(){if(bf){const t=Array.from(mr).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const o=VI(s);o.length&&(n.set(s,o),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const o=n.get(s);o&&o.forEach(([l,u])=>{var h;(h=s.getValue(l))==null||h.set(u)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}bf=!1,_f=!1,mr.forEach(t=>t.complete(Nf)),mr.clear()}function W_(){mr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(bf=!0)})}function UI(){Nf=!0,W_(),U_(),Nf=!1}class Um{constructor(e,n,s,o,l,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=o,this.element=l,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(mr.add(this),_f||(_f=!0,Ue.read(W_),Ue.resolveKeyframes(U_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:o}=this;if(e[0]===null){const l=o==null?void 0:o.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(s&&n){const h=s.readValue(n,u);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=u),o&&l===void 0&&o.set(e[0])}DI(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),mr.delete(this)}cancel(){this.state==="scheduled"&&(mr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const WI=t=>t.startsWith("--");function $I(t,e,n){WI(e)?t.style.setProperty(e,n):t.style[e]=n}const HI=Pm(()=>window.ScrollTimeline!==void 0),GI={};function YI(t,e){const n=Pm(t);return()=>GI[e]??n()}const $_=YI(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Co=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,Oy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Co([0,.65,.55,1]),circOut:Co([.55,0,1,.45]),backIn:Co([.31,.01,.66,-.59]),backOut:Co([.33,1.53,.69,.99])};function H_(t,e){if(t)return typeof t=="function"?$_()?B_(t,e):"ease-out":k_(t)?Co(t):Array.isArray(t)?t.map(n=>H_(n,e)||Oy.easeOut):Oy[t]}function KI(t,e,n,{delay:s=0,duration:o=300,repeat:l=0,repeatType:u="loop",ease:h="easeOut",times:d}={},m=void 0){const p={[e]:n};d&&(p.offset=d);const g=H_(h,o);Array.isArray(g)&&(p.easing=g);const y={delay:s,duration:o,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:l+1,direction:u==="reverse"?"alternate":"normal"};return m&&(y.pseudoElement=m),t.animate(p,y)}function G_(t){return typeof t=="function"&&"applyToOptions"in t}function qI({type:t,...e}){return G_(t)&&$_()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Y_ extends zm{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:s,keyframes:o,pseudoElement:l,allowFlatten:u=!1,finalKeyframe:h,onComplete:d}=e;this.isPseudoElement=!!l,this.allowFlatten=u,this.options=e,Tm(typeof e.type!="string");const m=qI(e);this.animation=KI(n,s,o,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const p=Bm(o,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(p):$I(n,s,p),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,s,o;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((o=(s=this.animation).commitStyles)==null||o.call(s))}get duration(){var n,s;const e=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return tn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+tn(e)}get time(){return tn(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=yn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&HI()?(this.animation.timeline=e,nn):n(this)}}const K_={anticipate:C_,backInOut:N_,circInOut:j_};function QI(t){return t in K_}function XI(t){typeof t.ease=="string"&&QI(t.ease)&&(t.ease=K_[t.ease])}const Ch=10;class ZI extends Y_{constructor(e){XI(e),V_(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:o,element:l,...u}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const h=new Vm({...u,autoplay:!1}),d=Math.max(Ch,It.now()-this.startTime),m=An(0,Ch,d-Ch);n.setWithVelocity(h.sample(Math.max(0,d-m)).value,h.sample(d).value,m),h.stop()}}const Ly=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Us.test(t)||t==="0")&&!t.startsWith("url("));function JI(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function eR(t,e,n,s){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],u=Ly(o,e),h=Ly(l,e);return!u||!h?!1:JI(t)||(n==="spring"||G_(n))&&s}function Cf(t){t.duration=0,t.type="keyframes"}const tR=new Set(["opacity","clipPath","filter","transform"]),nR=Pm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function sR(t){var p;const{motionValue:e,name:n,repeatDelay:s,repeatType:o,damping:l,type:u}=t;if(!(((p=e==null?void 0:e.owner)==null?void 0:p.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:m}=e.owner.getProps();return nR()&&n&&tR.has(n)&&(n!=="transform"||!m)&&!d&&!s&&o!=="mirror"&&l!==0&&u!=="inertia"}const rR=40;class iR extends zm{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:o=0,repeatDelay:l=0,repeatType:u="loop",keyframes:h,name:d,motionValue:m,element:p,...g}){var _;super(),this.stop=()=>{var C,S;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(S=this.keyframeResolver)==null||S.cancel()},this.createdAt=It.now();const y={autoplay:e,delay:n,type:s,repeat:o,repeatDelay:l,repeatType:u,name:d,motionValue:m,element:p,...g},w=(p==null?void 0:p.KeyframeResolver)||Um;this.keyframeResolver=new w(h,(C,S,T)=>this.onKeyframesResolved(C,S,y,!T),d,m,p),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(e,n,s,o){var S,T;this.keyframeResolver=void 0;const{name:l,type:u,velocity:h,delay:d,isHandoff:m,onUpdate:p}=s;this.resolvedAt=It.now(),eR(e,l,u,h)||((es.instantAnimations||!d)&&(p==null||p(Bm(e,s,n))),e[0]=e[e.length-1],Cf(s),s.repeat=0);const y={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>rR?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},w=!m&&sR(y),_=(T=(S=y.motionValue)==null?void 0:S.owner)==null?void 0:T.current,C=w?new ZI({...y,element:_}):new Vm(y);C.finished.then(()=>{this.notifyFinished()}).catch(nn),this.pendingTimeline&&(this.stopTimeline=C.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=C}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),UI()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function q_(t,e,n,s=0,o=1){const l=Array.from(t).sort((m,p)=>m.sortNodePosition(p)).indexOf(e),u=t.size,h=(u-1)*s;return typeof n=="function"?n(l,u):o===1?l*s:h-l*s}const oR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function aR(t){const e=oR.exec(t);if(!e)return[,];const[,n,s,o]=e;return[`--${n??s}`,o]}function Q_(t,e,n=1){const[s,o]=aR(t);if(!s)return;const l=window.getComputedStyle(e).getPropertyValue(s);if(l){const u=l.trim();return p_(u)?parseFloat(u):u}return Dm(o)?Q_(o,e,n+1):o}const lR={type:"spring",stiffness:500,damping:25,restSpeed:10},cR=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),uR={type:"keyframes",duration:.8},dR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},hR=(t,{keyframes:e})=>e.length>2?uR:ji.has(t)?t.startsWith("scale")?cR(e[1]):lR:dR,fR=t=>t!==null;function mR(t,{repeat:e,repeatType:n="loop"},s){const o=t.filter(fR),l=e&&n!=="loop"&&e%2===1?0:o.length-1;return o[l]}function X_(t,e){if(t!=null&&t.inherit&&e){const{inherit:n,...s}=t;return{...e,...s}}return t}function Wm(t,e){const n=(t==null?void 0:t[e])??(t==null?void 0:t.default)??t;return n!==t?X_(n,t):n}function pR({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:o,repeat:l,repeatType:u,repeatDelay:h,from:d,elapsed:m,...p}){return!!Object.keys(p).length}const $m=(t,e,n,s={},o,l)=>u=>{const h=Wm(s,t)||{},d=h.delay||s.delay||0;let{elapsed:m=0}=s;m=m-yn(d);const p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-m,onUpdate:y=>{e.set(y),h.onUpdate&&h.onUpdate(y)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:t,motionValue:e,element:l?void 0:o};pR(h)||Object.assign(p,hR(t,p)),p.duration&&(p.duration=yn(p.duration)),p.repeatDelay&&(p.repeatDelay=yn(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Cf(p),p.delay===0&&(g=!0)),(es.instantAnimations||es.skipAnimations||o!=null&&o.shouldSkipAnimations)&&(g=!0,Cf(p),p.delay=0),p.allowFlatten=!h.type&&!h.ease,g&&!l&&e.get()!==void 0){const y=mR(p.keyframes,h);if(y!==void 0){Ue.update(()=>{p.onUpdate(y),p.onComplete()});return}}return h.isSync?new Vm(p):new iR(p)};function Fy(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function Hm(t,e,n,s){if(typeof e=="function"){const[o,l]=Fy(s);e=e(n!==void 0?n:t.custom,o,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,l]=Fy(s);e=e(n!==void 0?n:t.custom,o,l)}return e}function li(t,e,n){const s=t.getProps();return Hm(s,e,n!==void 0?n:s.custom,t)}const Z_=new Set(["width","height","top","left","right","bottom",...Si]),By=30,gR=t=>!isNaN(parseFloat(t));class xR{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var l;const o=It.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=It.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=gR(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Im);const s=this.events[e].add(n);return e==="change"?()=>{s(),Ue.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=It.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>By)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,By);return y_(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pi(t,e){return new xR(t,e)}const Sf=t=>Array.isArray(t);function yR(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,pi(n))}function vR(t){return Sf(t)?t[t.length-1]||0:t}function wR(t,e){const n=li(t,e);let{transitionEnd:s={},transition:o={},...l}=n||{};l={...l,...s};for(const u in l){const h=vR(l[u]);yR(t,u,h)}}const Et=t=>!!(t&&t.getVelocity);function _R(t){return!!(Et(t)&&t.add)}function jf(t,e){const n=t.getValue("willChange");if(_R(n))return n.add(e);if(!n&&es.WillChange){const s=new es.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function Gm(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const bR="framerAppearId",J_="data-"+Gm(bR);function eb(t){return t.props[J_]}function NR({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function tb(t,e,{delay:n=0,transitionOverride:s,type:o}={}){let{transition:l,transitionEnd:u,...h}=e;const d=t.getDefaultTransition();l=l?X_(l,d):d;const m=l==null?void 0:l.reduceMotion;s&&(l=s);const p=[],g=o&&t.animationState&&t.animationState.getState()[o];for(const y in h){const w=t.getValue(y,t.latestValues[y]??null),_=h[y];if(_===void 0||g&&NR(g,y))continue;const C={delay:n,...Wm(l||{},y)},S=w.get();if(S!==void 0&&!w.isAnimating&&!Array.isArray(_)&&_===S&&!C.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const D=eb(t);if(D){const L=window.MotionHandoffAnimation(D,y,Ue);L!==null&&(C.startTime=L,T=!0)}}jf(t,y);const N=m??t.shouldReduceMotion;w.start($m(y,w,_,N&&Z_.has(y)?{type:!1}:C,t,T));const j=w.animation;j&&p.push(j)}if(u){const y=()=>Ue.update(()=>{u&&wR(t,u)});p.length?Promise.all(p).then(y):y()}return p}function Ef(t,e,n={}){var d;const s=li(t,e,n.type==="exit"?(d=t.presenceContext)==null?void 0:d.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(o=n.transitionOverride);const l=s?()=>Promise.all(tb(t,s,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:y}=o;return CR(t,e,m,p,g,y,n)}:()=>Promise.resolve(),{when:h}=o;if(h){const[m,p]=h==="beforeChildren"?[l,u]:[u,l];return m().then(()=>p())}else return Promise.all([l(),u(n.delay)])}function CR(t,e,n=0,s=0,o=0,l=1,u){const h=[];for(const d of t.variantChildren)d.notify("AnimationStart",e),h.push(Ef(d,e,{...u,delay:n+(typeof s=="function"?0:s)+q_(t.variantChildren,d,s,o,l)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(h)}function SR(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const o=e.map(l=>Ef(t,l,n));s=Promise.all(o)}else if(typeof e=="string")s=Ef(t,e,n);else{const o=typeof e=="function"?li(t,e,n.custom):e;s=Promise.all(tb(t,o,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}const jR={test:t=>t==="auto",parse:t=>t},nb=t=>e=>e.test(t),sb=[Ci,ne,Tn,Ss,eI,J4,jR],zy=t=>sb.find(nb(t));function ER(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||x_(t):!0}const kR=new Set(["brightness","contrast","saturate","opacity"]);function TR(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(Mm)||[];if(!s)return t;const o=n.replace(s,"");let l=kR.has(e)?1:0;return s!==n&&(l*=100),e+"("+l+o+")"}const PR=/\b([a-z-]*)\(.*?\)/gu,kf={...Us,getAnimatableNone:t=>{const e=t.match(PR);return e?e.map(TR).join(" "):t}},Vy={...Ci,transform:Math.round},IR={rotate:Ss,rotateX:Ss,rotateY:Ss,rotateZ:Ss,scale:Al,scaleX:Al,scaleY:Al,scaleZ:Al,skew:Ss,skewX:Ss,skewY:Ss,distance:ne,translateX:ne,translateY:ne,translateZ:ne,x:ne,y:ne,z:ne,perspective:ne,transformPerspective:ne,opacity:ta,originX:Ey,originY:Ey,originZ:ne},Ym={borderWidth:ne,borderTopWidth:ne,borderRightWidth:ne,borderBottomWidth:ne,borderLeftWidth:ne,borderRadius:ne,borderTopLeftRadius:ne,borderTopRightRadius:ne,borderBottomRightRadius:ne,borderBottomLeftRadius:ne,width:ne,maxWidth:ne,height:ne,maxHeight:ne,top:ne,right:ne,bottom:ne,left:ne,inset:ne,insetBlock:ne,insetBlockStart:ne,insetBlockEnd:ne,insetInline:ne,insetInlineStart:ne,insetInlineEnd:ne,padding:ne,paddingTop:ne,paddingRight:ne,paddingBottom:ne,paddingLeft:ne,paddingBlock:ne,paddingBlockStart:ne,paddingBlockEnd:ne,paddingInline:ne,paddingInlineStart:ne,paddingInlineEnd:ne,margin:ne,marginTop:ne,marginRight:ne,marginBottom:ne,marginLeft:ne,marginBlock:ne,marginBlockStart:ne,marginBlockEnd:ne,marginInline:ne,marginInlineStart:ne,marginInlineEnd:ne,fontSize:ne,backgroundPositionX:ne,backgroundPositionY:ne,...IR,zIndex:Vy,fillOpacity:ta,strokeOpacity:ta,numOctaves:Vy},RR={...Ym,color:it,backgroundColor:it,outlineColor:it,fill:it,stroke:it,borderColor:it,borderTopColor:it,borderRightColor:it,borderBottomColor:it,borderLeftColor:it,filter:kf,WebkitFilter:kf},rb=t=>RR[t];function ib(t,e){let n=rb(t);return n!==kf&&(n=Us),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const AR=new Set(["auto","none","0"]);function DR(t,e,n){let s=0,o;for(;s<t.length&&!o;){const l=t[s];typeof l=="string"&&!AR.has(l)&&na(l).values.length&&(o=t[s]),s++}if(o&&n)for(const l of e)t[l]=ib(n,o)}class MR extends Um{constructor(e,n,s,o,l){super(e,n,s,o,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let p=0;p<e.length;p++){let g=e[p];if(typeof g=="string"&&(g=g.trim(),Dm(g))){const y=Q_(g,n.current);y!==void 0&&(e[p]=y),p===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!Z_.has(s)||e.length!==2)return;const[o,l]=e,u=zy(o),h=zy(l),d=jy(o),m=jy(l);if(d!==m&&Ts[s]){this.needsMeasurement=!0;return}if(u!==h)if(My(u)&&My(h))for(let p=0;p<e.length;p++){const g=e[p];typeof g=="string"&&(e[p]=parseFloat(g))}else Ts[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let o=0;o<e.length;o++)(e[o]===null||ER(e[o]))&&s.push(o);s.length&&DR(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ts[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(s,o).jump(o,!1)}measureEndState(){var h;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const l=s.length-1,u=s[l];s[l]=Ts[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([d,m])=>{e.getValue(d).set(m)}),this.resolveNoneKeyframes()}}const OR=new Set(["opacity","clipPath","filter","transform"]);function ob(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const o=(n==null?void 0:n[t])??s.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t).filter(s=>s!=null)}const ab=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Tf(t){return g_(t)&&"offsetHeight"in t}const{schedule:Km}=T_(queueMicrotask,!1),hn={x:!1,y:!1};function lb(){return hn.x||hn.y}function LR(t){return t==="x"||t==="y"?hn[t]?null:(hn[t]=!0,()=>{hn[t]=!1}):hn.x||hn.y?null:(hn.x=hn.y=!0,()=>{hn.x=hn.y=!1})}function cb(t,e){const n=ob(t),s=new AbortController,o={passive:!0,...e,signal:s.signal};return[n,o,()=>s.abort()]}function FR(t){return!(t.pointerType==="touch"||lb())}function BR(t,e,n={}){const[s,o,l]=cb(t,n);return s.forEach(u=>{let h=!1,d=!1,m;const p=()=>{u.removeEventListener("pointerleave",_)},g=S=>{m&&(m(S),m=void 0),p()},y=S=>{h=!1,window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",y),d&&(d=!1,g(S))},w=()=>{h=!0,window.addEventListener("pointerup",y,o),window.addEventListener("pointercancel",y,o)},_=S=>{if(S.pointerType!=="touch"){if(h){d=!0;return}g(S)}},C=S=>{if(!FR(S))return;d=!1;const T=e(u,S);typeof T=="function"&&(m=T,u.addEventListener("pointerleave",_,o))};u.addEventListener("pointerenter",C,o),u.addEventListener("pointerdown",w,o)}),l}const ub=(t,e)=>e?t===e?!0:ub(t,e.parentElement):!1,qm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,zR=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function VR(t){return zR.has(t.tagName)||t.isContentEditable===!0}const UR=new Set(["INPUT","SELECT","TEXTAREA"]);function WR(t){return UR.has(t.tagName)||t.isContentEditable===!0}const $l=new WeakSet;function Uy(t){return e=>{e.key==="Enter"&&t(e)}}function Sh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const $R=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=Uy(()=>{if($l.has(n))return;Sh(n,"down");const o=Uy(()=>{Sh(n,"up")}),l=()=>Sh(n,"cancel");n.addEventListener("keyup",o,e),n.addEventListener("blur",l,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function Wy(t){return qm(t)&&!lb()}const $y=new WeakSet;function HR(t,e,n={}){const[s,o,l]=cb(t,n),u=h=>{const d=h.currentTarget;if(!Wy(h)||$y.has(h))return;$l.add(d),n.stopPropagation&&$y.add(h);const m=e(d,h),p=(w,_)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",y),$l.has(d)&&$l.delete(d),Wy(w)&&typeof m=="function"&&m(w,{success:_})},g=w=>{p(w,d===window||d===document||n.useGlobalTarget||ub(d,w.target))},y=w=>{p(w,!1)};window.addEventListener("pointerup",g,o),window.addEventListener("pointercancel",y,o)};return s.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",u,o),Tf(h)&&(h.addEventListener("focus",m=>$R(m,o)),!VR(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),l}function Qm(t){return g_(t)&&"ownerSVGElement"in t}const Hl=new WeakMap;let js;const db=(t,e,n)=>(s,o)=>o&&o[0]?o[0][t+"Size"]:Qm(s)&&"getBBox"in s?s.getBBox()[e]:s[n],GR=db("inline","width","offsetWidth"),YR=db("block","height","offsetHeight");function KR({target:t,borderBoxSize:e}){var n;(n=Hl.get(t))==null||n.forEach(s=>{s(t,{get width(){return GR(t,e)},get height(){return YR(t,e)}})})}function qR(t){t.forEach(KR)}function QR(){typeof ResizeObserver>"u"||(js=new ResizeObserver(qR))}function XR(t,e){js||QR();const n=ob(t);return n.forEach(s=>{let o=Hl.get(s);o||(o=new Set,Hl.set(s,o)),o.add(e),js==null||js.observe(s)}),()=>{n.forEach(s=>{const o=Hl.get(s);o==null||o.delete(e),o!=null&&o.size||js==null||js.unobserve(s)})}}const Gl=new Set;let ti;function ZR(){ti=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};Gl.forEach(e=>e(t))},window.addEventListener("resize",ti)}function JR(t){return Gl.add(t),ti||ZR(),()=>{Gl.delete(t),!Gl.size&&typeof ti=="function"&&(window.removeEventListener("resize",ti),ti=void 0)}}function Hy(t,e){return typeof t=="function"?JR(t):XR(t,e)}function eA(t){return Qm(t)&&t.tagName==="svg"}const tA=[...sb,it,Us],nA=t=>tA.find(nb(t)),Gy=()=>({translate:0,scale:1,origin:0,originPoint:0}),ni=()=>({x:Gy(),y:Gy()}),Yy=()=>({min:0,max:0}),lt=()=>({x:Yy(),y:Yy()}),sA=new WeakMap;function Xc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function sa(t){return typeof t=="string"||Array.isArray(t)}const Xm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zm=["initial",...Xm];function Zc(t){return Xc(t.animate)||Zm.some(e=>sa(t[e]))}function hb(t){return!!(Zc(t)||t.variants)}function rA(t,e,n){for(const s in e){const o=e[s],l=n[s];if(Et(o))t.addValue(s,o);else if(Et(l))t.addValue(s,pi(o,{owner:t}));else if(l!==o)if(t.hasValue(s)){const u=t.getValue(s);u.liveStyle===!0?u.jump(o):u.hasAnimated||u.set(o)}else{const u=t.getStaticValue(s);t.addValue(s,pi(u!==void 0?u:o,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const Pf={current:null},fb={current:!1},iA=typeof window<"u";function oA(){if(fb.current=!0,!!iA)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Pf.current=t.matches;t.addEventListener("change",e),e()}else Pf.current=!1}const Ky=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Nc={};function mb(t){Nc=t}function aA(){return Nc}class lA{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:o,skipAnimations:l,blockInitialAnimation:u,visualState:h},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=Um,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=It.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,Ue.render(this.render,!1,!0))};const{latestValues:m,renderState:p}=h;this.latestValues=m,this.baseTarget={...m},this.initialValues=n.initial?{...m}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.skipAnimationsConfig=l,this.options=d,this.blockInitialAnimation=!!u,this.isControllingVariants=Zc(n),this.isVariantNode=hb(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in y){const _=y[w];m[w]!==void 0&&Et(_)&&_.set(m[w])}}mount(e){var n,s;if(this.hasBeenMounted)for(const o in this.initialValues)(n=this.values.get(o))==null||n.jump(this.initialValues[o]),this.latestValues[o]=this.initialValues[o];this.current=e,sA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((o,l)=>this.bindToMotionValue(l,o)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(fb.current||oA(),this.shouldReduceMotion=Pf.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(s=this.parent)==null||s.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),Vs(this.notifyUpdate),Vs(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&OR.has(e)&&this.current instanceof HTMLElement){const{factory:u,keyframes:h,times:d,ease:m,duration:p}=n.accelerate,g=new Y_({element:this.current,name:e,keyframes:h,times:d,ease:m,duration:yn(p)}),y=u(g);this.valueSubscriptions.set(e,()=>{y(),g.cancel()});return}const s=ji.has(e);s&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Ue.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;typeof window<"u"&&window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Nc){const n=Nc[e];if(!n)continue;const{isEnabled:s,Feature:o}=n;if(!this.features[e]&&o&&s(this.props)&&(this.features[e]=new o(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):lt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Ky.length;s++){const o=Ky[s];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const l="on"+o,u=e[l];u&&(this.propEventSubscriptions[o]=this.on(o,u))}this.prevMotionValues=rA(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=pi(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(p_(s)||x_(s))?s=parseFloat(s):!nA(s)&&Us.test(n)&&(s=ib(e,n)),this.setBaseTarget(e,Et(s)?s.get():s)),Et(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var l;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const u=Hm(this.props,n,(l=this.presenceContext)==null?void 0:l.custom);u&&(s=u[e])}if(n&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Et(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Im),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Km.render(this.render)}}class pb extends lA{constructor(){super(...arguments),this.KeyframeResolver=MR}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const s=e.style;return s?s[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Et(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class Ws{constructor(e){this.isMounted=!1,this.node=e}update(){}}function gb({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function cA({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function uA(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function jh(t){return t===void 0||t===1}function If({scale:t,scaleX:e,scaleY:n}){return!jh(t)||!jh(e)||!jh(n)}function ar(t){return If(t)||xb(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function xb(t){return qy(t.x)||qy(t.y)}function qy(t){return t&&t!=="0%"}function Cc(t,e,n){const s=t-n,o=e*s;return n+o}function Qy(t,e,n,s,o){return o!==void 0&&(t=Cc(t,o,s)),Cc(t,n,s)+e}function Rf(t,e=0,n=1,s,o){t.min=Qy(t.min,e,n,s,o),t.max=Qy(t.max,e,n,s,o)}function yb(t,{x:e,y:n}){Rf(t.x,e.translate,e.scale,e.originPoint),Rf(t.y,n.translate,n.scale,n.originPoint)}const Xy=.999999999999,Zy=1.0000000000001;function dA(t,e,n,s=!1){const o=n.length;if(!o)return;e.x=e.y=1;let l,u;for(let h=0;h<o;h++){l=n[h],u=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&ri(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,yb(t,u)),s&&ar(l.latestValues)&&ri(t,l.latestValues))}e.x<Zy&&e.x>Xy&&(e.x=1),e.y<Zy&&e.y>Xy&&(e.y=1)}function si(t,e){t.min=t.min+e,t.max=t.max+e}function Jy(t,e,n,s,o=.5){const l=Qe(t.min,t.max,o);Rf(t,e,n,l,s)}function ri(t,e){Jy(t.x,e.x,e.scaleX,e.scale,e.originX),Jy(t.y,e.y,e.scaleY,e.scale,e.originY)}function vb(t,e){return gb(uA(t.getBoundingClientRect(),e))}function hA(t,e,n){const s=vb(t,n),{scroll:o}=e;return o&&(si(s.x,o.offset.x),si(s.y,o.offset.y)),s}const fA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},mA=Si.length;function pA(t,e,n){let s="",o=!0;for(let l=0;l<mA;l++){const u=Si[l],h=t[u];if(h===void 0)continue;let d=!0;if(typeof h=="number")d=h===(u.startsWith("scale")?1:0);else{const m=parseFloat(h);d=u.startsWith("scale")?m===1:m===0}if(!d||n){const m=ab(h,Ym[u]);if(!d){o=!1;const p=fA[u]||u;s+=`${p}(${m}) `}n&&(e[u]=m)}}return s=s.trim(),n?s=n(e,o?"":s):o&&(s="none"),s}function Jm(t,e,n){const{style:s,vars:o,transformOrigin:l}=t;let u=!1,h=!1;for(const d in e){const m=e[d];if(ji.has(d)){u=!0;continue}else if(I_(d)){o[d]=m;continue}else{const p=ab(m,Ym[d]);d.startsWith("origin")?(h=!0,l[d]=p):s[d]=p}}if(e.transform||(u||n?s.transform=pA(e,t.transform,n):s.transform&&(s.transform="none")),h){const{originX:d="50%",originY:m="50%",originZ:p=0}=l;s.transformOrigin=`${d} ${m} ${p}`}}function wb(t,{style:e,vars:n},s,o){const l=t.style;let u;for(u in e)l[u]=e[u];o==null||o.applyProjectionStyles(l,s);for(u in n)l.setProperty(u,n[u])}function ev(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const yo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ne.test(t))t=parseFloat(t);else return t;const n=ev(t,e.target.x),s=ev(t,e.target.y);return`${n}% ${s}%`}},gA={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,o=Us.parse(t);if(o.length>5)return s;const l=Us.createTransformer(t),u=typeof o[0]!="number"?1:0,h=n.x.scale*e.x,d=n.y.scale*e.y;o[0+u]/=h,o[1+u]/=d;const m=Qe(h,d,.5);return typeof o[2+u]=="number"&&(o[2+u]/=m),typeof o[3+u]=="number"&&(o[3+u]/=m),l(o)}},Af={borderRadius:{...yo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:yo,borderTopRightRadius:yo,borderBottomLeftRadius:yo,borderBottomRightRadius:yo,boxShadow:gA};function _b(t,{layout:e,layoutId:n}){return ji.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Af[t]||t==="opacity")}function ep(t,e,n){var u;const s=t.style,o=e==null?void 0:e.style,l={};if(!s)return l;for(const h in s)(Et(s[h])||o&&Et(o[h])||_b(h,t)||((u=n==null?void 0:n.getValue(h))==null?void 0:u.liveStyle)!==void 0)&&(l[h]=s[h]);return l}function xA(t){return window.getComputedStyle(t)}class yA extends pb{constructor(){super(...arguments),this.type="html",this.renderInstance=wb}readValueFromInstance(e,n){var s;if(ji.has(n))return(s=this.projection)!=null&&s.isProjecting?vf(n):LI(e,n);{const o=xA(e),l=(I_(n)?o.getPropertyValue(n):o[n])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(e,{transformPagePoint:n}){return vb(e,n)}build(e,n,s){Jm(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return ep(e,n,s)}}const vA={offset:"stroke-dashoffset",array:"stroke-dasharray"},wA={offset:"strokeDashoffset",array:"strokeDasharray"};function _A(t,e,n=1,s=0,o=!0){t.pathLength=1;const l=o?vA:wA;t[l.offset]=`${-s}`,t[l.array]=`${e} ${n}`}const bA=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function bb(t,{attrX:e,attrY:n,attrScale:s,pathLength:o,pathSpacing:l=1,pathOffset:u=0,...h},d,m,p){if(Jm(t,h,m),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:y}=t;g.transform&&(y.transform=g.transform,delete g.transform),(y.transform||g.transformOrigin)&&(y.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),y.transform&&(y.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete g.transformBox);for(const w of bA)g[w]!==void 0&&(y[w]=g[w],delete g[w]);e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),s!==void 0&&(g.scale=s),o!==void 0&&_A(g,o,l,u,!1)}const Nb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Cb=t=>typeof t=="string"&&t.toLowerCase()==="svg";function NA(t,e,n,s){wb(t,e,void 0,s);for(const o in e.attrs)t.setAttribute(Nb.has(o)?o:Gm(o),e.attrs[o])}function Sb(t,e,n){const s=ep(t,e,n);for(const o in t)if(Et(t[o])||Et(e[o])){const l=Si.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;s[l]=t[o]}return s}class CA extends pb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=lt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ji.has(n)){const s=rb(n);return s&&s.default||0}return n=Nb.has(n)?n:Gm(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return Sb(e,n,s)}build(e,n,s){bb(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,o){NA(e,n,s,o)}mount(e){this.isSVGTag=Cb(e.tagName),super.mount(e)}}const SA=Zm.length;function jb(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?jb(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<SA;n++){const s=Zm[n],o=t.props[s];(sa(o)||o===!1)&&(e[s]=o)}return e}function Eb(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const jA=[...Xm].reverse(),EA=Xm.length;function kA(t){return e=>Promise.all(e.map(({animation:n,options:s})=>SR(t,n,s)))}function TA(t){let e=kA(t),n=tv(),s=!0;const o=d=>(m,p)=>{var y;const g=li(t,p,d==="exit"?(y=t.presenceContext)==null?void 0:y.custom:void 0);if(g){const{transition:w,transitionEnd:_,...C}=g;m={...m,...C,..._}}return m};function l(d){e=d(t)}function u(d){const{props:m}=t,p=jb(t.parent)||{},g=[],y=new Set;let w={},_=1/0;for(let S=0;S<EA;S++){const T=jA[S],N=n[T],j=m[T]!==void 0?m[T]:p[T],D=sa(j),L=T===d?N.isActive:null;L===!1&&(_=S);let W=j===p[T]&&j!==m[T]&&D;if(W&&s&&t.manuallyAnimateOnMount&&(W=!1),N.protectedKeys={...w},!N.isActive&&L===null||!j&&!N.prevProp||Xc(j)||typeof j=="boolean")continue;if(T==="exit"&&N.isActive&&L!==!0){N.prevResolvedValues&&(w={...w,...N.prevResolvedValues});continue}const z=PA(N.prevProp,j);let F=z||T===d&&N.isActive&&!W&&D||S>_&&D,X=!1;const ie=Array.isArray(j)?j:[j];let xe=ie.reduce(o(T),{});L===!1&&(xe={});const{prevResolvedValues:$={}}=N,le={...$,...xe},pe=oe=>{F=!0,y.has(oe)&&(X=!0,y.delete(oe)),N.needsAnimating[oe]=!0;const Y=t.getValue(oe);Y&&(Y.liveStyle=!1)};for(const oe in le){const Y=xe[oe],J=$[oe];if(w.hasOwnProperty(oe))continue;let Q=!1;Sf(Y)&&Sf(J)?Q=!Eb(Y,J):Q=Y!==J,Q?Y!=null?pe(oe):y.add(oe):Y!==void 0&&y.has(oe)?pe(oe):N.protectedKeys[oe]=!0}N.prevProp=j,N.prevResolvedValues=xe,N.isActive&&(w={...w,...xe}),s&&t.blockInitialAnimation&&(F=!1);const G=W&&z;F&&(!G||X)&&g.push(...ie.map(oe=>{const Y={type:T};if(typeof oe=="string"&&s&&!G&&t.manuallyAnimateOnMount&&t.parent){const{parent:J}=t,Q=li(J,oe);if(J.enteringChildren&&Q){const{delayChildren:R}=Q.transition||{};Y.delay=q_(J.enteringChildren,t,R)}}return{animation:oe,options:Y}}))}if(y.size){const S={};if(typeof m.initial!="boolean"){const T=li(t,Array.isArray(m.initial)?m.initial[0]:m.initial);T&&T.transition&&(S.transition=T.transition)}y.forEach(T=>{const N=t.getBaseTarget(T),j=t.getValue(T);j&&(j.liveStyle=!0),S[T]=N??null}),g.push({animation:S})}let C=!!g.length;return s&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(C=!1),s=!1,C?e(g):Promise.resolve()}function h(d,m){var g;if(n[d].isActive===m)return Promise.resolve();(g=t.variantChildren)==null||g.forEach(y=>{var w;return(w=y.animationState)==null?void 0:w.setActive(d,m)}),n[d].isActive=m;const p=u(d);for(const y in n)n[y].protectedKeys={};return p}return{animateChanges:u,setActive:h,setAnimateFunction:l,getState:()=>n,reset:()=>{n=tv()}}}function PA(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Eb(e,t):!1}function rr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tv(){return{animate:rr(!0),whileInView:rr(),whileHover:rr(),whileTap:rr(),whileDrag:rr(),whileFocus:rr(),exit:rr()}}function nv(t,e){t.min=e.min,t.max=e.max}function dn(t,e){nv(t.x,e.x),nv(t.y,e.y)}function sv(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const kb=1e-4,IA=1-kb,RA=1+kb,Tb=.01,AA=0-Tb,DA=0+Tb;function Rt(t){return t.max-t.min}function MA(t,e,n){return Math.abs(t-e)<=n}function rv(t,e,n,s=.5){t.origin=s,t.originPoint=Qe(e.min,e.max,t.origin),t.scale=Rt(n)/Rt(e),t.translate=Qe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=IA&&t.scale<=RA||isNaN(t.scale))&&(t.scale=1),(t.translate>=AA&&t.translate<=DA||isNaN(t.translate))&&(t.translate=0)}function Ro(t,e,n,s){rv(t.x,e.x,n.x,s?s.originX:void 0),rv(t.y,e.y,n.y,s?s.originY:void 0)}function iv(t,e,n){t.min=n.min+e.min,t.max=t.min+Rt(e)}function OA(t,e,n){iv(t.x,e.x,n.x),iv(t.y,e.y,n.y)}function ov(t,e,n){t.min=e.min-n.min,t.max=t.min+Rt(e)}function Sc(t,e,n){ov(t.x,e.x,n.x),ov(t.y,e.y,n.y)}function av(t,e,n,s,o){return t-=e,t=Cc(t,1/n,s),o!==void 0&&(t=Cc(t,1/o,s)),t}function LA(t,e=0,n=1,s=.5,o,l=t,u=t){if(Tn.test(e)&&(e=parseFloat(e),e=Qe(u.min,u.max,e/100)-u.min),typeof e!="number")return;let h=Qe(l.min,l.max,s);t===l&&(h-=e),t.min=av(t.min,e,n,h,o),t.max=av(t.max,e,n,h,o)}function lv(t,e,[n,s,o],l,u){LA(t,e[n],e[s],e[o],e.scale,l,u)}const FA=["x","scaleX","originX"],BA=["y","scaleY","originY"];function cv(t,e,n,s){lv(t.x,e,FA,n?n.x:void 0,s?s.x:void 0),lv(t.y,e,BA,n?n.y:void 0,s?s.y:void 0)}function uv(t){return t.translate===0&&t.scale===1}function Pb(t){return uv(t.x)&&uv(t.y)}function dv(t,e){return t.min===e.min&&t.max===e.max}function zA(t,e){return dv(t.x,e.x)&&dv(t.y,e.y)}function hv(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Ib(t,e){return hv(t.x,e.x)&&hv(t.y,e.y)}function fv(t){return Rt(t.x)/Rt(t.y)}function mv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function Sn(t){return[t("x"),t("y")]}function VA(t,e,n){let s="";const o=t.x.translate/e.x,l=t.y.translate/e.y,u=(n==null?void 0:n.z)||0;if((o||l||u)&&(s=`translate3d(${o}px, ${l}px, ${u}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:m,rotate:p,rotateX:g,rotateY:y,skewX:w,skewY:_}=n;m&&(s=`perspective(${m}px) ${s}`),p&&(s+=`rotate(${p}deg) `),g&&(s+=`rotateX(${g}deg) `),y&&(s+=`rotateY(${y}deg) `),w&&(s+=`skewX(${w}deg) `),_&&(s+=`skewY(${_}deg) `)}const h=t.x.scale*e.x,d=t.y.scale*e.y;return(h!==1||d!==1)&&(s+=`scale(${h}, ${d})`),s||"none"}const Rb=["TopLeft","TopRight","BottomLeft","BottomRight"],UA=Rb.length,pv=t=>typeof t=="string"?parseFloat(t):t,gv=t=>typeof t=="number"||ne.test(t);function WA(t,e,n,s,o,l){o?(t.opacity=Qe(0,n.opacity??1,$A(s)),t.opacityExit=Qe(e.opacity??1,0,HA(s))):l&&(t.opacity=Qe(e.opacity??1,n.opacity??1,s));for(let u=0;u<UA;u++){const h=`border${Rb[u]}Radius`;let d=xv(e,h),m=xv(n,h);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||gv(d)===gv(m)?(t[h]=Math.max(Qe(pv(d),pv(m),s),0),(Tn.test(m)||Tn.test(d))&&(t[h]+="%")):t[h]=m}(e.rotate||n.rotate)&&(t.rotate=Qe(e.rotate||0,n.rotate||0,s))}function xv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const $A=Ab(0,.5,S_),HA=Ab(.5,.95,nn);function Ab(t,e,n){return s=>s<t?0:s>e?1:n(ea(t,e,s))}function GA(t,e,n){const s=Et(t)?t:pi(t);return s.start($m("",s,e,n)),s.animation}function ra(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}const YA=(t,e)=>t.depth-e.depth;class KA{constructor(){this.children=[],this.isDirty=!1}add(e){km(this.children,e),this.isDirty=!0}remove(e){vc(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(YA),this.isDirty=!1,this.children.forEach(e)}}function qA(t,e){const n=It.now(),s=({timestamp:o})=>{const l=o-n;l>=e&&(Vs(s),t(l-e))};return Ue.setup(s,!0),()=>Vs(s)}function Yl(t){return Et(t)?t.get():t}class QA{constructor(){this.members=[]}add(e){km(this.members,e);for(let n=this.members.length-1;n>=0;n--){const s=this.members[n];if(s===e||s===this.lead||s===this.prevLead)continue;const o=s.instance;o&&o.isConnected===!1&&s.isPresent!==!1&&!s.snapshot&&vc(this.members,s)}e.scheduleRender()}remove(e){if(vc(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let s;for(let o=n;o>=0;o--){const l=this.members[o],u=l.instance;if(l.isPresent!==!1&&(!u||u.isConnected!==!1)){s=l;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender();const o=s.options.layoutDependency,l=e.options.layoutDependency;if(!(o!==void 0&&l!==void 0&&o===l)){const d=s.instance;d&&d.isConnected===!1&&!s.snapshot||(e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:h}=e.options;h===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Kl={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Eh=["","X","Y","Z"],XA=1e3;let ZA=0;function kh(t,e,n,s){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),s&&(s[t]=0))}function Db(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=eb(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ue,!(o||l))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&Db(s)}function Mb({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:o}){return class{constructor(u={},h=e==null?void 0:e()){this.id=ZA++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(tD),this.nodes.forEach(iD),this.nodes.forEach(oD),this.nodes.forEach(nD)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new KA)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Im),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const d=this.eventHandlers.get(u);d&&d.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=Qm(u)&&!eA(u),this.instance=u;const{layoutId:h,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||h)&&(this.isLayoutDirty=!0),t){let p,g=0;const y=()=>this.root.updateBlockedByResize=!1;Ue.read(()=>{g=window.innerWidth}),t(u,()=>{const w=window.innerWidth;w!==g&&(g=w,this.root.updateBlockedByResize=!0,p&&p(),p=qA(y,250),Kl.hasAnimatedSinceResize&&(Kl.hasAnimatedSinceResize=!1,this.nodes.forEach(wv)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeLayoutChanged:y,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||m.getDefaultTransition()||dD,{onLayoutAnimationStart:C,onLayoutAnimationComplete:S}=m.getProps(),T=!this.targetLayout||!Ib(this.targetLayout,w),N=!g&&y;if(this.options.layoutRoot||this.resumeFrom||N||g&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...Wm(_,"layout"),onPlay:C,onComplete:S};(m.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(p,N)}else g||wv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Vs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(aD),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Db(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:h,layout:d}=this.options;if(h===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yv);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(vv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(rD),this.nodes.forEach(JA),this.nodes.forEach(eD)):this.nodes.forEach(vv),this.clearAllSnapshots();const h=It.now();wt.delta=An(0,1e3/60,h-wt.timestamp),wt.timestamp=h,wt.isProcessing=!0,vh.update.process(wt),vh.preRender.process(wt),vh.render.process(wt),wt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Km.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sD),this.sharedNodes.forEach(lD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ue.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ue.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Rt(this.snapshot.measuredBox.x)&&!Rt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=lt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const d=s(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!o)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!Pb(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,p=m!==this.prevTransformTemplateValue;u&&this.instance&&(h||ar(this.latestValues)||p)&&(o(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let d=this.removeElementScroll(h);return u&&(d=this.removeTransform(d)),hD(d),{animationId:this.root.animationId,measuredBox:h,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:u}=this.options;if(!u)return lt();const h=u.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(fD))){const{scroll:p}=this.root;p&&(si(h.x,p.offset.x),si(h.y,p.offset.y))}return h}removeElementScroll(u){var d;const h=lt();if(dn(h,u),(d=this.scroll)!=null&&d.wasRoot)return h;for(let m=0;m<this.path.length;m++){const p=this.path[m],{scroll:g,options:y}=p;p!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&dn(h,u),si(h.x,g.offset.x),si(h.y,g.offset.y))}return h}applyTransform(u,h=!1){const d=lt();dn(d,u);for(let m=0;m<this.path.length;m++){const p=this.path[m];!h&&p.options.layoutScroll&&p.scroll&&p!==p.root&&ri(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),ar(p.latestValues)&&ri(d,p.latestValues)}return ar(this.latestValues)&&ri(d,this.latestValues),d}removeTransform(u){const h=lt();dn(h,u);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!ar(m.latestValues))continue;If(m.latestValues)&&m.updateSnapshot();const p=lt(),g=m.measurePageBox();dn(p,g),cv(h,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,p)}return ar(this.latestValues)&&cv(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var w;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==h;if(!(u||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!this.layout||!(p||g))return;this.resolvedRelativeTargetAt=wt.timestamp;const y=this.getClosestProjectingParent();y&&this.linkedParentVersion!==y.layoutVersion&&!y.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(y&&y.layout?this.createRelativeTarget(y,this.layout.layoutBox,y.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=lt(),this.targetWithTransforms=lt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),OA(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):dn(this.target,this.layout.layoutBox),yb(this.target,this.targetDelta)):dn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?this.createRelativeTarget(y,this.target,y.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||If(this.parent.latestValues)||xb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,h,d){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=lt(),this.relativeTargetOrigin=lt(),Sc(this.relativeTargetOrigin,h,d),dn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var _;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let d=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(d=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===wt.timestamp&&(d=!1),d)return;const{layout:m,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||p))return;dn(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;dA(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=lt());const{target:w}=u;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(sv(this.prevProjectionDelta.x,this.projectionDelta.x),sv(this.prevProjectionDelta.y,this.projectionDelta.y)),Ro(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==y||!mv(this.projectionDelta.x,this.prevProjectionDelta.x)||!mv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),u){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ni(),this.projectionDelta=ni(),this.projectionDeltaWithTransform=ni()}setAnimationOrigin(u,h=!1){const d=this.snapshot,m=d?d.latestValues:{},p={...this.latestValues},g=ni();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const y=lt(),w=d?d.source:void 0,_=this.layout?this.layout.source:void 0,C=w!==_,S=this.getStack(),T=!S||S.members.length<=1,N=!!(C&&!T&&this.options.crossfade===!0&&!this.path.some(uD));this.animationProgress=0;let j;this.mixTargetDelta=D=>{const L=D/1e3;_v(g.x,u.x,L),_v(g.y,u.y,L),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Sc(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cD(this.relativeTarget,this.relativeTargetOrigin,y,L),j&&zA(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=lt()),dn(j,this.relativeTarget)),C&&(this.animationValues=p,WA(p,m,this.latestValues,L,N,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var h,d,m;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(m=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||m.stop(),this.pendingAnimation&&(Vs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ue.update(()=>{Kl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=pi(0)),this.currentAnimation=GA(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),u.onUpdate&&u.onUpdate(p)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(XA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:d,layout:m,latestValues:p}=u;if(!(!h||!d||!m)){if(this!==u&&this.layout&&m&&Ob(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||lt();const g=Rt(this.layout.layoutBox.x);d.x.min=u.target.x.min,d.x.max=d.x.min+g;const y=Rt(this.layout.layoutBox.y);d.y.min=u.target.y.min,d.y.max=d.y.min+y}dn(h,d),ri(h,p),Ro(this.projectionDeltaWithTransform,this.layoutCorrected,h,p)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new QA),this.sharedNodes.get(u).add(h);const m=h.options.initialPromotionConfig;h.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var h;const{layoutId:u}=this.options;return u?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:u}=this.options;return u?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:d}=u;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(h=!0),!h)return;const m={};d.z&&kh("z",u,m,this.animationValues);for(let p=0;p<Eh.length;p++)kh(`rotate${Eh[p]}`,u,m,this.animationValues),kh(`skew${Eh[p]}`,u,m,this.animationValues);u.render();for(const p in m)u.setStaticValue(p,m[p]),this.animationValues&&(this.animationValues[p]=m[p]);u.scheduleRender()}applyProjectionStyles(u,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=Yl(h==null?void 0:h.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=Yl(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!ar(this.latestValues)&&(u.transform=d?d({},""):"none",this.hasProjected=!1);return}u.visibility="";const p=m.animationValues||m.latestValues;this.applyTransformsToTarget();let g=VA(this.projectionDeltaWithTransform,this.treeScale,p);d&&(g=d(p,g)),u.transform=g;const{x:y,y:w}=this.projectionDelta;u.transformOrigin=`${y.origin*100}% ${w.origin*100}% 0`,m.animationValues?u.opacity=m===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=m===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const _ in Af){if(p[_]===void 0)continue;const{correct:C,applyTo:S,isCSSVariable:T}=Af[_],N=g==="none"?p[_]:C(p[_],m);if(S){const j=S.length;for(let D=0;D<j;D++)u[S[D]]=N}else T?this.options.visualElement.renderState.vars[_]=N:u[_]=N}this.options.layoutId&&(u.pointerEvents=m===this?Yl(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(yv),this.root.sharedNodes.clear()}}}function JA(t){t.updateLayout()}function eD(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:o}=t.layout,{animationType:l}=t.options,u=e.source!==t.layout.source;l==="size"?Sn(g=>{const y=u?e.measuredBox[g]:e.layoutBox[g],w=Rt(y);y.min=s[g].min,y.max=y.min+w}):Ob(l,e.layoutBox,s)&&Sn(g=>{const y=u?e.measuredBox[g]:e.layoutBox[g],w=Rt(s[g]);y.max=y.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+w)});const h=ni();Ro(h,s,e.layoutBox);const d=ni();u?Ro(d,t.applyTransform(o,!0),e.measuredBox):Ro(d,s,e.layoutBox);const m=!Pb(h);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:w}=g;if(y&&w){const _=lt();Sc(_,e.layoutBox,y.layoutBox);const C=lt();Sc(C,s,w.layoutBox),Ib(_,C)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=_,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:d,layoutDelta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function tD(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function nD(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function sD(t){t.clearSnapshot()}function yv(t){t.clearMeasurements()}function vv(t){t.isLayoutDirty=!1}function rD(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function wv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function iD(t){t.resolveTargetDelta()}function oD(t){t.calcProjection()}function aD(t){t.resetSkewAndRotation()}function lD(t){t.removeLeadSnapshot()}function _v(t,e,n){t.translate=Qe(e.translate,0,n),t.scale=Qe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function bv(t,e,n,s){t.min=Qe(e.min,n.min,s),t.max=Qe(e.max,n.max,s)}function cD(t,e,n,s){bv(t.x,e.x,n.x,s),bv(t.y,e.y,n.y,s)}function uD(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const dD={duration:.45,ease:[.4,0,.1,1]},Nv=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Cv=Nv("applewebkit/")&&!Nv("chrome/")?Math.round:nn;function Sv(t){t.min=Cv(t.min),t.max=Cv(t.max)}function hD(t){Sv(t.x),Sv(t.y)}function Ob(t,e,n){return t==="position"||t==="preserve-aspect"&&!MA(fv(e),fv(n),.2)}function fD(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const mD=Mb({attachResizeListener:(t,e)=>ra(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),Th={current:void 0},Lb=Mb({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Th.current){const t=new mD({});t.mount(window),t.setOptions({layoutScroll:!0}),Th.current=t}return Th.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),tp=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function jv(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function pD(...t){return e=>{let n=!1;const s=t.map(o=>{const l=jv(o,e);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let o=0;o<s.length;o++){const l=s[o];typeof l=="function"?l():jv(t[o],null)}}}}function gD(...t){return k.useCallback(pD(...t),t)}class xD extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const s=n.offsetParent,o=Tf(s)&&s.offsetWidth||0,l=Tf(s)&&s.offsetHeight||0,u=this.props.sizeRef.current;u.height=n.offsetHeight||0,u.width=n.offsetWidth||0,u.top=n.offsetTop,u.left=n.offsetLeft,u.right=o-u.width-u.left,u.bottom=l-u.height-u.top}return null}componentDidUpdate(){}render(){return this.props.children}}function yD({children:t,isPresent:e,anchorX:n,anchorY:s,root:o,pop:l}){var y;const u=k.useId(),h=k.useRef(null),d=k.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:m}=k.useContext(tp),p=((y=t.props)==null?void 0:y.ref)??(t==null?void 0:t.ref),g=gD(h,p);return k.useInsertionEffect(()=>{const{width:w,height:_,top:C,left:S,right:T,bottom:N}=d.current;if(e||l===!1||!h.current||!w||!_)return;const j=n==="left"?`left: ${S}`:`right: ${T}`,D=s==="bottom"?`bottom: ${N}`:`top: ${C}`;h.current.dataset.motionPopId=u;const L=document.createElement("style");m&&(L.nonce=m);const W=o??document.head;return W.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${u}"] {
            position: absolute !important;
            width: ${w}px !important;
            height: ${_}px !important;
            ${j}px !important;
            ${D}px !important;
          }
        `),()=>{W.contains(L)&&W.removeChild(L)}},[e]),a.jsx(xD,{isPresent:e,childRef:h,sizeRef:d,pop:l,children:l===!1?t:k.cloneElement(t,{ref:g})})}const vD=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:o,presenceAffectsLayout:l,mode:u,anchorX:h,anchorY:d,root:m})=>{const p=Em(wD),g=k.useId();let y=!0,w=k.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:n,custom:o,onExitComplete:_=>{p.set(_,!0);for(const C of p.values())if(!C)return;s&&s()},register:_=>(p.set(_,!1),()=>p.delete(_))}),[n,p,s]);return l&&y&&(w={...w}),k.useMemo(()=>{p.forEach((_,C)=>p.set(C,!1))},[n]),k.useEffect(()=>{!n&&!p.size&&s&&s()},[n]),t=a.jsx(yD,{pop:u==="popLayout",isPresent:n,anchorX:h,anchorY:d,root:m,children:t}),a.jsx(Qc.Provider,{value:w,children:t})};function wD(){return new Map}function Fb(t=!0){const e=k.useContext(Qc);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:o}=e,l=k.useId();k.useEffect(()=>{if(t)return o(l)},[t]);const u=k.useCallback(()=>t&&s&&s(l),[l,s,t]);return!n&&s?[!1,u]:[!0]}const Dl=t=>t.key||"";function Ev(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const gi=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:o=!0,mode:l="sync",propagate:u=!1,anchorX:h="left",anchorY:d="top",root:m})=>{const[p,g]=Fb(u),y=k.useMemo(()=>Ev(t),[t]),w=u&&!p?[]:y.map(Dl),_=k.useRef(!0),C=k.useRef(y),S=Em(()=>new Map),T=k.useRef(new Set),[N,j]=k.useState(y),[D,L]=k.useState(y);m_(()=>{_.current=!1,C.current=y;for(let F=0;F<D.length;F++){const X=Dl(D[F]);w.includes(X)?(S.delete(X),T.current.delete(X)):S.get(X)!==!0&&S.set(X,!1)}},[D,w.length,w.join("-")]);const W=[];if(y!==N){let F=[...y];for(let X=0;X<D.length;X++){const ie=D[X],xe=Dl(ie);w.includes(xe)||(F.splice(X,0,ie),W.push(ie))}return l==="wait"&&W.length&&(F=W),L(Ev(F)),j(y),null}const{forceRender:z}=k.useContext(jm);return a.jsx(a.Fragment,{children:D.map(F=>{const X=Dl(F),ie=u&&!p?!1:y===D||w.includes(X),xe=()=>{if(T.current.has(X))return;if(T.current.add(X),S.has(X))S.set(X,!0);else return;let $=!0;S.forEach(le=>{le||($=!1)}),$&&(z==null||z(),L(C.current),u&&(g==null||g()),s&&s())};return a.jsx(vD,{isPresent:ie,initial:!_.current||n?void 0:!1,custom:e,presenceAffectsLayout:o,mode:l,root:m,onExitComplete:ie?void 0:xe,anchorX:h,anchorY:d,children:F},X)})})},Bb=k.createContext({strict:!1}),kv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Tv=!1;function _D(){if(Tv)return;const t={};for(const e in kv)t[e]={isEnabled:n=>kv[e].some(s=>!!n[s])};mb(t),Tv=!0}function zb(){return _D(),aA()}function bD(t){const e=zb();for(const n in t)e[n]={...e[n],...t[n]};mb(e)}const ND=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function jc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ND.has(t)}let Vb=t=>!jc(t);function CD(t){typeof t=="function"&&(Vb=e=>e.startsWith("on")?!jc(e):t(e))}try{CD(require("@emotion/is-prop-valid").default)}catch{}function SD(t,e,n){const s={};for(const o in t)o==="values"&&typeof t.values=="object"||(Vb(o)||n===!0&&jc(o)||!e&&!jc(o)||t.draggable&&o.startsWith("onDrag"))&&(s[o]=t[o]);return s}const Jc=k.createContext({});function jD(t,e){if(Zc(t)){const{initial:n,animate:s}=t;return{initial:n===!1||sa(n)?n:void 0,animate:sa(s)?s:void 0}}return t.inherit!==!1?e:{}}function ED(t){const{initial:e,animate:n}=jD(t,k.useContext(Jc));return k.useMemo(()=>({initial:e,animate:n}),[Pv(e),Pv(n)])}function Pv(t){return Array.isArray(t)?t.join(" "):t}const np=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ub(t,e,n){for(const s in e)!Et(e[s])&&!_b(s,n)&&(t[s]=e[s])}function kD({transformTemplate:t},e){return k.useMemo(()=>{const n=np();return Jm(n,e,t),Object.assign({},n.vars,n.style)},[e])}function TD(t,e){const n=t.style||{},s={};return Ub(s,n,t),Object.assign(s,kD(t,e)),s}function PD(t,e){const n={},s=TD(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const Wb=()=>({...np(),attrs:{}});function ID(t,e,n,s){const o=k.useMemo(()=>{const l=Wb();return bb(l,e,Cb(s),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};Ub(l,t.style,t),o.style={...l,...o.style}}return o}const RD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function sp(t){return typeof t!="string"||t.includes("-")?!1:!!(RD.indexOf(t)>-1||/[A-Z]/u.test(t))}function AD(t,e,n,{latestValues:s},o,l=!1,u){const d=(u??sp(t)?ID:PD)(e,s,o,t),m=SD(e,typeof t=="string",l),p=t!==k.Fragment?{...m,...d,ref:n}:{},{children:g}=e,y=k.useMemo(()=>Et(g)?g.get():g,[g]);return k.createElement(t,{...p,children:y})}function DD({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,o){return{latestValues:MD(n,s,o,t),renderState:e()}}function MD(t,e,n,s){const o={},l=s(t,{});for(const y in l)o[y]=Yl(l[y]);let{initial:u,animate:h}=t;const d=Zc(t),m=hb(t);e&&m&&!d&&t.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let p=n?n.initial===!1:!1;p=p||u===!1;const g=p?h:u;if(g&&typeof g!="boolean"&&!Xc(g)){const y=Array.isArray(g)?g:[g];for(let w=0;w<y.length;w++){const _=Hm(t,y[w]);if(_){const{transitionEnd:C,transition:S,...T}=_;for(const N in T){let j=T[N];if(Array.isArray(j)){const D=p?j.length-1:0;j=j[D]}j!==null&&(o[N]=j)}for(const N in C)o[N]=C[N]}}}return o}const $b=t=>(e,n)=>{const s=k.useContext(Jc),o=k.useContext(Qc),l=()=>DD(t,e,s,o);return n?l():Em(l)},OD=$b({scrapeMotionValuesFromProps:ep,createRenderState:np}),LD=$b({scrapeMotionValuesFromProps:Sb,createRenderState:Wb}),FD=Symbol.for("motionComponentSymbol");function BD(t,e,n){const s=k.useRef(n);k.useInsertionEffect(()=>{s.current=n});const o=k.useRef(null);return k.useCallback(l=>{var h;l&&((h=t.onMount)==null||h.call(t,l)),e&&(l?e.mount(l):e.unmount());const u=s.current;if(typeof u=="function")if(l){const d=u(l);typeof d=="function"&&(o.current=d)}else o.current?(o.current(),o.current=null):u(l);else u&&(u.current=l)},[e])}const Hb=k.createContext({});function Zr(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function zD(t,e,n,s,o,l){var j,D;const{visualElement:u}=k.useContext(Jc),h=k.useContext(Bb),d=k.useContext(Qc),m=k.useContext(tp),p=m.reducedMotion,g=m.skipAnimations,y=k.useRef(null),w=k.useRef(!1);s=s||h.renderer,!y.current&&s&&(y.current=s(t,{visualState:e,parent:u,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:p,skipAnimations:g,isSVG:l}),w.current&&y.current&&(y.current.manuallyAnimateOnMount=!0));const _=y.current,C=k.useContext(Hb);_&&!_.projection&&o&&(_.type==="html"||_.type==="svg")&&VD(y.current,n,o,C);const S=k.useRef(!1);k.useInsertionEffect(()=>{_&&S.current&&_.update(n,d)});const T=n[J_],N=k.useRef(!!T&&!((j=window.MotionHandoffIsComplete)!=null&&j.call(window,T))&&((D=window.MotionHasOptimisedAnimation)==null?void 0:D.call(window,T)));return m_(()=>{w.current=!0,_&&(S.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),_.scheduleRenderMicrotask(),N.current&&_.animationState&&_.animationState.animateChanges())}),k.useEffect(()=>{_&&(!N.current&&_.animationState&&_.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var L;(L=window.MotionHandoffMarkAsComplete)==null||L.call(window,T)}),N.current=!1),_.enteringChildren=void 0)}),_}function VD(t,e,n,s){const{layoutId:o,layout:l,drag:u,dragConstraints:h,layoutScroll:d,layoutRoot:m,layoutCrossfade:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Gb(t.parent)),t.projection.setOptions({layoutId:o,layout:l,alwaysMeasureLayout:!!u||h&&Zr(h),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,crossfade:p,layoutScroll:d,layoutRoot:m})}function Gb(t){if(t)return t.options.allowProjection!==!1?t.projection:Gb(t.parent)}function Ph(t,{forwardMotionProps:e=!1,type:n}={},s,o){s&&bD(s);const l=n?n==="svg":sp(t),u=l?LD:OD;function h(m,p){let g;const y={...k.useContext(tp),...m,layoutId:UD(m)},{isStatic:w}=y,_=ED(m),C=u(m,w);if(!w&&f_){WD();const S=$D(y);g=S.MeasureLayout,_.visualElement=zD(t,C,y,o,S.ProjectionNode,l)}return a.jsxs(Jc.Provider,{value:_,children:[g&&_.visualElement?a.jsx(g,{visualElement:_.visualElement,...y}):null,AD(t,m,BD(C,_.visualElement,p),C,w,e,l)]})}h.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const d=k.forwardRef(h);return d[FD]=t,d}function UD({layoutId:t}){const e=k.useContext(jm).id;return e&&t!==void 0?e+"-"+t:t}function WD(t,e){k.useContext(Bb).strict}function $D(t){const e=zb(),{drag:n,layout:s}=e;if(!n&&!s)return{};const o={...n,...s};return{MeasureLayout:n!=null&&n.isEnabled(t)||s!=null&&s.isEnabled(t)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function HD(t,e){if(typeof Proxy>"u")return Ph;const n=new Map,s=(l,u)=>Ph(l,u,t,e),o=(l,u)=>s(l,u);return new Proxy(o,{get:(l,u)=>u==="create"?s:(n.has(u)||n.set(u,Ph(u,void 0,t,e)),n.get(u))})}const GD=(t,e)=>e.isSVG??sp(t)?new CA(e):new yA(e,{allowProjection:t!==k.Fragment});class YD extends Ws{constructor(e){super(e),e.animationState||(e.animationState=TA(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Xc(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let KD=0;class qD extends Ws{constructor(){super(...arguments),this.id=KD++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const QD={animation:{Feature:YD},exit:{Feature:qD}};function ga(t){return{point:{x:t.pageX,y:t.pageY}}}const XD=t=>e=>qm(e)&&t(e,ga(e));function Ao(t,e,n,s){return ra(t,e,XD(n),s)}const Yb=({current:t})=>t?t.ownerDocument.defaultView:null,Iv=(t,e)=>Math.abs(t-e);function ZD(t,e){const n=Iv(t.x,e.x),s=Iv(t.y,e.y);return Math.sqrt(n**2+s**2)}const Rv=new Set(["auto","scroll"]);class Kb{constructor(e,n,{transformPagePoint:s,contextWindow:o=window,dragSnapToOrigin:l=!1,distanceThreshold:u=3,element:h}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=w=>{this.handleScroll(w.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Rh(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,C=ZD(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!C)return;const{point:S}=w,{timestamp:T}=wt;this.history.push({...S,timestamp:T});const{onStart:N,onMove:j}=this.handlers;_||(N&&N(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,w)},this.handlePointerMove=(w,_)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=Ih(_,this.transformPagePoint),Ue.update(this.updatePoint,!0)},this.handlePointerUp=(w,_)=>{this.end();const{onEnd:C,onSessionEnd:S,resumeAnimation:T}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Rh(w.type==="pointercancel"?this.lastMoveEventInfo:Ih(_,this.transformPagePoint),this.history);this.startEvent&&C&&C(w,N),S&&S(w,N)},!qm(e))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=u,this.contextWindow=o||window;const d=ga(e),m=Ih(d,this.transformPagePoint),{point:p}=m,{timestamp:g}=wt;this.history=[{...p,timestamp:g}];const{onSessionStart:y}=n;y&&y(e,Rh(m,this.history)),this.removeListeners=fa(Ao(this.contextWindow,"pointermove",this.handlePointerMove),Ao(this.contextWindow,"pointerup",this.handlePointerUp),Ao(this.contextWindow,"pointercancel",this.handlePointerUp)),h&&this.startScrollTracking(h)}startScrollTracking(e){let n=e.parentElement;for(;n;){const s=getComputedStyle(n);(Rv.has(s.overflowX)||Rv.has(s.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const s=e===window,o=s?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},l={x:o.x-n.x,y:o.y-n.y};l.x===0&&l.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=l.x,this.lastMoveEventInfo.point.y+=l.y):this.history.length>0&&(this.history[0].x-=l.x,this.history[0].y-=l.y),this.scrollPositions.set(e,o),Ue.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Vs(this.updatePoint)}}function Ih(t,e){return e?{point:e(t.point)}:t}function Av(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Rh({point:t},e){return{point:t,delta:Av(t,qb(e)),offset:Av(t,JD(e)),velocity:eM(e,.1)}}function JD(t){return t[0]}function qb(t){return t[t.length-1]}function eM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const o=qb(t);for(;n>=0&&(s=t[n],!(o.timestamp-s.timestamp>yn(e)));)n--;if(!s)return{x:0,y:0};s===t[0]&&t.length>2&&o.timestamp-s.timestamp>yn(e)*2&&(s=t[1]);const l=tn(o.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const u={x:(o.x-s.x)/l,y:(o.y-s.y)/l};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function tM(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?Qe(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?Qe(n,t,s.max):Math.min(t,n)),t}function Dv(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function nM(t,{top:e,left:n,bottom:s,right:o}){return{x:Dv(t.x,n,o),y:Dv(t.y,e,s)}}function Mv(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function sM(t,e){return{x:Mv(t.x,e.x),y:Mv(t.y,e.y)}}function rM(t,e){let n=.5;const s=Rt(t),o=Rt(e);return o>s?n=ea(e.min,e.max-s,t.min):s>o&&(n=ea(t.min,t.max-o,e.min)),An(0,1,n)}function iM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Df=.35;function oM(t=Df){return t===!1?t=0:t===!0&&(t=Df),{x:Ov(t,"left","right"),y:Ov(t,"top","bottom")}}function Ov(t,e,n){return{min:Lv(t,e),max:Lv(t,n)}}function Lv(t,e){return typeof t=="number"?t:t[e]||0}const aM=new WeakMap;class lM{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=lt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const l=g=>{n&&this.snapToCursor(ga(g).point),this.stopAnimation()},u=(g,y)=>{const{drag:w,dragPropagation:_,onDragStart:C}=this.getProps();if(w&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=LR(w),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Sn(T=>{let N=this.getAxisMotionValue(T).get()||0;if(Tn.test(N)){const{projection:j}=this.visualElement;if(j&&j.layout){const D=j.layout.layoutBox[T];D&&(N=Rt(D)*(parseFloat(N)/100))}}this.originPoint[T]=N}),C&&Ue.update(()=>C(g,y),!1,!0),jf(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},h=(g,y)=>{this.latestPointerEvent=g,this.latestPanInfo=y;const{dragPropagation:w,dragDirectionLock:_,onDirectionLock:C,onDrag:S}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:T}=y;if(_&&this.currentDirection===null){this.currentDirection=uM(T),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",y.point,T),this.updateAxis("y",y.point,T),this.visualElement.render(),S&&Ue.update(()=>S(g,y),!1,!0)},d=(g,y)=>{this.latestPointerEvent=g,this.latestPanInfo=y,this.stop(g,y),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>{const{dragSnapToOrigin:g}=this.getProps();(g||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:p}=this.getProps();this.panSession=new Kb(e,{onSessionStart:l,onStart:u,onMove:h,onSessionEnd:d,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:s,contextWindow:Yb(this.visualElement),element:this.visualElement.current})}stop(e,n){const s=e||this.latestPointerEvent,o=n||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!o||!s)return;const{velocity:u}=o;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&Ue.postRender(()=>h(s,o))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,s){const{drag:o}=this.getProps();if(!s||!Ml(e,o,this.currentDirection))return;const l=this.getAxisMotionValue(e);let u=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(u=tM(u,this.constraints[e],this.elastic[e])),l.set(u)}resolveConstraints(){var l;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,o=this.constraints;e&&Zr(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=nM(s.layoutBox,e):this.constraints=!1,this.elastic=oM(n),o!==this.constraints&&!Zr(e)&&s&&this.constraints&&!this.hasMutatedConstraints&&Sn(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=iM(s.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Zr(e))return!1;const s=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const l=hA(s,o.root,this.visualElement.getTransformPagePoint());let u=sM(o.layout.layoutBox,l);if(n){const h=n(cA(u));this.hasMutatedConstraints=!!h,h&&(u=gb(h))}return u}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:o,dragTransition:l,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),d=this.constraints||{},m=Sn(p=>{if(!Ml(p,n,this.currentDirection))return;let g=d&&d[p]||{};u&&(g={min:0,max:0});const y=o?200:1e6,w=o?40:1e7,_={type:"inertia",velocity:s?e[p]:0,bounceStiffness:y,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...l,...g};return this.startAxisValueAnimation(p,_)});return Promise.all(m).then(h)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return jf(this.visualElement,e),s.start($m(e,s,0,n,this.visualElement,!1))}stopAnimation(){Sn(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),o=s[n];return o||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Sn(n=>{const{drag:s}=this.getProps();if(!Ml(n,s,this.currentDirection))return;const{projection:o}=this.visualElement,l=this.getAxisMotionValue(n);if(o&&o.layout){const{min:u,max:h}=o.layout.layoutBox[n],d=l.get()||0;l.set(e[n]-Qe(u,h,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Zr(n)||!s||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Sn(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const d=h.get();o[u]=rM({min:d,max:d},this.constraints[u])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.constraints=!1,this.resolveConstraints(),Sn(u=>{if(!Ml(u,e,null))return;const h=this.getAxisMotionValue(u),{min:d,max:m}=this.constraints[u];h.set(Qe(d,m,o[u]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;aM.set(this.visualElement,this);const e=this.visualElement.current,n=Ao(e,"pointerdown",m=>{const{drag:p,dragListener:g=!0}=this.getProps(),y=m.target,w=y!==e&&WR(y);p&&g&&!w&&this.start(m)});let s;const o=()=>{const{dragConstraints:m}=this.getProps();Zr(m)&&m.current&&(this.constraints=this.resolveRefConstraints(),s||(s=cM(e,m.current,()=>this.scalePositionWithinConstraints())))},{projection:l}=this.visualElement,u=l.addEventListener("measure",o);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),Ue.read(o);const h=ra(window,"resize",()=>this.scalePositionWithinConstraints()),d=l.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:p})=>{this.isDragging&&p&&(Sn(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=m[g].translate,y.set(y.get()+m[g].translate))}),this.visualElement.render())}));return()=>{h(),n(),u(),d&&d(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:o=!1,dragConstraints:l=!1,dragElastic:u=Df,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:o,dragConstraints:l,dragElastic:u,dragMomentum:h}}}function Fv(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function cM(t,e,n){const s=Hy(t,Fv(n)),o=Hy(e,Fv(n));return()=>{s(),o()}}function Ml(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function uM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class dM extends Ws{constructor(e){super(e),this.removeGroupControls=nn,this.removeListeners=nn,this.controls=new lM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||nn}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const Ah=t=>(e,n)=>{t&&Ue.update(()=>t(e,n),!1,!0)};class hM extends Ws{constructor(){super(...arguments),this.removePointerDownListener=nn}onPointerDown(e){this.session=new Kb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Yb(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:o}=this.node.getProps();return{onSessionStart:Ah(e),onStart:Ah(n),onMove:Ah(s),onEnd:(l,u)=>{delete this.session,o&&Ue.postRender(()=>o(l,u))}}}mount(){this.removePointerDownListener=Ao(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Dh=!1;class fM extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:o}=this.props,{projection:l}=e;l&&(n.group&&n.group.add(l),s&&s.register&&o&&s.register(l),Dh&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Kl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:o,isPresent:l}=this.props,{projection:u}=s;return u&&(u.isPresent=l,e.layoutDependency!==n&&u.setOptions({...u.options,layoutDependency:n}),Dh=!0,o||e.layoutDependency!==n||n===void 0||e.isPresent!==l?u.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?u.promote():u.relegate()||Ue.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Km.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:o}=e;Dh=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),s&&s.deregister&&s.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Qb(t){const[e,n]=Fb(),s=k.useContext(jm);return a.jsx(fM,{...t,layoutGroup:s,switchLayoutGroup:k.useContext(Hb),isPresent:e,safeToRemove:n})}const mM={pan:{Feature:hM},drag:{Feature:dM,ProjectionNode:Lb,MeasureLayout:Qb}};function Bv(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,l=s[o];l&&Ue.postRender(()=>l(e,ga(e)))}class pM extends Ws{mount(){const{current:e}=this.node;e&&(this.unmount=BR(e,(n,s)=>(Bv(this.node,s,"Start"),o=>Bv(this.node,o,"End"))))}unmount(){}}class gM extends Ws{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=fa(ra(this.node.current,"focus",()=>this.onFocus()),ra(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function zv(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),l=s[o];l&&Ue.postRender(()=>l(e,ga(e)))}class xM extends Ws{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:s}=this.node.props;this.unmount=HR(e,(o,l)=>(zv(this.node,l,"Start"),(u,{success:h})=>zv(this.node,u,h?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(s==null?void 0:s.tap)===!1})}unmount(){}}const Mf=new WeakMap,Mh=new WeakMap,yM=t=>{const e=Mf.get(t.target);e&&e(t)},vM=t=>{t.forEach(yM)};function wM({root:t,...e}){const n=t||document;Mh.has(n)||Mh.set(n,{});const s=Mh.get(n),o=JSON.stringify(e);return s[o]||(s[o]=new IntersectionObserver(vM,{root:t,...e})),s[o]}function _M(t,e,n){const s=wM(e);return Mf.set(t,n),s.observe(t),()=>{Mf.delete(t),s.unobserve(t)}}const bM={some:0,all:1};class NM extends Ws{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:o="some",once:l}=e,u={root:n?n.current:void 0,rootMargin:s,threshold:typeof o=="number"?o:bM[o]},h=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),y=m?p:g;y&&y(d)};return _M(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(CM(e,n))&&this.startObserver()}unmount(){}}function CM({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const SM={inView:{Feature:NM},tap:{Feature:xM},focus:{Feature:gM},hover:{Feature:pM}},jM={layout:{ProjectionNode:Lb,MeasureLayout:Qb}},EM={...QD,...SM,...mM,...jM},je=HD(EM,GD),Vv="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' fill='%231a1a2e'%3E%3Crect width='400' height='400'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%23555' font-family='sans-serif' font-size='16'%3ENo Image%3C/text%3E%3C/svg%3E",kM={initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6}};function TM(){const{products:t}=Ie(),e=t.filter(n=>n.featured).slice(0,4);return a.jsxs("div",{className:"min-h-screen bg-surface-950",children:[a.jsx(Yt,{}),a.jsxs("section",{className:"relative min-h-screen flex items-center overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-brand-500/20 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/3 right-1/4 w-80 h-80 bg-accent-400/15 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute top-1/2 right-1/3 w-64 h-64 bg-candy-lavender/10 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-72 h-72 bg-candy-lemon/10 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute top-0 left-0 right-0 h-full bg-[radial-gradient(ellipse_at_center,_transparent_0%,_#120B0F_70%)]"})]}),a.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 pt-24 pb-16",children:a.jsxs(je.div,{className:"text-center max-w-4xl mx-auto",...kM,children:[a.jsx("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-brand-500/10 border border-brand-500/20 text-brand-400 text-sm font-medium mb-8",children:" Sweet Treats & Wellness Goodies"}),a.jsxs("h1",{className:"font-display text-5xl sm:text-7xl lg:text-8xl font-bold leading-[0.9] mb-6",children:[a.jsx("span",{className:"gradient-text",children:"COUCH"}),a.jsx("br",{}),a.jsx("span",{className:"text-white",children:"BUDDIES"})]}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-2xl mx-auto mb-10 leading-relaxed",children:"Your favorite candy shop meets wellness. Premium CBD gummies, sweet treats, and herbal goodies  made to help you relax and enjoy the vibe."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[a.jsxs(Ce,{to:"/shop",className:"btn-primary text-lg px-8 py-4 flex items-center gap-2 group",children:[" Shop Treats ",a.jsx(Vl,{className:"group-hover:translate-x-1 transition-transform"})]}),a.jsx(Ce,{to:"/auth",className:"btn-secondary text-lg px-8 py-4",children:"Join The Sweet Side"})]})]})})]}),a.jsx("section",{className:"py-20 relative",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"font-display text-3xl sm:text-4xl font-bold mb-4",children:" Hot Picks"}),a.jsx("p",{className:"text-gray-400 max-w-lg mx-auto",children:"Our sweetest sellers. Grab them before they melt away."})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map((n,s)=>{var o;return a.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:s*.1},children:a.jsx(Ce,{to:`/product/${n.id}`,className:"group block",children:a.jsxs("div",{className:"glass-card p-0 overflow-hidden hover:border-brand-500/30 transition-all duration-300 hover:-translate-y-1",children:[a.jsx("div",{className:"aspect-square overflow-hidden bg-surface-800",children:a.jsx("img",{src:((o=n.images)==null?void 0:o[0])||Vv,alt:n.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",loading:"lazy",referrerPolicy:"no-referrer",onError:l=>{l.target.dataset.fallback||(l.target.dataset.fallback="1",l.target.src=Vv)}})}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-white group-hover:text-brand-400 transition-colors line-clamp-1",children:n.name}),a.jsxs("p",{className:"text-brand-400 font-bold text-lg mt-1",children:["$",n.price.toFixed(2)]})]})]})})},n.id)})}),a.jsx("div",{className:"text-center mt-10",children:a.jsxs(Ce,{to:"/shop",className:"btn-secondary inline-flex items-center gap-2",children:["View All Goodies ",a.jsx(Vl,{})]})})]})}),a.jsx("section",{className:"py-20 border-t border-white/5",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[{icon:kn,title:"Fast Delivery",desc:"Free shipping on orders over $75. Same-day local delivery so your treats arrive fresh."},{icon:h_,title:"Lab Tested & Safe",desc:"All CBD products are third-party lab tested. Multiple payment options: CashApp, PayPal, Zelle, Crypto."},{icon:l_,title:"Made With Love",desc:"Small-batch, hand-crafted goodies. Premium ingredients, natural flavors, real wellness benefits."}].map((n,s)=>a.jsxs("div",{className:"glass-card text-center hover:border-brand-500/20 transition-all",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl gradient-brand flex items-center justify-center mx-auto mb-4",children:a.jsx(n.icon,{size:24})}),a.jsx("h3",{className:"font-semibold text-lg mb-2",children:n.title}),a.jsx("p",{className:"text-gray-400 text-sm",children:n.desc})]},s))})})}),a.jsx("section",{className:"py-20",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:a.jsxs("div",{className:"glass-card text-center py-16 glow-brand relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-500/10 to-accent-600/10"}),a.jsxs("div",{className:"relative",children:[a.jsx("h2",{className:"font-display text-3xl sm:text-4xl font-bold mb-4",children:" Get Your Sugar Fix"}),a.jsx("p",{className:"text-gray-400 max-w-lg mx-auto mb-8",children:"Join the Couch Buddies fam for exclusive flavors, early drops, and sweet rewards. Track your orders and earn points with every treat."}),a.jsxs(Ce,{to:"/auth",className:"btn-primary text-lg px-8 py-4 inline-flex items-center gap-2",children:["Get Started ",a.jsx(Vl,{})]})]})]})})}),a.jsx(Rn,{})]})}const Ol="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' fill='%231a1a2e'%3E%3Crect width='400' height='400'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%23555' font-family='sans-serif' font-size='16'%3ENo Image%3C/text%3E%3C/svg%3E";function PM(){const{products:t}=Ie(),[e,n]=k.useState(""),[s,o]=k.useState("All"),[l,u]=k.useState("featured"),[h,d]=k.useState("grid"),m=["All",...new Set(t.map(g=>g.category))],p=k.useMemo(()=>{let g=[...t];switch(s!=="All"&&(g=g.filter(y=>y.category===s)),e&&(g=g.filter(y=>y.name.toLowerCase().includes(e.toLowerCase())||y.description.toLowerCase().includes(e.toLowerCase()))),l){case"price-low":g.sort((y,w)=>y.price-w.price);break;case"price-high":g.sort((y,w)=>w.price-y.price);break;case"newest":g.sort((y,w)=>new Date(w.createdAt)-new Date(y.createdAt));break;case"featured":g.sort((y,w)=>(w.featured?1:0)-(y.featured?1:0));break}return g},[t,s,e,l]);return a.jsxs("div",{className:"min-h-screen bg-surface-950",children:[a.jsx(Yt,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 pt-24 pb-16",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"font-display text-3xl sm:text-4xl font-bold mb-2",children:" Sweet Shop"}),a.jsx("p",{className:"text-gray-400",children:"Browse our full collection of CBD treats, candy goodies & herbal wellness products"})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-8",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(qc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:18}),a.jsx("input",{type:"text",placeholder:"Search products...",value:e,onChange:g=>n(g.target.value),className:"input-field pl-11"})]}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:m.map(g=>a.jsx("button",{onClick:()=>o(g),className:`px-4 py-2.5 rounded-xl text-sm font-medium transition-all ${s===g?"gradient-brand text-white shadow-lg shadow-brand-500/25":"bg-white/5 text-gray-400 hover:text-white hover:bg-white/10 border border-white/10"}`,children:g},g))})]}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("p",{className:"text-gray-400 text-sm",children:[p.length," products"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("select",{value:l,onChange:g=>u(g.target.value),className:"input-field w-auto text-sm py-2",children:[a.jsx("option",{value:"featured",children:"Featured"}),a.jsx("option",{value:"newest",children:"Newest"}),a.jsx("option",{value:"price-low",children:"Price: Low to High"}),a.jsx("option",{value:"price-high",children:"Price: High to Low"})]}),a.jsxs("div",{className:"hidden sm:flex gap-1 bg-white/5 rounded-xl p-1 border border-white/10",children:[a.jsx("button",{onClick:()=>d("grid"),className:`p-2 rounded-lg transition-all ${h==="grid"?"bg-white/10 text-white":"text-gray-400"}`,children:a.jsx(Yc,{size:16})}),a.jsx("button",{onClick:()=>d("list"),className:`p-2 rounded-lg transition-all ${h==="list"?"bg-white/10 text-white":"text-gray-400"}`,children:a.jsx(c_,{size:16})})]})]})]}),h==="grid"?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:p.map((g,y)=>{var w;return a.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:y*.05},children:a.jsx(Ce,{to:`/product/${g.id}`,className:"group block",children:a.jsxs("div",{className:"glass-card p-0 overflow-hidden hover:border-brand-500/30 transition-all duration-300 hover:-translate-y-1",children:[a.jsxs("div",{className:"aspect-square overflow-hidden bg-surface-800 relative",children:[a.jsx("img",{src:((w=g.images)==null?void 0:w[0])||Ol,alt:g.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",loading:"lazy",referrerPolicy:"no-referrer",onError:_=>{_.target.dataset.fallback||(_.target.dataset.fallback="1",_.target.src=Ol)}}),g.featured&&a.jsx("span",{className:"absolute top-3 left-3 badge-brand",children:"Featured"}),g.stock<20&&a.jsx("span",{className:"absolute top-3 right-3 badge-danger",children:"Low Stock"})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:g.category}),a.jsx("h3",{className:"font-semibold text-white group-hover:text-brand-400 transition-colors line-clamp-1",children:g.name}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsxs("p",{className:"text-brand-400 font-bold text-lg",children:["$",g.price.toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-500",children:[g.stock," in stock"]})]})]})]})})},g.id)})}):a.jsx("div",{className:"space-y-4",children:p.map((g,y)=>{var w;return a.jsx(je.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:y*.05},children:a.jsx(Ce,{to:`/product/${g.id}`,className:"group block",children:a.jsxs("div",{className:"glass-card p-0 overflow-hidden hover:border-brand-500/30 transition-all flex",children:[a.jsx("div",{className:"w-32 h-32 sm:w-40 sm:h-40 flex-shrink-0 overflow-hidden bg-surface-800",children:a.jsx("img",{src:((w=g.images)==null?void 0:w[0])||Ol,alt:g.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",referrerPolicy:"no-referrer",onError:_=>{_.target.dataset.fallback||(_.target.dataset.fallback="1",_.target.src=Ol)}})}),a.jsxs("div",{className:"p-4 flex-1 flex flex-col justify-center",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:g.category}),a.jsx("h3",{className:"font-semibold text-white group-hover:text-brand-400 transition-colors",children:g.name}),a.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mt-1",children:g.description}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsxs("p",{className:"text-brand-400 font-bold text-lg",children:["$",g.price.toFixed(2)]}),g.featured&&a.jsx("span",{className:"badge-brand",children:"Featured"})]})]})]})})},g.id)})}),p.length===0&&a.jsxs("div",{className:"text-center py-20",children:[a.jsx("p",{className:"text-gray-400 text-lg",children:"No products found"}),a.jsx("button",{onClick:()=>{n(""),o("All")},className:"btn-secondary mt-4",children:"Clear Filters"})]})]}),a.jsx(Rn,{})]})}let IM={data:""},RM=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||IM},AM=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,DM=/\/\*[^]*?\*\/|  +/g,Uv=/\n+/g,Es=(t,e)=>{let n="",s="",o="";for(let l in t){let u=t[l];l[0]=="@"?l[1]=="i"?n=l+" "+u+";":s+=l[1]=="f"?Es(u,l):l+"{"+Es(u,l[1]=="k"?"":e)+"}":typeof u=="object"?s+=Es(u,e?e.replace(/([^,])+/g,h=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,h):h?h+" "+d:d)):l):u!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Es.p?Es.p(l,u):l+":"+u+";")}return n+(e&&o?e+"{"+o+"}":o)+s},Gn={},Xb=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+Xb(t[n]);return e}return t},MM=(t,e,n,s,o)=>{let l=Xb(t),u=Gn[l]||(Gn[l]=(d=>{let m=0,p=11;for(;m<d.length;)p=101*p+d.charCodeAt(m++)>>>0;return"go"+p})(l));if(!Gn[u]){let d=l!==t?t:(m=>{let p,g,y=[{}];for(;p=AM.exec(m.replace(DM,""));)p[4]?y.shift():p[3]?(g=p[3].replace(Uv," ").trim(),y.unshift(y[0][g]=y[0][g]||{})):y[0][p[1]]=p[2].replace(Uv," ").trim();return y[0]})(t);Gn[u]=Es(o?{["@keyframes "+u]:d}:d,n?"":"."+u)}let h=n&&Gn.g?Gn.g:null;return n&&(Gn.g=Gn[u]),((d,m,p,g)=>{g?m.data=m.data.replace(g,d):m.data.indexOf(d)===-1&&(m.data=p?d+m.data:m.data+d)})(Gn[u],e,s,h),u},OM=(t,e,n)=>t.reduce((s,o,l)=>{let u=e[l];if(u&&u.call){let h=u(n),d=h&&h.props&&h.props.className||/^go/.test(h)&&h;u=d?"."+d:h&&typeof h=="object"?h.props?"":Es(h,""):h===!1?"":h}return s+o+(u??"")},"");function eu(t){let e=this||{},n=t.call?t(e.p):t;return MM(n.unshift?n.raw?OM(n,[].slice.call(arguments,1),e.p):n.reduce((s,o)=>Object.assign(s,o&&o.call?o(e.p):o),{}):n,RM(e.target),e.g,e.o,e.k)}let Zb,Of,Lf;eu.bind({g:1});let ts=eu.bind({k:1});function LM(t,e,n,s){Es.p=e,Zb=t,Of=n,Lf=s}function $s(t,e){let n=this||{};return function(){let s=arguments;function o(l,u){let h=Object.assign({},l),d=h.className||o.className;n.p=Object.assign({theme:Of&&Of()},h),n.o=/ *go\d+/.test(d),h.className=eu.apply(n,s)+(d?" "+d:"");let m=t;return t[0]&&(m=h.as||t,delete h.as),Lf&&m[0]&&Lf(h),Zb(m,h)}return o}}var FM=t=>typeof t=="function",Ec=(t,e)=>FM(t)?t(e):t,BM=(()=>{let t=0;return()=>(++t).toString()})(),Jb=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),zM=20,rp="default",eN=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(u=>u.id===e.toast.id?{...u,...e.toast}:u)};case 2:let{toast:s}=e;return eN(t,{type:t.toasts.find(u=>u.id===s.id)?1:0,toast:s});case 3:let{toastId:o}=e;return{...t,toasts:t.toasts.map(u=>u.id===o||o===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(u=>u.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let l=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+l}))}}},ql=[],tN={toasts:[],pausedAt:void 0,settings:{toastLimit:zM}},jn={},nN=(t,e=rp)=>{jn[e]=eN(jn[e]||tN,t),ql.forEach(([n,s])=>{n===e&&s(jn[e])})},sN=t=>Object.keys(jn).forEach(e=>nN(t,e)),VM=t=>Object.keys(jn).find(e=>jn[e].toasts.some(n=>n.id===t)),tu=(t=rp)=>e=>{nN(e,t)},UM={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},WM=(t={},e=rp)=>{let[n,s]=k.useState(jn[e]||tN),o=k.useRef(jn[e]);k.useEffect(()=>(o.current!==jn[e]&&s(jn[e]),ql.push([e,s]),()=>{let u=ql.findIndex(([h])=>h===e);u>-1&&ql.splice(u,1)}),[e]);let l=n.toasts.map(u=>{var h,d,m;return{...t,...t[u.type],...u,removeDelay:u.removeDelay||((h=t[u.type])==null?void 0:h.removeDelay)||(t==null?void 0:t.removeDelay),duration:u.duration||((d=t[u.type])==null?void 0:d.duration)||(t==null?void 0:t.duration)||UM[u.type],style:{...t.style,...(m=t[u.type])==null?void 0:m.style,...u.style}}});return{...n,toasts:l}},$M=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||BM()}),xa=t=>(e,n)=>{let s=$M(e,t,n);return tu(s.toasterId||VM(s.id))({type:2,toast:s}),s.id},ct=(t,e)=>xa("blank")(t,e);ct.error=xa("error");ct.success=xa("success");ct.loading=xa("loading");ct.custom=xa("custom");ct.dismiss=(t,e)=>{let n={type:3,toastId:t};e?tu(e)(n):sN(n)};ct.dismissAll=t=>ct.dismiss(void 0,t);ct.remove=(t,e)=>{let n={type:4,toastId:t};e?tu(e)(n):sN(n)};ct.removeAll=t=>ct.remove(void 0,t);ct.promise=(t,e,n)=>{let s=ct.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(o=>{let l=e.success?Ec(e.success,o):void 0;return l?ct.success(l,{id:s,...n,...n==null?void 0:n.success}):ct.dismiss(s),o}).catch(o=>{let l=e.error?Ec(e.error,o):void 0;l?ct.error(l,{id:s,...n,...n==null?void 0:n.error}):ct.dismiss(s)}),t};var HM=1e3,GM=(t,e="default")=>{let{toasts:n,pausedAt:s}=WM(t,e),o=k.useRef(new Map).current,l=k.useCallback((g,y=HM)=>{if(o.has(g))return;let w=setTimeout(()=>{o.delete(g),u({type:4,toastId:g})},y);o.set(g,w)},[]);k.useEffect(()=>{if(s)return;let g=Date.now(),y=n.map(w=>{if(w.duration===1/0)return;let _=(w.duration||0)+w.pauseDuration-(g-w.createdAt);if(_<0){w.visible&&ct.dismiss(w.id);return}return setTimeout(()=>ct.dismiss(w.id,e),_)});return()=>{y.forEach(w=>w&&clearTimeout(w))}},[n,s,e]);let u=k.useCallback(tu(e),[e]),h=k.useCallback(()=>{u({type:5,time:Date.now()})},[u]),d=k.useCallback((g,y)=>{u({type:1,toast:{id:g,height:y}})},[u]),m=k.useCallback(()=>{s&&u({type:6,time:Date.now()})},[s,u]),p=k.useCallback((g,y)=>{let{reverseOrder:w=!1,gutter:_=8,defaultPosition:C}=y||{},S=n.filter(j=>(j.position||C)===(g.position||C)&&j.height),T=S.findIndex(j=>j.id===g.id),N=S.filter((j,D)=>D<T&&j.visible).length;return S.filter(j=>j.visible).slice(...w?[N+1]:[0,N]).reduce((j,D)=>j+(D.height||0)+_,0)},[n]);return k.useEffect(()=>{n.forEach(g=>{if(g.dismissed)l(g.id,g.removeDelay);else{let y=o.get(g.id);y&&(clearTimeout(y),o.delete(g.id))}})},[n,l]),{toasts:n,handlers:{updateHeight:d,startPause:h,endPause:m,calculateOffset:p}}},YM=ts`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,KM=ts`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,qM=ts`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,QM=$s("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${YM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${KM} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${qM} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,XM=ts`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ZM=$s("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${XM} 1s linear infinite;
`,JM=ts`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,e3=ts`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,t3=$s("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${JM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${e3} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,n3=$s("div")`
  position: absolute;
`,s3=$s("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,r3=ts`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,i3=$s("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${r3} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,o3=({toast:t})=>{let{icon:e,type:n,iconTheme:s}=t;return e!==void 0?typeof e=="string"?k.createElement(i3,null,e):e:n==="blank"?null:k.createElement(s3,null,k.createElement(ZM,{...s}),n!=="loading"&&k.createElement(n3,null,n==="error"?k.createElement(QM,{...s}):k.createElement(t3,{...s})))},a3=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,l3=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,c3="0%{opacity:0;} 100%{opacity:1;}",u3="0%{opacity:1;} 100%{opacity:0;}",d3=$s("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,h3=$s("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,f3=(t,e)=>{let n=t.includes("top")?1:-1,[s,o]=Jb()?[c3,u3]:[a3(n),l3(n)];return{animation:e?`${ts(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ts(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},m3=k.memo(({toast:t,position:e,style:n,children:s})=>{let o=t.height?f3(t.position||e||"top-center",t.visible):{opacity:0},l=k.createElement(o3,{toast:t}),u=k.createElement(h3,{...t.ariaProps},Ec(t.message,t));return k.createElement(d3,{className:t.className,style:{...o,...n,...t.style}},typeof s=="function"?s({icon:l,message:u}):k.createElement(k.Fragment,null,l,u))});LM(k.createElement);var p3=({id:t,className:e,style:n,onHeightUpdate:s,children:o})=>{let l=k.useCallback(u=>{if(u){let h=()=>{let d=u.getBoundingClientRect().height;s(t,d)};h(),new MutationObserver(h).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return k.createElement("div",{ref:l,className:e,style:n},o)},g3=(t,e)=>{let n=t.includes("top"),s=n?{top:0}:{bottom:0},o=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Jb()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...s,...o}},x3=eu`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ll=16,y3=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:s,children:o,toasterId:l,containerStyle:u,containerClassName:h})=>{let{toasts:d,handlers:m}=GM(n,l);return k.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:Ll,left:Ll,right:Ll,bottom:Ll,pointerEvents:"none",...u},className:h,onMouseEnter:m.startPause,onMouseLeave:m.endPause},d.map(p=>{let g=p.position||e,y=m.calculateOffset(p,{reverseOrder:t,gutter:s,defaultPosition:e}),w=g3(g,y);return k.createElement(p3,{id:p.id,key:p.id,onHeightUpdate:m.updateHeight,className:p.visible?x3:"",style:w},p.type==="custom"?Ec(p.message,p):o?o(p):k.createElement(m3,{toast:p,position:g}))}))},re=ct;const Wv="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='600' height='600' fill='%231a1a2e'%3E%3Crect width='600' height='600'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%23555' font-family='sans-serif' font-size='18'%3EImage Unavailable%3C/text%3E%3C/svg%3E";function v3(){var _,C,S;const{id:t}=lw(),e=On(),{products:n,addToCart:s}=Ie(),o=n.find(T=>T.id===t),[l,u]=k.useState(""),[h,d]=k.useState(""),[m,p]=k.useState(1),[g,y]=k.useState(!1);if(!o)return a.jsxs("div",{className:"min-h-screen bg-surface-950",children:[a.jsx(Yt,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 pt-24 text-center",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Product Not Found"}),a.jsx(Ce,{to:"/shop",className:"btn-primary",children:"Back to Shop"})]})]});const w=()=>{var T,N,j,D;if(((T=o.sizes)==null?void 0:T.length)>1&&!l){re.error("Please select a size");return}if(((N=o.colors)==null?void 0:N.length)>1&&!h){re.error("Please select a color");return}s(o,m,l||((j=o.sizes)==null?void 0:j[0])||"",h||((D=o.colors)==null?void 0:D[0])||""),y(!0),re.success("Added to cart!"),setTimeout(()=>y(!1),2e3)};return a.jsxs("div",{className:"min-h-screen bg-surface-950",children:[a.jsx(Yt,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 pt-24 pb-16",children:[a.jsxs("button",{onClick:()=>e(-1),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-6",children:[a.jsx(Gc,{})," Back"]}),a.jsxs(je.div,{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[a.jsx("div",{className:"glass-card p-0 overflow-hidden",children:a.jsx("div",{className:"aspect-square bg-surface-800",children:a.jsx("img",{src:((_=o.images)==null?void 0:_[0])||Wv,alt:o.name,className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:T=>{T.target.dataset.fallback||(T.target.dataset.fallback="1",T.target.src=Wv)}})})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-2",children:o.category}),a.jsx("h1",{className:"font-display text-3xl sm:text-4xl font-bold",children:o.name}),a.jsxs("p",{className:"text-3xl font-bold text-brand-400 mt-3",children:["$",o.price.toFixed(2)]})]}),a.jsx("p",{className:"text-gray-400 leading-relaxed",children:o.description}),((C=o.sizes)==null?void 0:C.length)>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Size / Count"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:o.sizes.map(T=>a.jsx("button",{onClick:()=>u(T),className:`px-4 py-2.5 rounded-xl text-sm font-medium transition-all ${l===T?"gradient-brand text-white shadow-lg":"bg-white/5 border border-white/10 text-gray-300 hover:bg-white/10"}`,children:T},T))})]}),((S=o.colors)==null?void 0:S.length)>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Flavor"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:o.colors.map(T=>a.jsx("button",{onClick:()=>d(T),className:`px-4 py-2.5 rounded-xl text-sm font-medium transition-all ${h===T?"gradient-brand text-white shadow-lg":"bg-white/5 border border-white/10 text-gray-300 hover:bg-white/10"}`,children:T},T))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Quantity"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>p(Math.max(1,m-1)),className:"w-10 h-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 transition-all",children:a.jsx(Cm,{size:16})}),a.jsx("span",{className:"w-12 text-center font-semibold text-lg",children:m}),a.jsx("button",{onClick:()=>p(Math.min(o.stock,m+1)),className:"w-10 h-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 transition-all",children:a.jsx(zs,{size:16})})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:o.stock>20?a.jsxs("span",{className:"badge-success",children:["In Stock (",o.stock,")"]}):o.stock>0?a.jsxs("span",{className:"badge-warning",children:["Low Stock (",o.stock," left)"]}):a.jsx("span",{className:"badge-danger",children:"Out of Stock"})}),a.jsx("div",{className:"flex gap-3 pt-2",children:a.jsx("button",{onClick:w,disabled:o.stock===0,className:`flex-1 py-4 rounded-xl font-semibold text-lg flex items-center justify-center gap-2 transition-all ${g?"bg-emerald-500 text-white":"btn-primary"} disabled:opacity-50 disabled:cursor-not-allowed`,children:g?a.jsxs(a.Fragment,{children:[a.jsx(Os,{size:20})," Added!"]}):a.jsxs(a.Fragment,{children:[a.jsx(Zo,{size:20})," Add to Cart"]})})})]})]})]}),a.jsx(Rn,{})]})}const w3="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' fill='%231a1a2e'%3E%3Crect width='100' height='100'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%23555' font-family='sans-serif' font-size='12'%3E?%3C/text%3E%3C/svg%3E";function _3(){const{cart:t,updateCartItem:e,removeFromCart:n,clearCart:s}=Ie(),o=t.reduce((d,m)=>d+m.price*m.quantity,0),l=o>=75?0:7.99,u=o*.08,h=o+l+u;return t.length===0?a.jsxs("div",{className:"min-h-screen bg-surface-950",children:[a.jsx(Yt,{}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-24 pb-16 text-center",children:a.jsxs("div",{className:"glass-card max-w-md mx-auto py-16",children:[a.jsx(fr,{size:48,className:"mx-auto text-gray-500 mb-4"}),a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Your cart is empty"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"Looks like you haven't picked any treats yet!"}),a.jsxs(Ce,{to:"/shop",className:"btn-primary inline-flex items-center gap-2",children:["Browse Treats ",a.jsx(Vl,{})]})]})}),a.jsx(Rn,{})]}):a.jsxs("div",{className:"min-h-screen bg-surface-950",children:[a.jsx(Yt,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 pt-24 pb-16",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsx("h1",{className:"font-display text-3xl font-bold",children:"Shopping Cart"}),a.jsx("button",{onClick:s,className:"text-sm text-gray-400 hover:text-red-400 transition-colors",children:"Clear all"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-2 space-y-4",children:t.map((d,m)=>a.jsx(je.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:m*.1},className:"glass-card p-0 overflow-hidden",children:a.jsxs("div",{className:"flex gap-4 p-4",children:[a.jsx("div",{className:"w-24 h-24 rounded-xl overflow-hidden bg-surface-800 flex-shrink-0",children:a.jsx("img",{src:d.image,alt:d.name,className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:p=>{p.target.dataset.fallback||(p.target.dataset.fallback="1",p.target.src=w3)}})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-white truncate",children:d.name}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[d.size&&a.jsx("span",{className:"text-xs text-gray-500",children:d.size}),d.color&&a.jsx("span",{className:"text-xs text-gray-500",children:d.color})]}),a.jsxs("p",{className:"text-brand-400 font-bold mt-1",children:["$",d.price.toFixed(2)]})]}),a.jsxs("div",{className:"flex flex-col items-end justify-between",children:[a.jsx("button",{onClick:()=>n(d.id),className:"text-gray-500 hover:text-red-400 transition-colors p-1",children:a.jsx(Jo,{size:16})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>e(d.id,d.quantity-1),className:"w-8 h-8 rounded-lg bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10",children:a.jsx(Cm,{size:14})}),a.jsx("span",{className:"w-8 text-center font-medium",children:d.quantity}),a.jsx("button",{onClick:()=>e(d.id,d.quantity+1),className:"w-8 h-8 rounded-lg bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10",children:a.jsx(zs,{size:14})})]})]})]})},d.id))}),a.jsx("div",{children:a.jsxs("div",{className:"glass-card sticky top-24 space-y-4",children:[a.jsx("h3",{className:"font-semibold text-lg",children:"Order Summary"}),a.jsxs("div",{className:"space-y-3 text-sm",children:[a.jsxs("div",{className:"flex justify-between text-gray-400",children:[a.jsxs("span",{children:["Subtotal (",t.reduce((d,m)=>d+m.quantity,0)," items)"]}),a.jsxs("span",{children:["$",o.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between text-gray-400",children:[a.jsx("span",{children:"Shipping"}),a.jsx("span",{children:l===0?a.jsx("span",{className:"text-emerald-400",children:"Free"}):`$${l.toFixed(2)}`})]}),a.jsxs("div",{className:"flex justify-between text-gray-400",children:[a.jsx("span",{children:"Tax"}),a.jsxs("span",{children:["$",u.toFixed(2)]})]}),a.jsxs("div",{className:"border-t border-white/10 pt-3 flex justify-between text-lg font-bold",children:[a.jsx("span",{children:"Total"}),a.jsxs("span",{className:"text-brand-400",children:["$",h.toFixed(2)]})]})]}),l>0&&a.jsxs("p",{className:"text-xs text-gray-500",children:["Add $",(75-o).toFixed(2)," more for free shipping"]}),a.jsx(Ce,{to:"/checkout",className:"btn-primary w-full text-center block py-4",children:"Proceed to Checkout"}),a.jsx(Ce,{to:"/shop",className:"btn-secondary w-full text-center block",children:"Continue Shopping"})]})})]})]}),a.jsx(Rn,{})]})}const b3="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' fill='%231a1a2e'%3E%3Crect width='100' height='100'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%23555' font-family='sans-serif' font-size='12'%3E?%3C/text%3E%3C/svg%3E",$v=[{id:"card",name:"Credit/Debit Card",icon:Ul,color:"text-blue-400"},{id:"cashapp",name:"CashApp",icon:jt,color:"text-green-400"},{id:"paypal",name:"PayPal",icon:jt,color:"text-blue-300"},{id:"zelle",name:"Zelle",icon:A4,color:"text-purple-400"},{id:"chime",name:"Chime",icon:jt,color:"text-emerald-400"},{id:"crypto",name:"Crypto (BTC/ETH)",icon:jt,color:"text-amber-400"}];function N3(){var T;const t=On(),{cart:e,currentUser:n,createOrder:s}=Ie(),[o,l]=k.useState(1),[u,h]=k.useState(""),[d,m]=k.useState("delivery"),[p,g]=k.useState({name:(n==null?void 0:n.name)||"",email:(n==null?void 0:n.email)||"",phone:"",address:"",city:"",state:"",zip:""}),y=e.reduce((N,j)=>N+j.price*j.quantity,0),w=d==="pickup"||y>=75?0:7.99,_=y*.08,C=y+w+_;if(e.length===0)return a.jsxs("div",{className:"min-h-screen bg-surface-950",children:[a.jsx(Yt,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 pt-24 text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Nothing to checkout"}),a.jsx(Ce,{to:"/shop",className:"btn-primary",children:"Go to Shop"})]})]});const S=()=>{if(o===1){if(!p.name||!p.email){re.error("Name and email are required");return}if(d==="delivery"&&(!p.address||!p.city||!p.zip)){re.error("Please fill in your delivery address");return}l(2)}else if(o===2){if(!u){re.error("Please select a payment method");return}l(3)}else{const N=s({customerId:(n==null?void 0:n.id)||"guest",customerName:p.name,customerEmail:p.email,customerPhone:p.phone,items:e.map(j=>({productId:j.productId,name:j.name,price:j.price,quantity:j.quantity,size:j.size,color:j.color,image:j.image})),subtotal:y,shipping:w,tax:_,total:C,paymentMethod:u,deliveryMethod:d,deliveryAddress:d==="delivery"?{address:p.address,city:p.city,state:p.state,zip:p.zip}:null});re.success("Order placed successfully!"),t(`/track/${N.id}`)}};return a.jsxs("div",{className:"min-h-screen bg-surface-950",children:[a.jsx(Yt,{}),a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 pt-24 pb-16",children:[a.jsx("h1",{className:"font-display text-3xl font-bold mb-8",children:"Checkout"}),a.jsx("div",{className:"flex items-center gap-4 mb-10",children:["Details","Payment","Confirm"].map((N,j)=>a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-all ${o>j+1?"bg-emerald-500 text-white":o===j+1?"gradient-brand text-white":"bg-white/10 text-gray-500"}`,children:o>j+1?a.jsx(Os,{size:16}):j+1}),a.jsx("span",{className:`text-sm font-medium ${o>=j+1?"text-white":"text-gray-500"}`,children:N}),j<2&&a.jsx("div",{className:`flex-1 h-px ${o>j+1?"bg-emerald-500":"bg-white/10"}`})]},N))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsxs(je.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:[o===1&&a.jsxs("div",{className:"glass-card space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Delivery Details"}),a.jsx("div",{className:"flex gap-3",children:["delivery","pickup"].map(N=>a.jsx("button",{onClick:()=>m(N),className:`flex-1 py-3 rounded-xl text-sm font-medium transition-all ${d===N?"gradient-brand text-white shadow-lg":"bg-white/5 border border-white/10 text-gray-400"}`,children:N==="delivery"?" Delivery":" Pickup"},N))}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Full Name *"}),a.jsx("input",{value:p.name,onChange:N=>g({...p,name:N.target.value}),className:"input-field",placeholder:"John Doe"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email *"}),a.jsx("input",{value:p.email,onChange:N=>g({...p,email:N.target.value}),className:"input-field",placeholder:"john@example.com",type:"email"})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Phone"}),a.jsx("input",{value:p.phone,onChange:N=>g({...p,phone:N.target.value}),className:"input-field",placeholder:"555-0123"})]})]}),d==="delivery"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Address *"}),a.jsx("input",{value:p.address,onChange:N=>g({...p,address:N.target.value}),className:"input-field",placeholder:"123 Main St"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"City *"}),a.jsx("input",{value:p.city,onChange:N=>g({...p,city:N.target.value}),className:"input-field",placeholder:"City"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"State"}),a.jsx("input",{value:p.state,onChange:N=>g({...p,state:N.target.value}),className:"input-field",placeholder:"CA"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ZIP *"}),a.jsx("input",{value:p.zip,onChange:N=>g({...p,zip:N.target.value}),className:"input-field",placeholder:"90210"})]})]})]})]}),o===2&&a.jsxs("div",{className:"glass-card space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Payment Method"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:$v.map(N=>a.jsxs("button",{onClick:()=>h(N.id),className:`flex items-center gap-3 p-4 rounded-xl transition-all text-left ${u===N.id?"gradient-brand text-white shadow-lg shadow-brand-500/25":"bg-white/5 border border-white/10 text-gray-300 hover:bg-white/10"}`,children:[a.jsx(N.icon,{size:24,className:u===N.id?"text-white":N.color}),a.jsx("span",{className:"font-medium",children:N.name})]},N.id))}),u==="card"&&a.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/10",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Card Number"}),a.jsx("input",{className:"input-field",placeholder:"4242 4242 4242 4242"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Expiry"}),a.jsx("input",{className:"input-field",placeholder:"MM/YY"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"CVV"}),a.jsx("input",{className:"input-field",placeholder:"123"})]})]})]}),u&&u!=="card"&&a.jsx("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:a.jsxs("p",{className:"text-gray-400 text-sm",children:[u==="cashapp"&&"You will be redirected to CashApp to complete payment.",u==="paypal"&&"You will be redirected to PayPal to complete payment.",u==="zelle"&&"Payment details will be sent to your email for Zelle transfer.",u==="chime"&&"You will receive a Chime pay request to complete the transaction.",u==="crypto"&&"A wallet address will be provided for BTC or ETH payment."]})})]}),o===3&&a.jsxs("div",{className:"glass-card space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Order Confirmation"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[a.jsx("h3",{className:"font-medium text-sm text-gray-400 mb-2",children:"Delivery"}),a.jsx("p",{className:"text-white",children:p.name}),a.jsx("p",{className:"text-gray-400 text-sm",children:p.email}),d==="delivery"&&a.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[p.address,", ",p.city,", ",p.state," ",p.zip]}),d==="pickup"&&a.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"In-Store Pickup"})]}),a.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[a.jsx("h3",{className:"font-medium text-sm text-gray-400 mb-2",children:"Payment"}),a.jsx("p",{className:"text-white capitalize",children:(T=$v.find(N=>N.id===u))==null?void 0:T.name})]}),a.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[a.jsxs("h3",{className:"font-medium text-sm text-gray-400 mb-2",children:["Items (",e.length,")"]}),e.map(N=>a.jsxs("div",{className:"flex justify-between py-1",children:[a.jsxs("span",{className:"text-gray-300 text-sm",children:[N.name," x",N.quantity]}),a.jsxs("span",{className:"text-white text-sm",children:["$",(N.price*N.quantity).toFixed(2)]})]},N.id))]})]})]})]},o),a.jsxs("div",{className:"flex gap-3 mt-6",children:[o>1&&a.jsx("button",{onClick:()=>l(o-1),className:"btn-secondary",children:"Back"}),a.jsx("button",{onClick:S,className:"btn-primary flex-1",children:o===3?`Place Order  $${C.toFixed(2)}`:"Continue"})]})]}),a.jsx("div",{className:"hidden lg:block",children:a.jsxs("div",{className:"glass-card sticky top-24 space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"Summary"}),e.map(N=>a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-surface-800 flex-shrink-0",children:a.jsx("img",{src:N.image,alt:N.name,className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:j=>{j.target.dataset.fallback||(j.target.dataset.fallback="1",j.target.src=b3)}})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:N.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:["x",N.quantity]})]}),a.jsxs("p",{className:"text-sm font-medium",children:["$",(N.price*N.quantity).toFixed(2)]})]},N.id)),a.jsxs("div",{className:"border-t border-white/10 pt-3 space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between text-gray-400",children:[a.jsx("span",{children:"Subtotal"}),a.jsxs("span",{children:["$",y.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between text-gray-400",children:[a.jsx("span",{children:"Shipping"}),a.jsx("span",{children:w===0?"Free":`$${w.toFixed(2)}`})]}),a.jsxs("div",{className:"flex justify-between text-gray-400",children:[a.jsx("span",{children:"Tax"}),a.jsxs("span",{children:["$",_.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between font-bold text-lg border-t border-white/10 pt-2",children:[a.jsx("span",{children:"Total"}),a.jsxs("span",{className:"text-brand-400",children:["$",C.toFixed(2)]})]})]})]})})]})]}),a.jsx(Rn,{})]})}function C3(t){return de({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}function S3(){var y;const t=On(),{loginAsCustomer:e,loginAsGuest:n,currentUser:s,userRole:o}=Ie(),[l,u]=k.useState("signin"),[h,d]=k.useState({name:"",email:"",password:""});if(s&&o==="customer")return a.jsxs("div",{className:"min-h-screen bg-surface-950",children:[a.jsx(Yt,{}),a.jsx("div",{className:"max-w-md mx-auto px-4 pt-24 text-center",children:a.jsxs("div",{className:"glass-card py-12",children:[a.jsx("div",{className:"w-16 h-16 rounded-full gradient-brand flex items-center justify-center mx-auto mb-4 text-xl font-bold",children:((y=s.name)==null?void 0:y.charAt(0))||"G"}),a.jsxs("h2",{className:"text-xl font-bold mb-1",children:["Welcome, ",s.name||"Guest","!"]}),a.jsx("p",{className:"text-gray-400 text-sm mb-6",children:s.email||"Guest account"}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx(Ce,{to:"/shop",className:"btn-primary",children:"Continue Shopping"}),!s.isGuest&&a.jsx(Ce,{to:"/orders",className:"btn-secondary",children:"View Orders"})]})]})}),a.jsx(Rn,{})]});const m=()=>{const w={id:"google-"+Date.now(),name:"Google User",email:"user@gmail.com",isGuest:!1,provider:"google",avatar:"GU"};e(w),re.success("Signed in with Google!"),t("/shop")},p=()=>{if(!h.email){re.error("Email is required");return}const w={id:"email-"+Date.now(),name:h.name||h.email.split("@")[0],email:h.email,isGuest:!1,provider:"email"};e(w),re.success(`Welcome, ${w.name}!`),t("/shop")},g=()=>{n(),re.success("Continuing as guest"),t("/shop")};return a.jsxs("div",{className:"min-h-screen bg-surface-950",children:[a.jsx(Yt,{}),a.jsx("div",{className:"max-w-md mx-auto px-4 pt-24 pb-16",children:a.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl gradient-brand flex items-center justify-center mx-auto mb-4 text-2xl",children:""}),a.jsx("h1",{className:"font-display text-2xl font-bold",children:"Welcome to Couch Buddies"}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Sign in to track orders & earn sweet rewards"})]}),a.jsxs("div",{className:"glass-card space-y-5",children:[a.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center gap-3 px-6 py-3.5 rounded-xl bg-white text-gray-900 font-semibold hover:bg-gray-100 transition-all shadow-lg",children:[a.jsx(C3,{size:22}),"Continue with Google"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex-1 h-px bg-white/10"}),a.jsx("span",{className:"text-sm text-gray-500",children:"or"}),a.jsx("div",{className:"flex-1 h-px bg-white/10"})]}),l==="signup"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Name"}),a.jsx("input",{value:h.name,onChange:w=>d({...h,name:w.target.value}),className:"input-field",placeholder:"Your name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email"}),a.jsx("input",{value:h.email,onChange:w=>d({...h,email:w.target.value}),className:"input-field",placeholder:"you@example.com",type:"email"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Password"}),a.jsx("input",{value:h.password,onChange:w=>d({...h,password:w.target.value}),className:"input-field",placeholder:"",type:"password"})]}),a.jsx("button",{onClick:p,className:"btn-primary w-full",children:l==="signup"?"Create Account":"Sign In"}),a.jsx("button",{onClick:()=>u(l==="signin"?"signup":"signin"),className:"w-full text-center text-sm text-gray-400 hover:text-brand-400 transition-colors",children:l==="signin"?"Don't have an account? Sign up":"Already have an account? Sign in"}),a.jsxs("div",{className:"border-t border-white/10 pt-4",children:[a.jsxs("button",{onClick:g,className:"btn-secondary w-full flex items-center justify-center gap-2",children:[a.jsx(Zn,{size:16})," Continue as Guest"]}),a.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Guest accounts cannot track orders or earn rewards"})]})]})]})}),a.jsx(Rn,{})]})}function vn(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function vr(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const rN=6048e5,j3=864e5;let E3={};function nu(){return E3}function ia(t,e){var h,d,m,p;const n=nu(),s=(e==null?void 0:e.weekStartsOn)??((d=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:d.weekStartsOn)??n.weekStartsOn??((p=(m=n.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??0,o=vn(t),l=o.getDay(),u=(l<s?7:0)+l-s;return o.setDate(o.getDate()-u),o.setHours(0,0,0,0),o}function kc(t){return ia(t,{weekStartsOn:1})}function iN(t){const e=vn(t),n=e.getFullYear(),s=vr(t,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const o=kc(s),l=vr(t,0);l.setFullYear(n,0,4),l.setHours(0,0,0,0);const u=kc(l);return e.getTime()>=o.getTime()?n+1:e.getTime()>=u.getTime()?n:n-1}function Hv(t){const e=vn(t);return e.setHours(0,0,0,0),e}function Gv(t){const e=vn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function k3(t,e){const n=Hv(t),s=Hv(e),o=+n-Gv(n),l=+s-Gv(s);return Math.round((o-l)/j3)}function T3(t){const e=iN(t),n=vr(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),kc(n)}function P3(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function I3(t){if(!P3(t)&&typeof t!="number")return!1;const e=vn(t);return!isNaN(Number(e))}function R3(t){const e=vn(t),n=vr(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const A3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},D3=(t,e,n)=>{let s;const o=A3[t];return typeof o=="string"?s=o:e===1?s=o.one:s=o.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Oh(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const M3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},O3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},L3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},F3={date:Oh({formats:M3,defaultWidth:"full"}),time:Oh({formats:O3,defaultWidth:"full"}),dateTime:Oh({formats:L3,defaultWidth:"full"})},B3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},z3=(t,e,n,s)=>B3[t];function vo(t){return(e,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let o;if(s==="formatting"&&t.formattingValues){const u=t.defaultFormattingWidth||t.defaultWidth,h=n!=null&&n.width?String(n.width):u;o=t.formattingValues[h]||t.formattingValues[u]}else{const u=t.defaultWidth,h=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[h]||t.values[u]}const l=t.argumentCallback?t.argumentCallback(e):e;return o[l]}}const V3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},U3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},W3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$3={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},H3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},G3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Y3=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},K3={ordinalNumber:Y3,era:vo({values:V3,defaultWidth:"wide"}),quarter:vo({values:U3,defaultWidth:"wide",argumentCallback:t=>t-1}),month:vo({values:W3,defaultWidth:"wide"}),day:vo({values:$3,defaultWidth:"wide"}),dayPeriod:vo({values:H3,defaultWidth:"wide",formattingValues:G3,defaultFormattingWidth:"wide"})};function wo(t){return(e,n={})=>{const s=n.width,o=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],l=e.match(o);if(!l)return null;const u=l[0],h=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(h)?Q3(h,g=>g.test(u)):q3(h,g=>g.test(u));let m;m=t.valueCallback?t.valueCallback(d):d,m=n.valueCallback?n.valueCallback(m):m;const p=e.slice(u.length);return{value:m,rest:p}}}function q3(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Q3(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function X3(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const o=s[0],l=e.match(t.parsePattern);if(!l)return null;let u=t.valueCallback?t.valueCallback(l[0]):l[0];u=n.valueCallback?n.valueCallback(u):u;const h=e.slice(o.length);return{value:u,rest:h}}}const Z3=/^(\d+)(th|st|nd|rd)?/i,J3=/\d+/i,eO={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},tO={any:[/^b/i,/^(a|c)/i]},nO={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},sO={any:[/1/i,/2/i,/3/i,/4/i]},rO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},iO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},aO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},lO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},uO={ordinalNumber:X3({matchPattern:Z3,parsePattern:J3,valueCallback:t=>parseInt(t,10)}),era:wo({matchPatterns:eO,defaultMatchWidth:"wide",parsePatterns:tO,defaultParseWidth:"any"}),quarter:wo({matchPatterns:nO,defaultMatchWidth:"wide",parsePatterns:sO,defaultParseWidth:"any",valueCallback:t=>t+1}),month:wo({matchPatterns:rO,defaultMatchWidth:"wide",parsePatterns:iO,defaultParseWidth:"any"}),day:wo({matchPatterns:oO,defaultMatchWidth:"wide",parsePatterns:aO,defaultParseWidth:"any"}),dayPeriod:wo({matchPatterns:lO,defaultMatchWidth:"any",parsePatterns:cO,defaultParseWidth:"any"})},dO={code:"en-US",formatDistance:D3,formatLong:F3,formatRelative:z3,localize:K3,match:uO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function hO(t){const e=vn(t);return k3(e,R3(e))+1}function fO(t){const e=vn(t),n=+kc(e)-+T3(e);return Math.round(n/rN)+1}function oN(t,e){var p,g,y,w;const n=vn(t),s=n.getFullYear(),o=nu(),l=(e==null?void 0:e.firstWeekContainsDate)??((g=(p=e==null?void 0:e.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??o.firstWeekContainsDate??((w=(y=o.locale)==null?void 0:y.options)==null?void 0:w.firstWeekContainsDate)??1,u=vr(t,0);u.setFullYear(s+1,0,l),u.setHours(0,0,0,0);const h=ia(u,e),d=vr(t,0);d.setFullYear(s,0,l),d.setHours(0,0,0,0);const m=ia(d,e);return n.getTime()>=h.getTime()?s+1:n.getTime()>=m.getTime()?s:s-1}function mO(t,e){var h,d,m,p;const n=nu(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(m=n.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=oN(t,e),l=vr(t,0);return l.setFullYear(o,0,s),l.setHours(0,0,0,0),ia(l,e)}function pO(t,e){const n=vn(t),s=+ia(n,e)-+mO(n,e);return Math.round(s/rN)+1}function De(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const Cs={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return De(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):De(n+1,2)},d(t,e){return De(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return De(t.getHours()%12||12,e.length)},H(t,e){return De(t.getHours(),e.length)},m(t,e){return De(t.getMinutes(),e.length)},s(t,e){return De(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),o=Math.trunc(s*Math.pow(10,n-3));return De(o,e.length)}},Qr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Yv={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),o=s>0?s:1-s;return n.ordinalNumber(o,{unit:"year"})}return Cs.y(t,e)},Y:function(t,e,n,s){const o=oN(t,s),l=o>0?o:1-o;if(e==="YY"){const u=l%100;return De(u,2)}return e==="Yo"?n.ordinalNumber(l,{unit:"year"}):De(l,e.length)},R:function(t,e){const n=iN(t);return De(n,e.length)},u:function(t,e){const n=t.getFullYear();return De(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return De(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return De(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return Cs.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return De(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const o=pO(t,s);return e==="wo"?n.ordinalNumber(o,{unit:"week"}):De(o,e.length)},I:function(t,e,n){const s=fO(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):De(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Cs.d(t,e)},D:function(t,e,n){const s=hO(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):De(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const o=t.getDay(),l=(o-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(l);case"ee":return De(l,2);case"eo":return n.ordinalNumber(l,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const o=t.getDay(),l=(o-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(l);case"cc":return De(l,e.length);case"co":return n.ordinalNumber(l,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),o=s===0?7:s;switch(e){case"i":return String(o);case"ii":return De(o,e.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const o=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let o;switch(s===12?o=Qr.noon:s===0?o=Qr.midnight:o=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let o;switch(s>=17?o=Qr.evening:s>=12?o=Qr.afternoon:s>=4?o=Qr.morning:o=Qr.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return Cs.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Cs.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):De(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):De(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Cs.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Cs.s(t,e)},S:function(t,e){return Cs.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return qv(s);case"XXXX":case"XX":return lr(s);case"XXXXX":case"XXX":default:return lr(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return qv(s);case"xxxx":case"xx":return lr(s);case"xxxxx":case"xxx":default:return lr(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Kv(s,":");case"OOOO":default:return"GMT"+lr(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Kv(s,":");case"zzzz":default:return"GMT"+lr(s,":")}},t:function(t,e,n){const s=Math.trunc(t.getTime()/1e3);return De(s,e.length)},T:function(t,e,n){const s=t.getTime();return De(s,e.length)}};function Kv(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),o=Math.trunc(s/60),l=s%60;return l===0?n+String(o):n+String(o)+e+De(l,2)}function qv(t,e){return t%60===0?(t>0?"-":"+")+De(Math.abs(t)/60,2):lr(t,e)}function lr(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),o=De(Math.trunc(s/60),2),l=De(s%60,2);return n+o+e+l}const Qv=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},aN=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},gO=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],o=n[2];if(!o)return Qv(t,e);let l;switch(s){case"P":l=e.dateTime({width:"short"});break;case"PP":l=e.dateTime({width:"medium"});break;case"PPP":l=e.dateTime({width:"long"});break;case"PPPP":default:l=e.dateTime({width:"full"});break}return l.replace("{{date}}",Qv(s,e)).replace("{{time}}",aN(o,e))},xO={p:aN,P:gO},yO=/^D+$/,vO=/^Y+$/,wO=["D","DD","YY","YYYY"];function _O(t){return yO.test(t)}function bO(t){return vO.test(t)}function NO(t,e,n){const s=CO(t,e,n);if(console.warn(s),wO.includes(t))throw new RangeError(s)}function CO(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const SO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,EO=/^'([^]*?)'?$/,kO=/''/g,TO=/[a-zA-Z]/;function Dn(t,e,n){var p,g,y,w;const s=nu(),o=s.locale??dO,l=s.firstWeekContainsDate??((g=(p=s.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,u=s.weekStartsOn??((w=(y=s.locale)==null?void 0:y.options)==null?void 0:w.weekStartsOn)??0,h=vn(t);if(!I3(h))throw new RangeError("Invalid time value");let d=e.match(jO).map(_=>{const C=_[0];if(C==="p"||C==="P"){const S=xO[C];return S(_,o.formatLong)}return _}).join("").match(SO).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const C=_[0];if(C==="'")return{isToken:!1,value:PO(_)};if(Yv[C])return{isToken:!0,value:_};if(C.match(TO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:_}});o.localize.preprocessor&&(d=o.localize.preprocessor(h,d));const m={firstWeekContainsDate:l,weekStartsOn:u,locale:o};return d.map(_=>{if(!_.isToken)return _.value;const C=_.value;(bO(C)||_O(C))&&NO(C,e,String(t));const S=Yv[C[0]];return S(h,C,o.localize,m)}).join("")}function PO(t){const e=t.match(EO);return e?e[1].replace(kO,"'"):t}const IO={pending:"badge-warning",confirmed:"badge-info",assigned:"badge-info","in-transit":"badge-brand","picked-up":"badge-brand",delivered:"badge-success",completed:"badge-success",cancelled:"badge-danger"},RO={pending:Kn,confirmed:Os,assigned:kn,"in-transit":kn,delivered:Os,completed:Os};function AO(){const{orders:t,currentUser:e}=Ie(),n=t.filter(s=>s.customerId===(e==null?void 0:e.id)).sort((s,o)=>new Date(o.createdAt)-new Date(s.createdAt));return a.jsxs("div",{className:"min-h-screen bg-surface-950",children:[a.jsx(Yt,{}),a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 pt-24 pb-16",children:[a.jsx("h1",{className:"font-display text-3xl font-bold mb-2",children:"My Orders"}),a.jsx("p",{className:"text-gray-400 mb-8",children:"Track and manage your purchases"}),n.length===0?a.jsxs("div",{className:"glass-card text-center py-16",children:[a.jsx(yr,{size:48,className:"mx-auto text-gray-500 mb-4"}),a.jsx("h2",{className:"text-xl font-bold mb-2",children:"No orders yet"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"Your orders will appear here after you make a purchase."}),a.jsx(Ce,{to:"/shop",className:"btn-primary",children:"Start Shopping"})]}):a.jsx("div",{className:"space-y-4",children:n.map(s=>{const o=RO[s.status]||yr;return a.jsxs("div",{className:"glass-card hover:border-brand-500/20 transition-all",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/5 flex items-center justify-center",children:a.jsx(o,{size:20,className:"text-brand-400"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"font-semibold",children:s.id}),a.jsx("span",{className:IO[s.status]||"badge-info",children:s.status.replace("-"," ")})]}),a.jsx("p",{className:"text-sm text-gray-400 mt-0.5",children:Dn(new Date(s.createdAt),"MMM dd, yyyy  h:mm a")}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[s.items.length," item",s.items.length>1?"s":"","  $",s.total.toFixed(2)]})]})]}),a.jsxs(Ce,{to:`/track/${s.id}`,className:"btn-secondary text-sm py-2 flex items-center gap-1.5",children:[a.jsx(j4,{size:14})," Track Order"]})]}),a.jsx("div",{className:"flex gap-2 mt-4 pt-4 border-t border-white/5 overflow-x-auto",children:s.items.map((l,u)=>a.jsx("div",{className:"w-14 h-14 rounded-lg overflow-hidden bg-surface-800 flex-shrink-0",children:a.jsx("img",{src:l.image,alt:l.name,className:"w-full h-full object-cover"})},u))})]},s.id)})})]}),a.jsx(Rn,{})]})}const Fl=["pending","confirmed","assigned","picked-up","in-transit","delivered"];function DO(){var u,h;const{orderId:t}=lw(),{orders:e,staff:n}=Ie(),s=e.find(d=>d.id===t);if(!s)return a.jsxs("div",{className:"min-h-screen bg-surface-950",children:[a.jsx(Yt,{}),a.jsxs("div",{className:"max-w-4xl mx-auto px-4 pt-24 text-center",children:[a.jsx(yr,{size:48,className:"mx-auto text-gray-500 mb-4"}),a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Order Not Found"}),a.jsxs("p",{className:"text-gray-400 mb-6",children:['The order ID "',t,'" was not found.']}),a.jsx(Ce,{to:"/shop",className:"btn-primary",children:"Go to Shop"})]})]});const o=Fl.indexOf(s.status),l=s.driverId?n.find(d=>d.id===s.driverId):null;return a.jsxs("div",{className:"min-h-screen bg-surface-950",children:[a.jsx(Yt,{}),a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 pt-24 pb-16",children:[a.jsxs(Ce,{to:"/orders",className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-6",children:[a.jsx(Gc,{})," Back to Orders"]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"font-display text-2xl sm:text-3xl font-bold",children:["Order ",s.id]}),a.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:["Placed ",Dn(new Date(s.createdAt),"MMMM dd, yyyy  h:mm a")]})]}),a.jsx("span",{className:`badge text-sm py-1.5 px-4 ${s.status==="delivered"||s.status==="completed"?"badge-success":s.status==="cancelled"?"badge-danger":"badge-brand"}`,children:s.status.replace("-"," ").toUpperCase()})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.deliveryMethod==="delivery"&&a.jsxs("div",{className:"glass-card",children:[a.jsx("h3",{className:"font-semibold mb-6",children:"Delivery Progress"}),a.jsx("div",{className:"flex items-center justify-between mb-2",children:Fl.map((d,m)=>a.jsxs("div",{className:"flex items-center flex-1",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${m<=o?"gradient-brand text-white":"bg-white/10 text-gray-500"}`,children:m<=o?a.jsx(Os,{size:14}):m+1}),m<Fl.length-1&&a.jsx("div",{className:`flex-1 h-0.5 mx-1 ${m<o?"bg-brand-500":"bg-white/10"}`})]},d))}),a.jsx("div",{className:"flex justify-between text-xs text-gray-500",children:Fl.map(d=>a.jsx("span",{className:"text-center capitalize",children:d.replace("-"," ")},d))})]}),l&&a.jsxs("div",{className:"glass-card",children:[a.jsx("h3",{className:"font-semibold mb-4",children:"Your Delivery Driver"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full gradient-brand flex items-center justify-center font-bold overflow-hidden",children:l.photoURL?a.jsx("img",{src:l.photoURL,alt:l.name,className:"w-full h-full object-cover"}):l.avatar||l.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:l.name}),a.jsx("p",{className:"text-sm text-gray-400",children:l.phone})]}),l.location&&a.jsxs("div",{className:"ml-auto flex items-center gap-1 text-sm text-emerald-400",children:[a.jsx(En,{size:14})," Live tracking"]})]}),l.location&&a.jsxs("div",{className:"mt-4 p-4 rounded-xl bg-surface-900 border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[a.jsx(En,{size:14,className:"text-brand-400"}),a.jsxs("span",{children:["Driver Location: ",(u=l.location.lat)==null?void 0:u.toFixed(4),", ",(h=l.location.lng)==null?void 0:h.toFixed(4)]})]}),a.jsx("div",{className:"mt-3 h-48 rounded-xl bg-surface-800 flex items-center justify-center text-gray-500 text-sm border border-white/5",children:a.jsxs("div",{className:"text-center",children:[a.jsx(En,{size:32,className:"mx-auto mb-2 text-brand-400"}),"Map View",a.jsx("br",{}),a.jsx("span",{className:"text-xs",children:"(Connect Google Maps API for live view)"})]})})]})]}),a.jsxs("div",{className:"glass-card",children:[a.jsx("h3",{className:"font-semibold mb-4",children:"Order Timeline"}),a.jsx("div",{className:"space-y-4",children:s.timeline.slice().reverse().map((d,m)=>a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${m===0?"bg-brand-500":"bg-white/20"}`}),m<s.timeline.length-1&&a.jsx("div",{className:"w-0.5 flex-1 bg-white/10 mt-1"})]}),a.jsxs("div",{className:"pb-4",children:[a.jsx("p",{className:"font-medium text-sm capitalize",children:d.status.replace("-"," ")}),d.note&&a.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:d.note}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:Dn(new Date(d.time),"MMM dd  h:mm a")})]})]},m))})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"glass-card",children:[a.jsx("h3",{className:"font-semibold mb-4",children:"Order Details"}),a.jsx("div",{className:"space-y-3",children:s.items.map((d,m)=>a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-surface-800 flex-shrink-0",children:a.jsx("img",{src:d.image,alt:d.name,className:"w-full h-full object-cover"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:d.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:["x",d.quantity,"  ",d.size]})]}),a.jsxs("p",{className:"text-sm font-medium",children:["$",(d.price*d.quantity).toFixed(2)]})]},m))}),a.jsxs("div",{className:"border-t border-white/10 mt-4 pt-3 space-y-1 text-sm",children:[a.jsxs("div",{className:"flex justify-between text-gray-400",children:[a.jsx("span",{children:"Subtotal"}),a.jsxs("span",{children:["$",s.subtotal.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between text-gray-400",children:[a.jsx("span",{children:"Shipping"}),a.jsx("span",{children:s.shipping===0?"Free":`$${s.shipping.toFixed(2)}`})]}),a.jsxs("div",{className:"flex justify-between text-gray-400",children:[a.jsx("span",{children:"Tax"}),a.jsxs("span",{children:["$",s.tax.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between font-bold text-lg border-t border-white/10 pt-2",children:[a.jsx("span",{children:"Total"}),a.jsxs("span",{className:"text-brand-400",children:["$",s.total.toFixed(2)]})]})]})]}),a.jsxs("div",{className:"glass-card text-sm",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Payment"}),a.jsx("p",{className:"text-gray-400 capitalize",children:s.paymentMethod}),a.jsx("h3",{className:"font-semibold mb-3 mt-4",children:"Delivery Method"}),a.jsx("p",{className:"text-gray-400 capitalize",children:s.deliveryMethod}),s.deliveryAddress&&a.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:[s.deliveryAddress.address,", ",s.deliveryAddress.city,", ",s.deliveryAddress.state," ",s.deliveryAddress.zip]})]})]})]})]}),a.jsx(Rn,{})]})}function MO(){const[t,e]=k.useState(""),{loginAsOwner:n,currentUser:s,userRole:o}=Ie(),l=On();if(s&&o==="owner")return l("/owner"),null;const u=h=>{h.preventDefault(),n(t)?(re.success("Welcome, Owner!"),l("/owner")):re.error("Invalid PIN. Default: 1234")};return a.jsx("div",{className:"min-h-screen bg-surface-950 flex items-center justify-center p-4",children:a.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:[a.jsxs(Ce,{to:"/",className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-8",children:[a.jsx(Gc,{})," Back to Store"]}),a.jsxs("div",{className:"glass-card",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-accent-600 to-accent-800 flex items-center justify-center mx-auto mb-4",children:a.jsx(Qo,{size:28})}),a.jsx("h1",{className:"font-display text-2xl font-bold",children:"Owner Portal"}),a.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Enter your PIN to access the management dashboard"})]}),a.jsxs("form",{onSubmit:u,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Owner PIN"}),a.jsx("input",{type:"password",value:t,onChange:h=>e(h.target.value),className:"input-field text-center text-2xl tracking-[0.5em] font-mono",placeholder:"",maxLength:8,autoFocus:!0})]}),a.jsx("button",{type:"submit",className:"btn-accent w-full py-4 text-lg",children:"Access Dashboard"})]}),a.jsx("p",{className:"text-xs text-gray-600 text-center mt-6",children:"Demo PIN: 1234"})]})]})})}const OO=[{to:"/owner",icon:Yc,label:"Dashboard",end:!0},{to:"/owner/products",icon:a_,label:"Products"},{to:"/owner/staff",icon:Sm,label:"Staff"},{to:"/owner/orders",icon:Zo,label:"Orders"},{to:"/owner/treasury",icon:jt,label:"Treasury"},{to:"/owner/ledger",icon:E4,label:"Ledger"},{to:"/owner/profile",icon:R4,label:"Profile"}];function LO(){const{logout:t,ownerProfile:e}=Ie(),n=On(),[s,o]=k.useState(!1),l=()=>{t(),n("/")};return a.jsxs("div",{className:"min-h-screen bg-surface-950 flex",children:[a.jsxs("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-surface-900 border-r border-white/5 flex flex-col transition-transform duration-300 ${s?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:[a.jsxs("div",{className:"p-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-9 h-9 rounded-lg bg-gradient-to-br from-accent-600 to-accent-800 flex items-center justify-center font-bold text-sm overflow-hidden",children:e!=null&&e.photoURL?a.jsx("img",{src:e.photoURL,alt:"Owner",className:"w-full h-full object-cover"}):"CB"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-display font-bold text-sm",children:"Couch Buddies"}),a.jsx("p",{className:"text-xs text-accent-400",children:"Owner Portal"})]})]}),a.jsx("button",{className:"lg:hidden text-gray-400",onClick:()=>o(!1),children:a.jsx(Jn,{size:20})})]}),a.jsx("nav",{className:"flex-1 px-3 space-y-1",children:OO.map(u=>a.jsxs(pw,{to:u.to,end:u.end,onClick:()=>o(!1),className:({isActive:h})=>`sidebar-link ${h?"active":""}`,children:[a.jsx(u.icon,{size:18}),a.jsx("span",{className:"text-sm font-medium",children:u.label})]},u.to))}),a.jsx("div",{className:"p-4 border-t border-white/5",children:a.jsxs("button",{onClick:l,className:"sidebar-link w-full text-red-400 hover:text-red-300 hover:bg-red-500/10",children:[a.jsx(bm,{size:18}),a.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),a.jsxs("main",{className:"flex-1 min-w-0",children:[a.jsxs("header",{className:"sticky top-0 z-30 h-16 glass border-b border-white/5 flex items-center px-4 sm:px-6 gap-4",children:[a.jsx("button",{className:"lg:hidden text-gray-400 hover:text-white",onClick:()=>o(!0),children:a.jsx(Nm,{size:20})}),a.jsx("h2",{className:"font-display font-semibold text-lg",children:"Management Dashboard"})]}),a.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:a.jsx(fw,{})})]})]})}function FO(){const{products:t,orders:e,staff:n,treasury:s,inStoreSales:o}=Ie(),l=e.reduce((w,_)=>w+(_.total||0),0)+o.filter(w=>w.status==="completed").reduce((w,_)=>w+(_.total||0),0),u=e.filter(w=>w.status==="pending"||w.status==="assigned").length,h=n.filter(w=>w.clockedIn).length,d=t.length,m=t.filter(w=>w.stock<20).length,p=[{label:"Treasury Balance",value:`$${s.balance.toLocaleString()}`,icon:jt,color:"from-emerald-500 to-emerald-700",change:"+12%"},{label:"Total Revenue",value:`$${l.toLocaleString()}`,icon:D4,color:"from-brand-500 to-brand-700",change:"+8%"},{label:"Active Orders",value:u,icon:Zo,color:"from-blue-500 to-blue-700",change:`${e.length} total`},{label:"Staff On Duty",value:`${h}/${n.length}`,icon:Sm,color:"from-accent-500 to-accent-700",change:`${n.length} total`},{label:"Products",value:d,icon:a_,color:"from-amber-500 to-amber-700",change:`${m} low stock`}],g=[...e].sort((w,_)=>new Date(_.createdAt)-new Date(w.createdAt)).slice(0,5),y=[...s.transactions].sort((w,_)=>new Date(_.time)-new Date(w.time)).slice(0,5);return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-display text-2xl sm:text-3xl font-bold",children:"Dashboard Overview"}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Welcome back! Here's what's happening today."})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:p.map((w,_)=>a.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:_*.05},className:"glass-card hover:border-white/20 transition-all",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${w.color} flex items-center justify-center`,children:a.jsx(w.icon,{size:18})}),a.jsx("span",{className:"text-xs text-gray-500",children:w.change})]}),a.jsx("p",{className:"text-2xl font-bold",children:w.value}),a.jsx("p",{className:"text-sm text-gray-400 mt-0.5",children:w.label})]},w.label))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"glass-card",children:[a.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[a.jsx(Zo,{size:18,className:"text-brand-400"})," Recent Orders"]}),g.length===0?a.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:"No orders yet"}):a.jsx("div",{className:"space-y-3",children:g.map(w=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:w.id}),a.jsx("p",{className:"text-xs text-gray-400",children:w.customerName||"Guest"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-semibold text-brand-400",children:["$",(w.total||0).toFixed(2)]}),a.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${w.status==="delivered"?"badge-success":w.status==="pending"?"badge-warning":w.status==="assigned"?"badge-info":"badge-brand"}`,children:w.status})]})]},w.id))})]}),a.jsxs("div",{className:"glass-card",children:[a.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[a.jsx(jt,{size:18,className:"text-emerald-400"})," Treasury Activity"]}),y.length===0?a.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:"No transactions yet"}):a.jsx("div",{className:"space-y-3",children:y.map(w=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:w.note||w.type}),a.jsx("p",{className:"text-xs text-gray-400",children:new Date(w.time).toLocaleDateString()})]}),a.jsxs("p",{className:`text-sm font-semibold ${w.type==="deposit"||w.type==="sale"?"text-emerald-400":"text-red-400"}`,children:[w.type==="deposit"||w.type==="sale"?"+":"-","$",w.amount.toLocaleString()]})]},w.id))})]})]}),a.jsxs("div",{className:"glass-card",children:[a.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[a.jsx(Kn,{size:18,className:"text-accent-400"})," Staff Status"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map(w=>a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold overflow-hidden ${w.clockedIn?"bg-emerald-500/20 text-emerald-400 ring-2 ring-emerald-500/30":"bg-gray-500/20 text-gray-400"}`,children:w.photoURL?a.jsx("img",{src:w.photoURL,alt:w.name,className:"w-full h-full object-cover"}):w.avatar||w.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:w.name}),a.jsx("p",{className:"text-xs text-gray-400",children:w.clockedIn?a.jsxs("span",{className:"text-emerald-400",children:[" ",w.clockType||w.role]}):a.jsx("span",{className:"text-gray-500",children:" Off duty"})})]})]},w.id))})]})]})}const Lh="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' fill='%231a1a2e'%3E%3Crect width='400' height='400'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%23555' font-family='sans-serif' font-size='16'%3ENo Image%3C/text%3E%3C/svg%3E",BO="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' fill='%231a1a2e'%3E%3Crect width='40' height='40'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%23555' font-family='sans-serif' font-size='10'%3E?%3C/text%3E%3C/svg%3E";function zO(){var ie,xe;const{products:t,addProduct:e,updateProduct:n,deleteProduct:s}=Ie(),[o,l]=k.useState(""),[u,h]=k.useState("All"),[d,m]=k.useState(null),[p,g]=k.useState(!1),[y,w]=k.useState("grid"),[_,C]=k.useState(-1),S=["All",...new Set(t.map($=>$.category))],T=t.filter($=>{const le=$.name.toLowerCase().includes(o.toLowerCase())||$.category.toLowerCase().includes(o.toLowerCase()),pe=u==="All"||$.category===u;return le&&pe}),N={name:"",description:"",price:"",category:"T-Shirts",sizes:["S","M","L","XL"],colors:["Black"],stock:"",featured:!1,images:[""]},j=()=>{m({...N}),g(!0)},D=$=>{m({...$,price:String($.price),stock:String($.stock)}),g(!0)},L=()=>{m(null),g(!1)},W=$=>{$.preventDefault();const le={...d,price:parseFloat(d.price)||0,stock:parseInt(d.stock)||0,images:d.images.filter(pe=>pe.trim()!=="")};if(!le.name||!le.price){re.error("Name and price required");return}d.id?(n(d.id,le),re.success("Product updated!")):(e(le),re.success("Product added!")),L()},z=$=>{confirm("Delete this product?")&&(s($),re.success("Product deleted"))},F=$=>{const le=document.createElement("input");le.type="file",le.accept="image/*",le.onchange=async pe=>{const G=pe.target.files[0];if(G){if(!G.type.startsWith("image/")){re.error("Please select an image file");return}if(G.size>5*1024*1024){re.error("Image must be under 5 MB");return}C($);try{const me=await X(G,800,.75),oe=[...d.images];oe[$]=me,m({...d,images:oe}),re.success("Image uploaded!")}catch(me){console.error("Product image processing failed:",me),re.error("Failed to process image")}finally{C(-1)}}},le.click()};function X($,le=800,pe=.75){return new Promise((G,me)=>{const oe=new FileReader;oe.onload=Y=>{const J=new Image;J.onload=()=>{const Q=document.createElement("canvas");let{width:R,height:B}=J;(R>le||B>le)&&(R>B?(B=Math.round(B*le/R),R=le):(R=Math.round(R*le/B),B=le)),Q.width=R,Q.height=B,Q.getContext("2d").drawImage(J,0,0,R,B),G(Q.toDataURL("image/jpeg",pe))},J.onerror=me,J.src=Y.target.result},oe.onerror=me,oe.readAsDataURL($)})}return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-display text-2xl sm:text-3xl font-bold",children:"Products"}),a.jsxs("p",{className:"text-gray-400 mt-1",children:[t.length," total products"]})]}),a.jsxs("button",{onClick:j,className:"btn-primary flex items-center gap-2 w-fit",children:[a.jsx(zs,{size:18})," Add Product"]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(qc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),a.jsx("input",{type:"text",placeholder:"Search products...",value:o,onChange:$=>l($.target.value),className:"input-field pl-10"})]}),a.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:S.map($=>a.jsx("button",{onClick:()=>h($),className:`px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-all ${u===$?"bg-brand-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white"}`,children:$},$))}),a.jsxs("div",{className:"flex gap-1 bg-white/5 rounded-xl p-1",children:[a.jsx("button",{onClick:()=>w("grid"),className:`p-2 rounded-lg ${y==="grid"?"bg-white/10 text-white":"text-gray-400"}`,children:a.jsx(Yc,{size:18})}),a.jsx("button",{onClick:()=>w("list"),className:`p-2 rounded-lg ${y==="list"?"bg-white/10 text-white":"text-gray-400"}`,children:a.jsx(c_,{size:18})})]})]}),y==="grid"?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:T.map($=>{var le;return a.jsxs(je.div,{layout:!0,className:"glass-card p-0 overflow-hidden group",children:[a.jsxs("div",{className:"aspect-square bg-surface-800 relative overflow-hidden",children:[a.jsx("img",{src:((le=$.images)==null?void 0:le[0])||Lh,alt:$.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",referrerPolicy:"no-referrer",onError:pe=>{pe.target.dataset.fallback||(pe.target.dataset.fallback="1",pe.target.src=Lh)}}),$.featured&&a.jsx("span",{className:"absolute top-3 left-3 badge-brand text-xs",children:"Featured"}),a.jsxs("div",{className:"absolute top-3 right-3 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>D($),className:"p-2 rounded-lg bg-black/50 text-white hover:bg-black/70",children:a.jsx(qo,{size:14})}),a.jsx("button",{onClick:()=>z($.id),className:"p-2 rounded-lg bg-black/50 text-red-400 hover:bg-black/70",children:a.jsx(Jo,{size:14})})]})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:$.category}),a.jsx("h3",{className:"font-semibold text-sm line-clamp-1",children:$.name}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsxs("p",{className:"text-brand-400 font-bold",children:["$",$.price.toFixed(2)]}),a.jsxs("span",{className:`text-xs ${$.stock<20?"text-red-400":"text-gray-400"}`,children:[$.stock," in stock"]})]})]})]},$.id)})}):a.jsx("div",{className:"glass-card p-0 overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-white/10",children:[a.jsx("th",{className:"text-left p-4 text-xs text-gray-400 font-medium",children:"Product"}),a.jsx("th",{className:"text-left p-4 text-xs text-gray-400 font-medium hidden sm:table-cell",children:"Category"}),a.jsx("th",{className:"text-left p-4 text-xs text-gray-400 font-medium",children:"Price"}),a.jsx("th",{className:"text-left p-4 text-xs text-gray-400 font-medium hidden sm:table-cell",children:"Stock"}),a.jsx("th",{className:"text-right p-4 text-xs text-gray-400 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:T.map($=>{var le;return a.jsxs("tr",{className:"table-row",children:[a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:((le=$.images)==null?void 0:le[0])||"",alt:"",className:"w-10 h-10 rounded-lg object-cover bg-surface-800",onError:pe=>{pe.target.dataset.fallback||(pe.target.dataset.fallback="1",pe.target.src=BO)}}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:$.name}),$.featured&&a.jsx("span",{className:"badge-brand text-xs mt-0.5",children:"Featured"})]})]})}),a.jsx("td",{className:"p-4 text-sm text-gray-400 hidden sm:table-cell",children:$.category}),a.jsxs("td",{className:"p-4 text-sm font-semibold text-brand-400",children:["$",$.price.toFixed(2)]}),a.jsx("td",{className:`p-4 text-sm hidden sm:table-cell ${$.stock<20?"text-red-400":"text-gray-400"}`,children:$.stock}),a.jsxs("td",{className:"p-4 text-right",children:[a.jsx("button",{onClick:()=>D($),className:"p-2 rounded-lg hover:bg-white/10 text-gray-400 hover:text-white",children:a.jsx(qo,{size:16})}),a.jsx("button",{onClick:()=>z($.id),className:"p-2 rounded-lg hover:bg-white/10 text-gray-400 hover:text-red-400",children:a.jsx(Jo,{size:16})})]})]},$.id)})})]})}),a.jsx(gi,{children:p&&d&&a.jsx(je.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:L,children:a.jsxs(je.div,{className:"modal-content max-w-2xl",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:$=>$.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-white/10 flex items-center justify-between",children:[a.jsx("h2",{className:"font-display text-xl font-bold",children:d.id?"Edit Product":"Add New Product"}),a.jsx("button",{onClick:L,className:"p-2 rounded-lg hover:bg-white/10",children:a.jsx(Jn,{})})]}),a.jsxs("form",{onSubmit:W,className:"p-6 space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Product Images"}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[d.images.map(($,le)=>a.jsx("div",{className:"aspect-square rounded-xl border-2 border-dashed border-white/10 overflow-hidden relative group cursor-pointer hover:border-brand-500/50 transition-colors",onClick:()=>_===-1&&F(le),children:_===le?a.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-brand-400 bg-surface-800",children:[a.jsx(u_,{size:24,className:"animate-spin"}),a.jsx("span",{className:"text-xs mt-2 text-gray-400",children:"Uploading..."})]}):$?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:$,alt:"",className:"w-full h-full object-cover",onError:pe=>{pe.target.dataset.fallback||(pe.target.dataset.fallback="1",pe.target.src=Lh)}}),a.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:a.jsx(Cy,{size:20})})]}):a.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-500",children:[a.jsx(Cy,{size:24}),a.jsx("span",{className:"text-xs mt-1",children:"Upload"})]})},le)),d.images.length<4&&a.jsx("button",{type:"button",onClick:()=>m({...d,images:[...d.images,""]}),className:"aspect-square rounded-xl border-2 border-dashed border-white/10 flex items-center justify-center text-gray-500 hover:text-white hover:border-white/30 transition-colors",children:a.jsx(zs,{size:24})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Click to upload or paste URL below"}),a.jsx("input",{type:"url",placeholder:"Or paste image URL...",value:d.images[0]||"",onChange:$=>{const le=[...d.images];le[0]=$.target.value,m({...d,images:le})},className:"input-field mt-2 text-sm"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Product Name *"}),a.jsx("input",{type:"text",required:!0,value:d.name,onChange:$=>m({...d,name:$.target.value}),className:"input-field",placeholder:"Classic Tee"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Category"}),a.jsx("select",{value:d.category,onChange:$=>m({...d,category:$.target.value}),className:"input-field",children:["CBD Gummies","Tinctures","Chocolates","Hard Candy","Beverages","Topicals","Limited Edition"].map($=>a.jsx("option",{value:$,className:"bg-surface-800",children:$},$))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),a.jsx("textarea",{rows:3,value:d.description,onChange:$=>m({...d,description:$.target.value}),className:"input-field resize-none",placeholder:"Product description..."})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Price ($) *"}),a.jsx("input",{type:"number",step:"0.01",required:!0,value:d.price,onChange:$=>m({...d,price:$.target.value}),className:"input-field",placeholder:"29.99"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Stock"}),a.jsx("input",{type:"number",value:d.stock,onChange:$=>m({...d,stock:$.target.value}),className:"input-field",placeholder:"100"})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:d.featured,onChange:$=>m({...d,featured:$.target.checked}),className:"w-5 h-5 rounded bg-white/5 border-white/20 text-brand-500 focus:ring-brand-500"}),a.jsx("span",{className:"text-sm",children:"Featured"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Sizes (comma separated)"}),a.jsx("input",{type:"text",value:((ie=d.sizes)==null?void 0:ie.join(", "))||"",onChange:$=>m({...d,sizes:$.target.value.split(",").map(le=>le.trim()).filter(Boolean)}),className:"input-field",placeholder:"S, M, L, XL"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Colors (comma separated)"}),a.jsx("input",{type:"text",value:((xe=d.colors)==null?void 0:xe.join(", "))||"",onChange:$=>m({...d,colors:$.target.value.split(",").map(le=>le.trim()).filter(Boolean)}),className:"input-field",placeholder:"Black, White"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsxs("button",{type:"submit",className:"btn-primary flex items-center gap-2",children:[a.jsx(Kc,{size:16})," ",d.id?"Save Changes":"Add Product"]}),a.jsx("button",{type:"button",onClick:L,className:"btn-secondary",children:"Cancel"})]})]})]})})})]})}function VO(){const{staff:t,addStaff:e,updateStaff:n,deleteStaff:s,payStaff:o,treasury:l}=Ie(),[u,h]=k.useState(!1),[d,m]=k.useState(!1),[p,g]=k.useState(null),[y,w]=k.useState(null),[_,C]=k.useState(""),[S,T]=k.useState(""),[N,j]=k.useState(""),[D,L]=k.useState("all"),W=t.filter(G=>{const me=G.name.toLowerCase().includes(N.toLowerCase())||G.email.toLowerCase().includes(N.toLowerCase()),oe=D==="all"||G.role===D;return me&&oe}),z={name:"",email:"",phone:"",role:"onsite",pin:"0000"},F=()=>{g({...z}),h(!0)},X=G=>{g({...G}),h(!0)},ie=()=>{g(null),h(!1)},xe=G=>{w(G),C(""),T(""),m(!0)},$=G=>{if(G.preventDefault(),!p.name||!p.email){re.error("Name and email required");return}if(p.id){const me={...p};me.name&&(me.avatar=me.name.split(" ").map(oe=>oe[0]).join("").toUpperCase()),n(p.id,me),re.success("Staff updated!")}else e(p),re.success("Staff member added!");ie()},le=G=>{G.preventDefault();const me=parseFloat(_);if(!me||me<=0){re.error("Enter a valid amount");return}if(me>l.balance){re.error("Insufficient treasury funds");return}o(y.id,me,S||`Payment to ${y.name}`),re.success(`$${me.toFixed(2)} paid to ${y.name}`),m(!1)},pe=(G,me)=>{confirm(`Remove ${me} from staff?`)&&(s(G),re.success("Staff member removed"))};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-display text-2xl sm:text-3xl font-bold",children:"Staff Management"}),a.jsxs("p",{className:"text-gray-400 mt-1",children:[t.length," team members  ",t.filter(G=>G.clockedIn).length," on duty"]})]}),a.jsxs("button",{onClick:F,className:"btn-primary flex items-center gap-2 w-fit",children:[a.jsx(zs,{size:18})," Add Staff"]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(qc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),a.jsx("input",{type:"text",placeholder:"Search staff...",value:N,onChange:G=>j(G.target.value),className:"input-field pl-10"})]}),a.jsx("div",{className:"flex gap-2",children:[["all","All"],["onsite","In-Store"],["delivery","Delivery"]].map(([G,me])=>a.jsx("button",{onClick:()=>L(G),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${D===G?"bg-brand-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:me},G))})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:W.map(G=>{var me,oe;return a.jsxs(je.div,{layout:!0,className:"glass-card hover:border-white/20 transition-all",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-sm font-bold overflow-hidden ${G.clockedIn?"bg-emerald-500/20 text-emerald-400 ring-2 ring-emerald-500/30":"bg-surface-700 text-gray-400"}`,children:G.photoURL?a.jsx("img",{src:G.photoURL,alt:G.name,className:"w-full h-full object-cover"}):G.avatar||G.name.split(" ").map(Y=>Y[0]).join("")}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:G.name}),a.jsx("p",{className:"text-xs text-gray-400",children:G.email})]})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${G.role==="delivery"?"badge-info":"badge-brand"}`,children:G.role==="delivery"?" Delivery":" In-Store"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[a.jsxs("div",{className:"p-3 rounded-xl bg-white/5",children:[a.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[a.jsx(Kn,{size:12})," Status"]}),a.jsx("p",{className:`text-sm font-medium mt-1 ${G.clockedIn?"text-emerald-400":"text-gray-500"}`,children:G.clockedIn?`Clocked In (${G.clockType||G.role})`:"Off Duty"})]}),a.jsxs("div",{className:"p-3 rounded-xl bg-white/5",children:[a.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[a.jsx(jt,{size:12})," Wallet"]}),a.jsxs("p",{className:"text-sm font-semibold mt-1 text-emerald-400",children:["$",G.wallet.balance.toFixed(2)]})]})]}),G.clockedIn&&G.location&&a.jsxs("div",{className:"p-3 rounded-xl bg-white/5 mb-4 flex items-center gap-2",children:[a.jsx(En,{size:14,className:"text-brand-400 shrink-0"}),a.jsxs("p",{className:"text-xs text-gray-400 truncate",children:[(me=G.location.lat)==null?void 0:me.toFixed(4),", ",(oe=G.location.lng)==null?void 0:oe.toFixed(4)]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>xe(G),className:"flex-1 btn-success py-2 text-sm flex items-center justify-center gap-1",children:[a.jsx(jt,{size:14})," Pay"]}),a.jsx("button",{onClick:()=>X(G),className:"p-2 rounded-xl bg-white/10 hover:bg-white/20 transition-colors",children:a.jsx(qo,{size:16})}),a.jsx("button",{onClick:()=>pe(G.id,G.name),className:"p-2 rounded-xl bg-white/10 hover:bg-red-500/20 text-gray-400 hover:text-red-400 transition-colors",children:a.jsx(Jo,{size:16})})]})]},G.id)})}),a.jsx(gi,{children:u&&p&&a.jsx(je.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:ie,children:a.jsxs(je.div,{className:"modal-content",initial:{scale:.95},animate:{scale:1},exit:{scale:.95},onClick:G=>G.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-white/10 flex items-center justify-between",children:[a.jsx("h2",{className:"font-display text-xl font-bold",children:p.id?"Edit Staff":"Add Staff Member"}),a.jsx("button",{onClick:ie,className:"p-2 rounded-lg hover:bg-white/10",children:a.jsx(Jn,{})})]}),a.jsxs("form",{onSubmit:$,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Full Name *"}),a.jsx("input",{type:"text",required:!0,value:p.name,onChange:G=>g({...p,name:G.target.value}),className:"input-field",placeholder:"John Doe"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email *"}),a.jsx("input",{type:"email",required:!0,value:p.email,onChange:G=>g({...p,email:G.target.value}),className:"input-field",placeholder:"john@couchbuddies.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Phone"}),a.jsx("input",{type:"tel",value:p.phone,onChange:G=>g({...p,phone:G.target.value}),className:"input-field",placeholder:"555-0100"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Role"}),a.jsxs("select",{value:p.role,onChange:G=>g({...p,role:G.target.value}),className:"input-field",children:[a.jsx("option",{value:"onsite",className:"bg-surface-800",children:"In-Store"}),a.jsx("option",{value:"delivery",className:"bg-surface-800",children:"Delivery"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Login PIN"}),a.jsx("input",{type:"text",maxLength:4,value:p.pin,onChange:G=>g({...p,pin:G.target.value}),className:"input-field font-mono",placeholder:"0000"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsxs("button",{type:"submit",className:"btn-primary flex items-center gap-2",children:[a.jsx(Kc,{size:16})," ",p.id?"Save Changes":"Add Staff"]}),a.jsx("button",{type:"button",onClick:ie,className:"btn-secondary",children:"Cancel"})]})]})]})})}),a.jsx(gi,{children:d&&y&&a.jsx(je.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>m(!1),children:a.jsxs(je.div,{className:"modal-content max-w-md",initial:{scale:.95},animate:{scale:1},exit:{scale:.95},onClick:G=>G.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-white/10 flex items-center justify-between",children:[a.jsx("h2",{className:"font-display text-xl font-bold",children:"Pay Staff"}),a.jsx("button",{onClick:()=>m(!1),className:"p-2 rounded-lg hover:bg-white/10",children:a.jsx(Jn,{})})]}),a.jsxs("form",{onSubmit:le,className:"p-6 space-y-4",children:[a.jsxs("div",{className:"p-4 rounded-xl bg-white/5 flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-accent-500/20 text-accent-400 flex items-center justify-center font-bold text-sm overflow-hidden",children:y.photoURL?a.jsx("img",{src:y.photoURL,alt:y.name,className:"w-full h-full object-cover"}):y.avatar||y.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:y.name}),a.jsxs("p",{className:"text-xs text-gray-400",children:["Current balance: $",y.wallet.balance.toFixed(2)]})]})]}),a.jsx("div",{className:"p-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20",children:a.jsxs("p",{className:"text-xs text-emerald-400",children:["Treasury Balance: $",l.balance.toLocaleString()]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Amount ($)"}),a.jsx("input",{type:"number",step:"0.01",value:_,onChange:G=>C(G.target.value),className:"input-field text-2xl font-bold",placeholder:"0.00",autoFocus:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Note"}),a.jsx("input",{type:"text",value:S,onChange:G=>T(G.target.value),className:"input-field",placeholder:"Weekly pay, bonus, etc."})]}),a.jsxs("button",{type:"submit",className:"btn-success w-full py-3 flex items-center justify-center gap-2",children:[a.jsx(jt,{size:18})," Send Payment"]})]})]})})})]})}const Xv=["pending","assigned","picked-up","in-transit","delivered","cancelled"],UO={pending:"badge-warning",assigned:"badge-info","picked-up":"badge-brand","in-transit":"badge-info",delivered:"badge-success",cancelled:"badge-danger"};function WO(){const{orders:t,staff:e,updateOrderStatus:n,assignDriver:s}=Ie(),[o,l]=k.useState(""),[u,h]=k.useState("all"),[d,m]=k.useState(null),p=e.filter(_=>_.role==="delivery"),g=t.filter(_=>{const C=_.id.toLowerCase().includes(o.toLowerCase())||(_.customerName||"").toLowerCase().includes(o.toLowerCase()),S=u==="all"||_.status===u;return C&&S}).sort((_,C)=>new Date(C.createdAt)-new Date(_.createdAt)),y=(_,C)=>{n(_,C,`Status changed to ${C}`),re.success(`Order ${_}  ${C}`)},w=(_,C)=>{s(_,C),re.success("Driver assigned!")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-display text-2xl sm:text-3xl font-bold",children:"Orders"}),a.jsxs("p",{className:"text-gray-400 mt-1",children:[t.length," total orders"]})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{label:"Pending",count:t.filter(_=>_.status==="pending").length,color:"text-amber-400"},{label:"In Transit",count:t.filter(_=>_.status==="in-transit"||_.status==="assigned").length,color:"text-blue-400"},{label:"Delivered",count:t.filter(_=>_.status==="delivered").length,color:"text-emerald-400"},{label:"Cancelled",count:t.filter(_=>_.status==="cancelled").length,color:"text-red-400"}].map(_=>a.jsxs("div",{className:"glass-card text-center",children:[a.jsx("p",{className:`text-2xl font-bold ${_.color}`,children:_.count}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:_.label})]},_.label))}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(qc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),a.jsx("input",{type:"text",placeholder:"Search by order ID or customer...",value:o,onChange:_=>l(_.target.value),className:"input-field pl-10"})]}),a.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:["all",...Xv].map(_=>a.jsx("button",{onClick:()=>h(_),className:`px-3 py-2 rounded-xl text-xs font-medium whitespace-nowrap transition-all ${u===_?"bg-brand-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:_==="all"?"All":_.charAt(0).toUpperCase()+_.slice(1)},_))})]}),g.length===0?a.jsxs("div",{className:"glass-card text-center py-16",children:[a.jsx(yr,{size:40,className:"mx-auto text-gray-600 mb-3"}),a.jsx("p",{className:"text-gray-400",children:"No orders found"})]}):a.jsx("div",{className:"space-y-4",children:g.map(_=>{var C,S;return a.jsxs(je.div,{layout:!0,className:"glass-card hover:border-white/20 transition-all",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h3",{className:"font-bold text-lg",children:_.id}),a.jsx("span",{className:UO[_.status]||"badge-info",children:_.status})]}),a.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-400",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Zn,{size:12})," ",_.customerName||"Guest"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Kn,{size:12})," ",Dn(new Date(_.createdAt),"MMM d, h:mm a")]}),_.delivery==="delivery"&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(kn,{size:12})," Delivery"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-xl font-bold text-brand-400",children:["$",(_.total||0).toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-400",children:[((C=_.items)==null?void 0:C.length)||0," items"]})]})]}),_.items&&a.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-1",children:[_.items.slice(0,4).map((T,N)=>a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white/5 shrink-0",children:[T.image&&a.jsx("img",{src:T.image,alt:"",className:"w-8 h-8 rounded object-cover"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium line-clamp-1",children:T.name}),a.jsxs("p",{className:"text-xs text-gray-400",children:["x",T.quantity]})]})]},N)),(((S=_.items)==null?void 0:S.length)||0)>4&&a.jsxs("span",{className:"text-xs text-gray-400 self-center px-2",children:["+",_.items.length-4," more"]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-3 border-t border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-gray-400",children:"Status:"}),a.jsx("select",{value:_.status,onChange:T=>y(_.id,T.target.value),className:"input-field py-1.5 px-3 text-sm w-auto",children:Xv.map(T=>a.jsx("option",{value:T,className:"bg-surface-800",children:T},T))})]}),_.delivery==="delivery"&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs text-gray-400",children:"Driver:"}),a.jsxs("select",{value:_.driverId||"",onChange:T=>w(_.id,T.target.value),className:"input-field py-1.5 px-3 text-sm w-auto",children:[a.jsx("option",{value:"",className:"bg-surface-800",children:"Assign driver..."}),p.map(T=>a.jsxs("option",{value:T.id,className:"bg-surface-800",children:[T.name," ",T.clockedIn?"(on duty)":""]},T.id))]})]}),_.shippingAddress&&a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-400 ml-auto",children:[a.jsx(En,{size:12}),a.jsx("span",{className:"truncate max-w-[200px]",children:_.shippingAddress})]})]}),d===_.id&&_.timeline&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-white/5",children:[a.jsx("h4",{className:"text-sm font-medium mb-3",children:"Order Timeline"}),a.jsx("div",{className:"space-y-2",children:_.timeline.map((T,N)=>a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-brand-400 mt-1.5 shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm",children:T.note||T.status}),a.jsx("p",{className:"text-xs text-gray-500",children:Dn(new Date(T.time),"MMM d, h:mm a")})]})]},N))})]}),a.jsx("button",{onClick:()=>m(d===_.id?null:_.id),className:"text-xs text-brand-400 hover:text-brand-300 mt-3 transition-colors",children:d===_.id?"Hide Timeline":"View Timeline"})]},_.id)})})]})}function $O(){const{treasury:t,addTreasuryAccount:e,removeTreasuryAccount:n,addTreasuryFunds:s}=Ie(),[o,l]=k.useState(!1),[u,h]=k.useState(!1),[d,m]=k.useState({name:"",type:"bank",last4:""}),[p,g]=k.useState(""),[y,w]=k.useState(""),_=N=>{if(N.preventDefault(),!d.name||!d.last4){re.error("Fill all fields");return}e(d),re.success("Account connected!"),l(!1),m({name:"",type:"bank",last4:""})},C=N=>{N.preventDefault();const j=parseFloat(p);if(!j||j<=0){re.error("Enter valid amount");return}s(j,y||"Manual deposit"),re.success(`$${j.toFixed(2)} added to treasury`),h(!1),g(""),w("")},S=(N,j)=>{confirm(`Disconnect ${j}?`)&&(n(N),re.success("Account disconnected"))},T=[...t.transactions].sort((N,j)=>new Date(j.time)-new Date(N.time)).slice(0,10);return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-display text-2xl sm:text-3xl font-bold",children:"Treasury Wallet"}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your business funds and connected accounts"})]}),a.jsxs("div",{className:"glass-card glow-brand relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),a.jsxs("div",{className:"relative",children:[a.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Available Balance"}),a.jsxs("p",{className:"text-4xl sm:text-5xl font-bold font-display",children:["$",t.balance.toLocaleString("en-US",{minimumFractionDigits:2})]}),a.jsx("div",{className:"flex gap-3 mt-6",children:a.jsxs("button",{onClick:()=>h(!0),className:"btn-primary flex items-center gap-2",children:[a.jsx(zs,{size:16})," Add Funds"]})})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"font-display text-xl font-bold",children:"Connected Accounts"}),a.jsxs("button",{onClick:()=>l(!0),className:"btn-secondary text-sm py-2 flex items-center gap-1.5",children:[a.jsx(zs,{size:14})," Add Account"]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.accounts.map(N=>a.jsxs(je.div,{layout:!0,className:"glass-card flex items-center gap-4 hover:border-white/20 transition-all",children:[a.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${N.type==="bank"?"bg-blue-500/20 text-blue-400":"bg-emerald-500/20 text-emerald-400"}`,children:a.jsx(Ul,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:N.name}),a.jsxs("p",{className:"text-sm text-gray-400",children:[N.type==="bank"?"Bank Account":"Debit Card","  ",N.last4]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"badge-success flex items-center gap-1",children:[a.jsx(h_,{size:10})," Connected"]}),a.jsx("button",{onClick:()=>S(N.id,N.name),className:"p-2 rounded-lg hover:bg-red-500/20 text-gray-400 hover:text-red-400 transition-colors",children:a.jsx(Jo,{size:14})})]})]},N.id)),t.accounts.length===0&&a.jsxs("div",{className:"glass-card col-span-full text-center py-12",children:[a.jsx(Ul,{size:32,className:"mx-auto text-gray-600 mb-3"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"No accounts connected yet"}),a.jsx("button",{onClick:()=>l(!0),className:"btn-primary text-sm mt-4",children:"Connect First Account"})]})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-display text-xl font-bold mb-4",children:"Recent Transactions"}),a.jsx("div",{className:"glass-card p-0",children:T.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(jt,{size:32,className:"mx-auto text-gray-600 mb-3"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"No transactions yet"})]}):a.jsx("div",{className:"divide-y divide-white/5",children:T.map(N=>a.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-white/5 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${N.type==="deposit"||N.type==="sale"?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"}`,children:a.jsx(o_,{size:18,className:N.type==="staff-payment"?"rotate-180":""})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:N.note||N.type}),a.jsxs("p",{className:"text-xs text-gray-500",children:[N.from||N.to||"","  ",new Date(N.time).toLocaleDateString()]})]})]}),a.jsxs("p",{className:`text-sm font-bold ${N.type==="deposit"||N.type==="sale"?"text-emerald-400":"text-red-400"}`,children:[N.type==="deposit"||N.type==="sale"?"+":"-","$",N.amount.toLocaleString()]})]},N.id))})})]}),a.jsx(gi,{children:o&&a.jsx(je.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>l(!1),children:a.jsxs(je.div,{className:"modal-content max-w-md",initial:{scale:.95},animate:{scale:1},exit:{scale:.95},onClick:N=>N.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-white/10 flex items-center justify-between",children:[a.jsx("h2",{className:"font-display text-xl font-bold",children:"Connect Account"}),a.jsx("button",{onClick:()=>l(!1),className:"p-2 rounded-lg hover:bg-white/10",children:a.jsx(Jn,{})})]}),a.jsxs("form",{onSubmit:_,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Account Name"}),a.jsx("input",{type:"text",value:d.name,onChange:N=>m({...d,name:N.target.value}),className:"input-field",placeholder:"My Business Checking"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Account Type"}),a.jsxs("select",{value:d.type,onChange:N=>m({...d,type:N.target.value}),className:"input-field",children:[a.jsx("option",{value:"bank",className:"bg-surface-800",children:"Bank Account"}),a.jsx("option",{value:"debit",className:"bg-surface-800",children:"Debit Card"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Last 4 Digits"}),a.jsx("input",{type:"text",maxLength:4,value:d.last4,onChange:N=>m({...d,last4:N.target.value.replace(/\D/g,"")}),className:"input-field font-mono",placeholder:"1234"})]}),a.jsxs("button",{type:"submit",className:"btn-primary w-full flex items-center justify-center gap-2",children:[a.jsx(Ul,{size:16})," Connect Account"]})]})]})})}),a.jsx(gi,{children:u&&a.jsx(je.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>h(!1),children:a.jsxs(je.div,{className:"modal-content max-w-md",initial:{scale:.95},animate:{scale:1},exit:{scale:.95},onClick:N=>N.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-white/10 flex items-center justify-between",children:[a.jsx("h2",{className:"font-display text-xl font-bold",children:"Add Funds"}),a.jsx("button",{onClick:()=>h(!1),className:"p-2 rounded-lg hover:bg-white/10",children:a.jsx(Jn,{})})]}),a.jsxs("form",{onSubmit:C,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Amount ($)"}),a.jsx("input",{type:"number",step:"0.01",value:p,onChange:N=>g(N.target.value),className:"input-field text-3xl font-bold text-center",placeholder:"0.00",autoFocus:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Note"}),a.jsx("input",{type:"text",value:y,onChange:N=>w(N.target.value),className:"input-field",placeholder:"e.g. Bank transfer"})]}),a.jsxs("button",{type:"submit",className:"btn-success w-full py-3 flex items-center justify-center gap-2",children:[a.jsx(jt,{size:18})," Add Funds"]})]})]})})})]})}function HO(){const{treasury:t,staff:e,orders:n,inStoreSales:s}=Ie(),[o,l]=k.useState("all"),u=[...t.transactions.map(g=>({...g,source:"Treasury"})),...e.flatMap(g=>g.wallet.transactions.map(y=>({...y,source:`Staff: ${g.name}`,direction:"out"})))].sort((g,y)=>new Date(y.time)-new Date(g.time)),h=o==="all"?u:u.filter(g=>o==="income"?g.type==="deposit"||g.type==="sale":o==="payments"?g.type==="staff-payment"||g.type==="payment":!0),d=u.filter(g=>g.type==="deposit"||g.type==="sale").reduce((g,y)=>g+y.amount,0),m=u.filter(g=>g.type==="staff-payment").reduce((g,y)=>g+y.amount,0),p=n.reduce((g,y)=>g+(y.total||0),0);return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-display text-2xl sm:text-3xl font-bold",children:"Financial Ledger"}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Complete transaction history and financial overview"})]}),a.jsxs("button",{className:"btn-secondary flex items-center gap-2 w-fit text-sm",children:[a.jsx(S4,{size:16})," Export CSV"]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"glass-card",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500/20 text-emerald-400 flex items-center justify-center",children:a.jsx(jt,{size:18})}),a.jsx("span",{className:"text-sm text-gray-400",children:"Treasury"})]}),a.jsxs("p",{className:"text-2xl font-bold",children:["$",t.balance.toLocaleString()]})]}),a.jsxs("div",{className:"glass-card",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/20 text-blue-400 flex items-center justify-center",children:a.jsx(hf,{size:18})}),a.jsx("span",{className:"text-sm text-gray-400",children:"Total Income"})]}),a.jsxs("p",{className:"text-2xl font-bold text-emerald-400",children:["+$",d.toLocaleString()]})]}),a.jsxs("div",{className:"glass-card",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-red-500/20 text-red-400 flex items-center justify-center",children:a.jsx(o_,{size:18})}),a.jsx("span",{className:"text-sm text-gray-400",children:"Staff Payments"})]}),a.jsxs("p",{className:"text-2xl font-bold text-red-400",children:["-$",m.toLocaleString()]})]}),a.jsxs("div",{className:"glass-card",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-brand-500/20 text-brand-400 flex items-center justify-center",children:a.jsx(hf,{size:18})}),a.jsx("span",{className:"text-sm text-gray-400",children:"Order Revenue"})]}),a.jsxs("p",{className:"text-2xl font-bold text-brand-400",children:["$",p.toLocaleString()]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(k4,{size:18,className:"text-gray-400 self-center"}),[["all","All"],["income","Income"],["payments","Payments"]].map(([g,y])=>a.jsx("button",{onClick:()=>l(g),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${o===g?"bg-brand-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:y},g))]}),a.jsx("div",{className:"glass-card p-0 overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-white/10",children:[a.jsx("th",{className:"text-left p-4 text-xs text-gray-400 font-medium",children:"Date"}),a.jsx("th",{className:"text-left p-4 text-xs text-gray-400 font-medium",children:"Description"}),a.jsx("th",{className:"text-left p-4 text-xs text-gray-400 font-medium hidden sm:table-cell",children:"Source"}),a.jsx("th",{className:"text-left p-4 text-xs text-gray-400 font-medium hidden md:table-cell",children:"Type"}),a.jsx("th",{className:"text-right p-4 text-xs text-gray-400 font-medium",children:"Amount"})]})}),a.jsx("tbody",{children:h.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"No transactions found"})}):h.map(g=>{const y=g.type==="deposit"||g.type==="sale";return a.jsxs("tr",{className:"table-row",children:[a.jsx("td",{className:"p-4 text-sm text-gray-400 whitespace-nowrap",children:Dn(new Date(g.time),"MMM d, yyyy")}),a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"text-sm font-medium",children:g.note||g.type}),g.to&&a.jsxs("p",{className:"text-xs text-gray-500",children:["To: ",g.to]}),g.from&&a.jsxs("p",{className:"text-xs text-gray-500",children:["From: ",g.from]})]}),a.jsx("td",{className:"p-4 text-sm text-gray-400 hidden sm:table-cell",children:g.source}),a.jsx("td",{className:"p-4 hidden md:table-cell",children:a.jsx("span",{className:`badge ${y?"badge-success":"badge-danger"}`,children:g.type})}),a.jsxs("td",{className:`p-4 text-right text-sm font-bold ${y?"text-emerald-400":"text-red-400"}`,children:[y?"+":"-","$",g.amount.toLocaleString()]})]},g.id+g.source)})})]})})]})}function GO(t,e=200,n=.75){return new Promise((s,o)=>{const l=new FileReader;l.onload=u=>{const h=new Image;h.onload=()=>{const d=document.createElement("canvas");let{width:m,height:p}=h;(m>e||p>e)&&(m>p?(p=Math.round(p*e/m),m=e):(m=Math.round(m*e/p),p=e)),d.width=m,d.height=p,d.getContext("2d").drawImage(h,0,0,m,p),s(d.toDataURL("image/jpeg",n))},h.onerror=o,h.src=u.target.result},l.onerror=o,l.readAsDataURL(t)})}function lN({currentPhotoURL:t,fallbackInitials:e="?",storagePath:n,onUploadComplete:s,gradientClass:o="from-brand-500 to-brand-700",editable:l=!1,size:u="lg"}){const[h,d]=k.useState(!1),m=k.useRef(null),p={sm:"w-10 h-10 text-sm",md:"w-12 h-12 text-base",lg:"w-20 h-20 text-2xl"},g=async y=>{var _;const w=(_=y.target.files)==null?void 0:_[0];if(w){if(!w.type.startsWith("image/")){re.error("Please select an image file");return}if(w.size>5*1024*1024){re.error("Image must be under 5MB");return}d(!0);try{const C=await GO(w,200,.75);s(C),re.success("Photo updated!")}catch(C){console.error("Upload failed:",C),re.error("Failed to process photo.")}finally{d(!1),m.current&&(m.current.value="")}}};return a.jsxs("div",{className:"relative group",children:[a.jsxs("div",{className:`${p[u]} rounded-2xl overflow-hidden flex items-center justify-center font-bold bg-gradient-to-br ${o} ${l?"cursor-pointer":""}`,onClick:()=>{var y;return l&&((y=m.current)==null?void 0:y.click())},children:[t?a.jsx("img",{src:t,alt:"Profile",className:"w-full h-full object-cover",onError:y=>{y.target.style.display="none"}}):a.jsx("span",{children:e}),l&&!h&&a.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-2xl flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:a.jsx(C4,{size:u==="lg"?24:16,className:"text-white"})}),h&&a.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-2xl flex items-center justify-center",children:a.jsx(u_,{size:u==="lg"?24:16,className:"text-white animate-spin"})})]}),l&&a.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:g,className:"hidden"}),l&&a.jsx("p",{className:"text-xs text-gray-500 text-center mt-1.5",children:h?"Uploading...":"Click to change"})]})}function YO(){const{ownerProfile:t,updateOwnerProfile:e}=Ie(),[n,s]=k.useState(!1),[o,l]=k.useState({...t}),[u,h]=k.useState(!1);k.useEffect(()=>{n||l({...t})},[t,n]);const d=(g,y)=>{l(w=>({...w,[g]:y}))},m=g=>{var y,w,_,C,S;if(g.preventDefault(),!((y=o.name)!=null&&y.trim())){re.error("Name is required");return}if(!((w=o.email)!=null&&w.trim())){re.error("Email is required");return}if(!o.pin||o.pin.length<4){re.error("PIN must be at least 4 characters");return}e({name:o.name.trim(),email:o.email.trim(),phone:((_=o.phone)==null?void 0:_.trim())||"",businessName:((C=o.businessName)==null?void 0:C.trim())||"",businessAddress:((S=o.businessAddress)==null?void 0:S.trim())||"",pin:o.pin}),re.success("Profile updated successfully!"),s(!1)},p=()=>{l({...t}),s(!1)};return a.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-display text-2xl sm:text-3xl font-bold",children:"Owner Profile"}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your account settings and business info"})]}),!n&&a.jsxs("button",{onClick:()=>s(!0),className:"btn-accent flex items-center gap-2",children:[a.jsx(qo,{size:16})," Edit Profile"]})]}),a.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-8 pb-6 border-b border-white/10",children:[a.jsx(lN,{currentPhotoURL:t.photoURL,fallbackInitials:t.avatar||"CB",storagePath:`owner-${t.id||"1"}`,onUploadComplete:g=>e({photoURL:g}),gradientClass:"from-accent-600 to-accent-800",editable:!0,size:"lg"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:t.name}),a.jsx("p",{className:"text-sm text-accent-400",children:t.businessName||"Couch Buddies"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Profile synced across all devices"})]})]}),n?a.jsxs("form",{onSubmit:m,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Personal Information"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-1.5",children:[a.jsx(Zn,{size:14})," Full Name"]}),a.jsx("input",{type:"text",value:o.name||"",onChange:g=>d("name",g.target.value),className:"input-field",placeholder:"Your name"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-1.5",children:[a.jsx(yc,{size:14})," Email"]}),a.jsx("input",{type:"email",value:o.email||"",onChange:g=>d("email",g.target.value),className:"input-field",placeholder:"owner@example.com"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-1.5",children:[a.jsx(Xo,{size:14})," Phone"]}),a.jsx("input",{type:"tel",value:o.phone||"",onChange:g=>d("phone",g.target.value),className:"input-field",placeholder:"555-0100"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Business Information"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-1.5",children:[a.jsx(Ny,{size:14})," Business Name"]}),a.jsx("input",{type:"text",value:o.businessName||"",onChange:g=>d("businessName",g.target.value),className:"input-field",placeholder:"Couch Buddies"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-1.5",children:[a.jsx(En,{size:14})," Business Address"]}),a.jsx("input",{type:"text",value:o.businessAddress||"",onChange:g=>d("businessAddress",g.target.value),className:"input-field",placeholder:"123 Main St, City, State"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Security"}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-1.5",children:[a.jsx(Qo,{size:14})," Login PIN"]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:u?"text":"password",value:o.pin||"",onChange:g=>d("pin",g.target.value),className:"input-field font-mono tracking-widest pr-20",placeholder:"",maxLength:8}),a.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-500 hover:text-gray-300 transition-colors",children:u?"Hide":"Show"})]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"This PIN is used to log in to the Owner Portal"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-white/10",children:[a.jsxs("button",{type:"submit",className:"btn-accent flex items-center gap-2",children:[a.jsx(Kc,{size:16})," Save Changes"]}),a.jsx("button",{type:"button",onClick:p,className:"btn-ghost",children:"Cancel"})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Personal Information"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(Xr,{icon:Zn,label:"Name",value:t.name}),a.jsx(Xr,{icon:yc,label:"Email",value:t.email}),a.jsx(Xr,{icon:Xo,label:"Phone",value:t.phone||""})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Business Information"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(Xr,{icon:Ny,label:"Business Name",value:t.businessName||""}),a.jsx(Xr,{icon:En,label:"Address",value:t.businessAddress||""})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Security"}),a.jsx(Xr,{icon:Qo,label:"Login PIN",value:""})]})]})]})]})}function Xr({icon:t,label:e,value:n}){return a.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl bg-white/5",children:[a.jsx(t,{size:16,className:"text-gray-500 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:e}),a.jsx("p",{className:"text-sm font-medium mt-0.5",children:n})]})]})}function KO(){const{staff:t,loginAsStaff:e,currentUser:n,userRole:s}=Ie(),[o,l]=k.useState(""),[u,h]=k.useState(""),d=On();if(n&&s==="staff")return d("/staff"),null;const m=p=>{if(p.preventDefault(),!o){re.error("Select your name");return}e(o,u)?(re.success("Welcome! You are logged in."),d("/staff")):re.error("Invalid PIN")};return a.jsx("div",{className:"min-h-screen bg-surface-950 flex items-center justify-center p-4",children:a.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:[a.jsxs(Ce,{to:"/",className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-8",children:[a.jsx(Gc,{})," Back to Store"]}),a.jsxs("div",{className:"glass-card",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-brand-500 to-brand-700 flex items-center justify-center mx-auto mb-4",children:a.jsx(Sm,{size:28})}),a.jsx("h1",{className:"font-display text-2xl font-bold",children:"Staff Portal"}),a.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Select your name and enter your PIN"})]}),a.jsxs("form",{onSubmit:m,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Staff Member"}),a.jsxs("select",{value:o,onChange:p=>l(p.target.value),className:"input-field",children:[a.jsx("option",{value:"",className:"bg-surface-800",children:"Select your name..."}),t.map(p=>a.jsxs("option",{value:p.id,className:"bg-surface-800",children:[p.name," (",p.role==="delivery"?" Delivery":" In-Store",")"]},p.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"PIN"}),a.jsx("input",{type:"password",value:u,onChange:p=>h(p.target.value),className:"input-field text-center text-2xl tracking-[0.5em] font-mono",placeholder:"",maxLength:4})]}),a.jsx("button",{type:"submit",className:"btn-primary w-full py-4 text-lg",children:"Sign In"})]}),a.jsx("p",{className:"text-xs text-gray-600 text-center mt-6",children:"Demo: Select any staff member, PIN matches their role (1111, 2222, etc.)"})]})]})})}function qO(){var m;const{currentUser:t,logout:e}=Ie(),n=On(),[s,o]=k.useState(!1),l=(t==null?void 0:t.role)==="delivery"||(t==null?void 0:t.clockType)==="delivery",u=(t==null?void 0:t.role)==="onsite"||(t==null?void 0:t.clockType)==="onsite",h=[{to:"/staff",icon:Yc,label:"Dashboard",end:!0},...l||(t==null?void 0:t.role)==="delivery"?[{to:"/staff/delivery",icon:kn,label:"Deliveries"}]:[],...u||(t==null?void 0:t.role)==="onsite"?[{to:"/staff/instore",icon:fr,label:"In-Store POS"}]:[],{to:"/staff/chat",icon:d_,label:"Team Chat"},{to:"/staff/wallet",icon:jt,label:"My Wallet"},{to:"/staff/profile",icon:Zn,label:"My Profile"}],d=()=>{e(),n("/")};return a.jsxs("div",{className:"min-h-screen bg-surface-950 flex",children:[a.jsxs("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-surface-900 border-r border-white/5 flex flex-col transition-transform duration-300 ${s?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:[a.jsxs("div",{className:"p-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-9 h-9 rounded-lg bg-gradient-to-br from-brand-500 to-brand-700 flex items-center justify-center font-bold text-sm",children:"CB"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-display font-bold text-sm",children:"Couch Buddies"}),a.jsx("p",{className:"text-xs text-brand-400",children:"Staff Portal"})]})]}),a.jsx("button",{className:"lg:hidden text-gray-400",onClick:()=>o(!1),children:a.jsx(Jn,{size:20})})]}),a.jsx("div",{className:"px-4 mb-4",children:a.jsxs("div",{className:"p-3 rounded-xl bg-white/5 flex items-center gap-3",children:[a.jsx("div",{className:"w-9 h-9 rounded-full overflow-hidden flex items-center justify-center text-xs font-bold bg-brand-500/20 text-brand-400 flex-shrink-0",children:t!=null&&t.photoURL?a.jsx("img",{src:t.photoURL,alt:t.name,className:"w-full h-full object-cover"}):(t==null?void 0:t.avatar)||((m=t==null?void 0:t.name)==null?void 0:m.charAt(0))||"?"}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"font-medium text-sm truncate",children:t==null?void 0:t.name}),a.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:t!=null&&t.clockedIn?a.jsxs("span",{className:"text-emerald-400",children:[" Clocked In  ",(t==null?void 0:t.clockType)||(t==null?void 0:t.role)]}):a.jsx("span",{className:"text-gray-500",children:" Not clocked in"})})]})]})}),a.jsx("nav",{className:"flex-1 px-3 space-y-1",children:h.map(p=>a.jsxs(pw,{to:p.to,end:p.end,onClick:()=>o(!1),className:({isActive:g})=>`sidebar-link ${g?"active":""}`,children:[a.jsx(p.icon,{size:18}),a.jsx("span",{className:"text-sm font-medium",children:p.label})]},p.to))}),a.jsx("div",{className:"p-4 border-t border-white/5",children:a.jsxs("button",{onClick:d,className:"sidebar-link w-full text-red-400 hover:text-red-300 hover:bg-red-500/10",children:[a.jsx(bm,{size:18}),a.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),a.jsxs("main",{className:"flex-1 min-w-0",children:[a.jsxs("header",{className:"sticky top-0 z-30 h-16 glass border-b border-white/5 flex items-center px-4 sm:px-6 gap-4",children:[a.jsx("button",{className:"lg:hidden text-gray-400 hover:text-white",onClick:()=>o(!0),children:a.jsx(Nm,{size:20})}),a.jsx("h2",{className:"font-display font-semibold text-lg",children:"Staff Dashboard"})]}),a.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:a.jsx(fw,{})})]})]})}function QO(){var j,D,L,W,z;const{currentUser:t,staff:e,clockIn:n,clockOut:s,updateStaffLocation:o,orders:l,updateStaff:u}=Ie(),h=e.find(F=>F.id===(t==null?void 0:t.id))||t,[d,m]=k.useState((h==null?void 0:h.role)||"onsite"),[p,g]=k.useState(!1),[y,w]=k.useState(!1),_=l.filter(F=>F.driverId===(h==null?void 0:h.id)&&F.status!=="delivered"&&F.status!=="cancelled");k.useEffect(()=>{if(!(h!=null&&h.clockedIn))return;let F;return navigator.geolocation&&(F=navigator.geolocation.watchPosition(X=>{o(h.id,{lat:X.coords.latitude,lng:X.coords.longitude}),g(!0)},()=>{},{enableHighAccuracy:!0,maximumAge:1e4})),()=>{F!==void 0&&navigator.geolocation.clearWatch(F)}},[h==null?void 0:h.clockedIn]);const C=()=>{if(w(!0),!navigator.geolocation){re.error("GPS not available on this device"),w(!1);return}navigator.geolocation.getCurrentPosition(F=>{const X={lat:F.coords.latitude,lng:F.coords.longitude};n(h.id,d,X),u(h.id,{clockedIn:!0,clockType:d,location:X}),g(!0),w(!1),re.success(`Clocked in as ${d==="delivery"?"Delivery":"In-Store"}!`)},F=>{w(!1),re.error("Please enable GPS/Location to clock in")},{enableHighAccuracy:!0,timeout:1e4})},S=()=>{s(h.id),u(h.id,{clockedIn:!1,clockType:null,location:null}),re.success("Clocked out successfully")},T=((h==null?void 0:h.clockHistory)||[]).filter(F=>{const X=new Date(F.time).toDateString(),ie=new Date().toDateString();return X===ie});let N=0;for(let F=0;F<T.length;F+=2){const X=T[F],ie=T[F+1];if((X==null?void 0:X.type)==="clock-in"){const xe=ie?new Date(ie.time):new Date;N+=(xe-new Date(X.time))/36e5}}return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"font-display text-2xl sm:text-3xl font-bold",children:["Hey, ",(j=h==null?void 0:h.name)==null?void 0:j.split(" ")[0],"! "]}),a.jsx("p",{className:"text-gray-400 mt-1",children:h!=null&&h.clockedIn?`You're clocked in as ${(h==null?void 0:h.clockType)||(h==null?void 0:h.role)}`:"Clock in to start your shift"})]}),a.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`glass-card ${h!=null&&h.clockedIn?"border-emerald-500/30 glow-brand":""}`,children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Kn,{size:20,className:h!=null&&h.clockedIn?"text-emerald-400":"text-gray-400"}),a.jsx("h2",{className:"font-semibold text-lg",children:"Time Clock"})]}),a.jsxs("p",{className:"text-sm text-gray-400",children:["Today: ",N.toFixed(1),"h worked"]}),(h==null?void 0:h.clockedIn)&&(h==null?void 0:h.location)&&a.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[a.jsx(En,{size:12,className:"text-emerald-400"}),"GPS: ",(D=h.location.lat)==null?void 0:D.toFixed(4),", ",(L=h.location.lng)==null?void 0:L.toFixed(4)]})]}),h!=null&&h.clockedIn?a.jsxs("button",{onClick:S,className:"btn-danger py-3 px-6 flex items-center gap-2",children:[a.jsx(Kn,{size:18})," Clock Out"]}):a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 w-full sm:w-auto",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>m("onsite"),className:`flex-1 sm:flex-auto px-4 py-2.5 rounded-xl text-sm font-medium flex items-center gap-2 transition-all ${d==="onsite"?"bg-brand-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[a.jsx(fr,{size:16})," In-Store"]}),a.jsxs("button",{onClick:()=>m("delivery"),className:`flex-1 sm:flex-auto px-4 py-2.5 rounded-xl text-sm font-medium flex items-center gap-2 transition-all ${d==="delivery"?"bg-brand-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[a.jsx(kn,{size:16})," Delivery"]})]}),a.jsx("button",{onClick:C,disabled:y,className:"btn-success py-3 px-6 flex items-center justify-center gap-2",children:y?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Getting GPS..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Kn,{size:18})," Clock In"]})})]})]}),!(h!=null&&h.clockedIn)&&a.jsxs("div",{className:"mt-4 p-3 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-start gap-2",children:[a.jsx(b4,{size:16,className:"text-amber-400 shrink-0 mt-0.5"}),a.jsx("p",{className:"text-xs text-amber-300",children:"GPS location is required for clock-in. Your browser will ask for permission."})]})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[a.jsxs(Ce,{to:"/staff/wallet",className:"glass-card hover:border-white/20 transition-all group",children:[a.jsx(jt,{size:20,className:"text-emerald-400 mb-2"}),a.jsxs("p",{className:"text-xl font-bold",children:["$",((z=(W=h==null?void 0:h.wallet)==null?void 0:W.balance)==null?void 0:z.toFixed(2))||"0.00"]}),a.jsx("p",{className:"text-xs text-gray-400 mt-1 group-hover:text-white transition-colors",children:"My Wallet"})]}),a.jsxs(Ce,{to:"/staff/chat",className:"glass-card hover:border-white/20 transition-all group",children:[a.jsx(d_,{size:20,className:"text-blue-400 mb-2"}),a.jsx("p",{className:"text-xl font-bold",children:"Chat"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1 group-hover:text-white transition-colors",children:"Team Messages"})]}),((h==null?void 0:h.role)==="delivery"||(h==null?void 0:h.clockType)==="delivery")&&a.jsxs(Ce,{to:"/staff/delivery",className:"glass-card hover:border-white/20 transition-all group",children:[a.jsx(kn,{size:20,className:"text-brand-400 mb-2"}),a.jsx("p",{className:"text-xl font-bold",children:_.length}),a.jsx("p",{className:"text-xs text-gray-400 mt-1 group-hover:text-white transition-colors",children:"Active Orders"})]}),((h==null?void 0:h.role)==="onsite"||(h==null?void 0:h.clockType)==="onsite")&&a.jsxs(Ce,{to:"/staff/instore",className:"glass-card hover:border-white/20 transition-all group",children:[a.jsx(fr,{size:20,className:"text-accent-400 mb-2"}),a.jsx("p",{className:"text-xl font-bold",children:"POS"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1 group-hover:text-white transition-colors",children:"In-Store Sales"})]})]}),a.jsxs("div",{className:"glass-card",children:[a.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[a.jsx(Kn,{size:18,className:"text-brand-400"})," Recent Clock History"]}),((h==null?void 0:h.clockHistory)||[]).length===0?a.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:"No clock history yet"}):a.jsx("div",{className:"space-y-2",children:[...(h==null?void 0:h.clockHistory)||[]].reverse().slice(0,10).map((F,X)=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${F.type==="clock-in"?"bg-emerald-400":"bg-red-400"}`}),a.jsx("div",{children:a.jsxs("p",{className:"text-sm font-medium",children:[F.type==="clock-in"?"Clocked In":"Clocked Out",F.staffType&&a.jsxs("span",{className:"text-gray-400",children:[" (",F.staffType,")"]})]})})]}),a.jsx("p",{className:"text-xs text-gray-400",children:new Date(F.time).toLocaleString()})]},X))})]})]})}const XO=["general","deliveries","store","announcements"];function ZO(){const{currentUser:t,messages:e,sendMessage:n,staff:s}=Ie(),[o,l]=k.useState("general"),[u,h]=k.useState(""),d=k.useRef(null),m=e.filter(y=>y.channel===o).sort((y,w)=>new Date(y.time)-new Date(w.time));k.useEffect(()=>{var y;(y=d.current)==null||y.scrollIntoView({behavior:"smooth"})},[m.length]);const p=y=>{y.preventDefault(),u.trim()&&(n({senderId:t.id,senderName:t.name,text:u.trim(),channel:o}),h(""))},g=s.filter(y=>y.clockedIn);return a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 h-[calc(100vh-12rem)]",children:[a.jsxs("div",{className:"lg:w-64 shrink-0 flex flex-row lg:flex-col gap-4",children:[a.jsxs("div",{className:"glass-card flex-1 lg:flex-none",children:[a.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Channels"}),a.jsx("div",{className:"space-y-1",children:XO.map(y=>a.jsxs("button",{onClick:()=>l(y),className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-all ${o===y?"bg-brand-500/20 text-brand-400 border border-brand-500/20":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[a.jsx(yh,{size:14}),y]},y))})]}),a.jsxs("div",{className:"glass-card flex-1 lg:flex-none hidden lg:block",children:[a.jsxs("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:["Online  ",g.length]}),a.jsxs("div",{className:"space-y-2",children:[g.map(y=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400"}),a.jsx("span",{className:"text-sm text-gray-300",children:y.name})]},y.id)),s.filter(y=>!y.clockedIn).map(y=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-600"}),a.jsx("span",{className:"text-sm text-gray-500",children:y.name})]},y.id))]})]})]}),a.jsxs("div",{className:"flex-1 glass-card flex flex-col p-0 min-h-0",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-white/5 flex items-center gap-2",children:[a.jsx(yh,{size:18,className:"text-brand-400"}),a.jsx("h2",{className:"font-semibold",children:o}),a.jsxs("span",{className:"text-xs text-gray-400 ml-auto",children:[m.length," messages"]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[m.length===0?a.jsxs("div",{className:"text-center text-gray-500 text-sm py-12",children:[a.jsx(yh,{size:32,className:"mx-auto mb-3 text-gray-600"}),a.jsxs("p",{children:["No messages in #",o," yet"]}),a.jsx("p",{className:"text-xs mt-1",children:"Start the conversation!"})]}):m.map(y=>{var _;const w=y.senderId===t.id;return a.jsxs("div",{className:`flex gap-3 ${w?"flex-row-reverse":""}`,children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ${w?"bg-brand-500/20 text-brand-400":"bg-accent-500/20 text-accent-400"}`,children:((_=y.senderName)==null?void 0:_.split(" ").map(C=>C[0]).join(""))||a.jsx(Zn,{size:14})}),a.jsxs("div",{className:`max-w-[75%] ${w?"text-right":""}`,children:[a.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[a.jsx("span",{className:`text-xs font-medium ${w?"text-brand-400":"text-accent-400"}`,children:w?"You":y.senderName}),a.jsx("span",{className:"text-xs text-gray-600",children:Dn(new Date(y.time),"h:mm a")})]}),a.jsx("div",{className:`inline-block px-4 py-2.5 rounded-2xl text-sm ${w?"bg-brand-500/20 text-white rounded-tr-md":"bg-white/5 text-gray-200 rounded-tl-md"}`,children:y.text})]})]},y.id)}),a.jsx("div",{ref:d})]}),a.jsx("form",{onSubmit:p,className:"p-4 border-t border-white/5",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:u,onChange:y=>h(y.target.value),placeholder:`Message #${o}...`,className:"input-field flex-1",autoFocus:!0}),a.jsx("button",{type:"submit",disabled:!u.trim(),className:"btn-primary px-4 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(I4,{size:18})})]})})]})]})}function JO(){var o,l,u;const{currentUser:t,staff:e}=Ie(),n=e.find(h=>h.id===(t==null?void 0:t.id))||t,s=[...((o=n==null?void 0:n.wallet)==null?void 0:o.transactions)||[]].sort((h,d)=>new Date(d.time)-new Date(h.time));return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-display text-2xl sm:text-3xl font-bold",children:"My Wallet"}),a.jsx("p",{className:"text-gray-400 mt-1",children:"View your earnings and payment history"})]}),a.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card glow-brand relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-emerald-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),a.jsxs("div",{className:"relative",children:[a.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Available Balance"}),a.jsxs("p",{className:"text-4xl sm:text-5xl font-bold font-display text-emerald-400",children:["$",((u=(l=n==null?void 0:n.wallet)==null?void 0:l.balance)==null?void 0:u.toFixed(2))||"0.00"]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Payments are made by the owner through the treasury system"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"glass-card",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Total Earned"}),a.jsxs("p",{className:"text-xl font-bold text-emerald-400",children:["$",s.reduce((h,d)=>h+d.amount,0).toFixed(2)]})]}),a.jsxs("div",{className:"glass-card",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Payments Received"}),a.jsx("p",{className:"text-xl font-bold",children:s.length})]}),a.jsxs("div",{className:"glass-card",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Last Payment"}),a.jsx("p",{className:"text-xl font-bold",children:s.length>0?Dn(new Date(s[0].time),"MMM d"):"None"})]})]}),a.jsxs("div",{className:"glass-card",children:[a.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[a.jsx(Kn,{size:18,className:"text-brand-400"})," Payment History"]}),s.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(jt,{size:32,className:"mx-auto text-gray-600 mb-3"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"No payments received yet"})]}):a.jsx("div",{className:"space-y-3",children:s.map(h=>a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500/20 text-emerald-400 flex items-center justify-center",children:a.jsx(hf,{size:18})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:h.note||"Payment"}),a.jsxs("p",{className:"text-xs text-gray-500",children:["From: ",h.from||"Owner","  ",Dn(new Date(h.time),"MMM d, yyyy h:mm a")]})]})]}),a.jsxs("p",{className:"text-lg font-bold text-emerald-400",children:["+$",h.amount.toFixed(2)]})]},h.id))})]})]})}function eL(){var S,T;const{currentUser:t,staff:e,orders:n,updateOrderStatus:s}=Ie(),o=e.find(N=>N.id===(t==null?void 0:t.id))||t,[l,u]=k.useState(null),h=n.filter(N=>N.driverId===(o==null?void 0:o.id)),d=h.filter(N=>!["delivered","cancelled"].includes(N.status)),m=n.filter(N=>N.status==="pending"&&N.delivery==="delivery"&&!N.driverId),p=h.filter(N=>N.status==="delivered"),g=N=>{s(N,"assigned",`Accepted by ${o.name}`),re.success("Order accepted!")},y=N=>{s(N,"picked-up",`Picked up by ${o.name}`),re.success("Marked as picked up!")},w=N=>{s(N,"in-transit",`${o.name} is on the way`),re.success("On the way!")},_=N=>{s(N,"delivered",`Delivered by ${o.name}`),re.success("Order delivered! ")},C=N=>{s(N,"pending",`Declined by ${o.name}`),re("Order returned to queue")};return o!=null&&o.clockedIn?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"font-display text-2xl sm:text-3xl font-bold flex items-center gap-3",children:[a.jsx(kn,{className:"text-brand-400"})," Delivery Mode"]}),a.jsxs("p",{className:"text-gray-400 mt-1",children:[d.length," active  ",p.length," completed today"]})]}),(o==null?void 0:o.location)&&a.jsxs("div",{className:"p-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center gap-2",children:[a.jsx(P4,{size:16,className:"text-emerald-400"}),a.jsx("span",{className:"text-sm text-emerald-300",children:"GPS Active"}),a.jsxs("span",{className:"text-xs text-gray-400 ml-auto",children:[(S=o.location.lat)==null?void 0:S.toFixed(4),", ",(T=o.location.lng)==null?void 0:T.toFixed(4)]})]}),m.length>0&&a.jsxs("div",{children:[a.jsxs("h2",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[a.jsx(yr,{size:18,className:"text-amber-400"})," Available Orders"]}),a.jsx("div",{className:"space-y-3",children:m.map(N=>{var j;return a.jsxs(je.div,{layout:!0,className:"glass-card border-amber-500/20",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold",children:N.id}),a.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-1 mt-1",children:[a.jsx(Zn,{size:12})," ",N.customerName||"Guest"]}),N.shippingAddress&&a.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-1 mt-0.5",children:[a.jsx(En,{size:12})," ",N.shippingAddress]})]}),a.jsxs("p",{className:"text-lg font-bold text-brand-400",children:["$",(N.total||0).toFixed(2)]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mb-3",children:[a.jsxs("span",{children:[((j=N.items)==null?void 0:j.length)||0," items"]}),a.jsx("span",{children:""}),a.jsx("span",{children:Dn(new Date(N.createdAt),"h:mm a")})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>g(N.id),className:"flex-1 btn-success py-2.5 text-sm flex items-center justify-center gap-1.5",children:[a.jsx(Os,{size:16})," Accept"]}),a.jsxs("button",{onClick:()=>C(N.id),className:"btn-danger py-2.5 px-4 text-sm flex items-center gap-1.5",children:[a.jsx(Jn,{size:16})," Deny"]})]})]},N.id)})})]}),a.jsxs("div",{children:[a.jsxs("h2",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[a.jsx(kn,{size:18,className:"text-brand-400"})," My Active Orders"]}),d.length===0?a.jsxs("div",{className:"glass-card text-center py-12",children:[a.jsx(yr,{size:32,className:"mx-auto text-gray-600 mb-3"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"No active deliveries"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Accept orders from the queue above"})]}):a.jsx("div",{className:"space-y-4",children:d.map(N=>a.jsxs(je.div,{layout:!0,className:"glass-card border-brand-500/20",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"font-bold",children:N.id}),a.jsx("span",{className:`badge ${N.status==="assigned"?"badge-warning":N.status==="picked-up"?"badge-info":N.status==="in-transit"?"badge-brand":"badge-success"}`,children:N.status})]}),N.customerPhone&&a.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-1 mt-1",children:[a.jsx(Xo,{size:12})," ",N.customerPhone]}),N.shippingAddress&&a.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-1 mt-0.5",children:[a.jsx(En,{size:12})," ",N.shippingAddress]})]}),a.jsxs("p",{className:"text-lg font-bold text-brand-400",children:["$",(N.total||0).toFixed(2)]})]}),a.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-1",children:(N.items||[]).map((j,D)=>a.jsx("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white/5 shrink-0",children:a.jsxs("span",{className:"text-xs font-medium",children:[j.name," x",j.quantity]})},D))}),a.jsxs("div",{className:"flex gap-2",children:[N.status==="assigned"&&a.jsx("button",{onClick:()=>y(N.id),className:"flex-1 btn-primary py-2.5 text-sm",children:" Mark Picked Up"}),N.status==="picked-up"&&a.jsx("button",{onClick:()=>w(N.id),className:"flex-1 btn-primary py-2.5 text-sm",children:" Start Delivery"}),N.status==="in-transit"&&a.jsx("button",{onClick:()=>_(N.id),className:"flex-1 btn-success py-2.5 text-sm",children:" Mark Delivered"})]})]},N.id))})]}),p.length>0&&a.jsxs("div",{children:[a.jsx("h2",{className:"font-semibold text-lg mb-3 text-gray-400",children:"Completed Today"}),a.jsx("div",{className:"space-y-2",children:p.slice(0,5).map(N=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/5",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:N.id}),a.jsx("p",{className:"text-xs text-gray-400",children:N.customerName||"Guest"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-semibold text-emerald-400",children:["$",(N.total||0).toFixed(2)]}),a.jsx("span",{className:"badge-success",children:"Delivered"})]})]},N.id))})]})]}):a.jsxs("div",{className:"text-center py-20",children:[a.jsx(kn,{size:48,className:"mx-auto text-gray-600 mb-4"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Not Clocked In"}),a.jsx("p",{className:"text-gray-400",children:"Clock in from the Dashboard to access delivery mode"})]})}var tL=Object.defineProperty,Tc=Object.getOwnPropertySymbols,cN=Object.prototype.hasOwnProperty,uN=Object.prototype.propertyIsEnumerable,Zv=(t,e,n)=>e in t?tL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ff=(t,e)=>{for(var n in e||(e={}))cN.call(e,n)&&Zv(t,n,e[n]);if(Tc)for(var n of Tc(e))uN.call(e,n)&&Zv(t,n,e[n]);return t},Bf=(t,e)=>{var n={};for(var s in t)cN.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&Tc)for(var s of Tc(t))e.indexOf(s)<0&&uN.call(t,s)&&(n[s]=t[s]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var wr;(t=>{const e=class be{constructor(d,m,p,g){if(this.version=d,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],d<be.MIN_VERSION||d>be.MAX_VERSION)throw new RangeError("Version value out of range");if(g<-1||g>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let y=[];for(let _=0;_<this.size;_++)y.push(!1);for(let _=0;_<this.size;_++)this.modules.push(y.slice()),this.isFunction.push(y.slice());this.drawFunctionPatterns();const w=this.addEccAndInterleave(p);if(this.drawCodewords(w),g==-1){let _=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const S=this.getPenaltyScore();S<_&&(g=C,_=S),this.applyMask(C)}}o(0<=g&&g<=7),this.mask=g,this.applyMask(g),this.drawFormatBits(g),this.isFunction=[]}static encodeText(d,m){const p=t.QrSegment.makeSegments(d);return be.encodeSegments(p,m)}static encodeBinary(d,m){const p=t.QrSegment.makeBytes(d);return be.encodeSegments([p],m)}static encodeSegments(d,m,p=1,g=40,y=-1,w=!0){if(!(be.MIN_VERSION<=p&&p<=g&&g<=be.MAX_VERSION)||y<-1||y>7)throw new RangeError("Invalid value");let _,C;for(_=p;;_++){const j=be.getNumDataCodewords(_,m)*8,D=u.getTotalBits(d,_);if(D<=j){C=D;break}if(_>=g)throw new RangeError("Data too long")}for(const j of[be.Ecc.MEDIUM,be.Ecc.QUARTILE,be.Ecc.HIGH])w&&C<=be.getNumDataCodewords(_,j)*8&&(m=j);let S=[];for(const j of d){n(j.mode.modeBits,4,S),n(j.numChars,j.mode.numCharCountBits(_),S);for(const D of j.getData())S.push(D)}o(S.length==C);const T=be.getNumDataCodewords(_,m)*8;o(S.length<=T),n(0,Math.min(4,T-S.length),S),n(0,(8-S.length%8)%8,S),o(S.length%8==0);for(let j=236;S.length<T;j^=253)n(j,8,S);let N=[];for(;N.length*8<S.length;)N.push(0);return S.forEach((j,D)=>N[D>>>3]|=j<<7-(D&7)),new be(_,m,N,y)}getModule(d,m){return 0<=d&&d<this.size&&0<=m&&m<this.size&&this.modules[m][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let p=0;p<this.size;p++)this.setFunctionModule(6,p,p%2==0),this.setFunctionModule(p,6,p%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),m=d.length;for(let p=0;p<m;p++)for(let g=0;g<m;g++)p==0&&g==0||p==0&&g==m-1||p==m-1&&g==0||this.drawAlignmentPattern(d[p],d[g]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const m=this.errorCorrectionLevel.formatBits<<3|d;let p=m;for(let y=0;y<10;y++)p=p<<1^(p>>>9)*1335;const g=(m<<10|p)^21522;o(g>>>15==0);for(let y=0;y<=5;y++)this.setFunctionModule(8,y,s(g,y));this.setFunctionModule(8,7,s(g,6)),this.setFunctionModule(8,8,s(g,7)),this.setFunctionModule(7,8,s(g,8));for(let y=9;y<15;y++)this.setFunctionModule(14-y,8,s(g,y));for(let y=0;y<8;y++)this.setFunctionModule(this.size-1-y,8,s(g,y));for(let y=8;y<15;y++)this.setFunctionModule(8,this.size-15+y,s(g,y));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let p=0;p<12;p++)d=d<<1^(d>>>11)*7973;const m=this.version<<12|d;o(m>>>18==0);for(let p=0;p<18;p++){const g=s(m,p),y=this.size-11+p%3,w=Math.floor(p/3);this.setFunctionModule(y,w,g),this.setFunctionModule(w,y,g)}}drawFinderPattern(d,m){for(let p=-4;p<=4;p++)for(let g=-4;g<=4;g++){const y=Math.max(Math.abs(g),Math.abs(p)),w=d+g,_=m+p;0<=w&&w<this.size&&0<=_&&_<this.size&&this.setFunctionModule(w,_,y!=2&&y!=4)}}drawAlignmentPattern(d,m){for(let p=-2;p<=2;p++)for(let g=-2;g<=2;g++)this.setFunctionModule(d+g,m+p,Math.max(Math.abs(g),Math.abs(p))!=1)}setFunctionModule(d,m,p){this.modules[m][d]=p,this.isFunction[m][d]=!0}addEccAndInterleave(d){const m=this.version,p=this.errorCorrectionLevel;if(d.length!=be.getNumDataCodewords(m,p))throw new RangeError("Invalid argument");const g=be.NUM_ERROR_CORRECTION_BLOCKS[p.ordinal][m],y=be.ECC_CODEWORDS_PER_BLOCK[p.ordinal][m],w=Math.floor(be.getNumRawDataModules(m)/8),_=g-w%g,C=Math.floor(w/g);let S=[];const T=be.reedSolomonComputeDivisor(y);for(let j=0,D=0;j<g;j++){let L=d.slice(D,D+C-y+(j<_?0:1));D+=L.length;const W=be.reedSolomonComputeRemainder(L,T);j<_&&L.push(0),S.push(L.concat(W))}let N=[];for(let j=0;j<S[0].length;j++)S.forEach((D,L)=>{(j!=C-y||L>=_)&&N.push(D[j])});return o(N.length==w),N}drawCodewords(d){if(d.length!=Math.floor(be.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let p=this.size-1;p>=1;p-=2){p==6&&(p=5);for(let g=0;g<this.size;g++)for(let y=0;y<2;y++){const w=p-y,C=(p+1&2)==0?this.size-1-g:g;!this.isFunction[C][w]&&m<d.length*8&&(this.modules[C][w]=s(d[m>>>3],7-(m&7)),m++)}}o(m==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let p=0;p<this.size;p++){let g;switch(d){case 0:g=(p+m)%2==0;break;case 1:g=m%2==0;break;case 2:g=p%3==0;break;case 3:g=(p+m)%3==0;break;case 4:g=(Math.floor(p/3)+Math.floor(m/2))%2==0;break;case 5:g=p*m%2+p*m%3==0;break;case 6:g=(p*m%2+p*m%3)%2==0;break;case 7:g=((p+m)%2+p*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][p]&&g&&(this.modules[m][p]=!this.modules[m][p])}}getPenaltyScore(){let d=0;for(let y=0;y<this.size;y++){let w=!1,_=0,C=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[y][S]==w?(_++,_==5?d+=be.PENALTY_N1:_>5&&d++):(this.finderPenaltyAddHistory(_,C),w||(d+=this.finderPenaltyCountPatterns(C)*be.PENALTY_N3),w=this.modules[y][S],_=1);d+=this.finderPenaltyTerminateAndCount(w,_,C)*be.PENALTY_N3}for(let y=0;y<this.size;y++){let w=!1,_=0,C=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[S][y]==w?(_++,_==5?d+=be.PENALTY_N1:_>5&&d++):(this.finderPenaltyAddHistory(_,C),w||(d+=this.finderPenaltyCountPatterns(C)*be.PENALTY_N3),w=this.modules[S][y],_=1);d+=this.finderPenaltyTerminateAndCount(w,_,C)*be.PENALTY_N3}for(let y=0;y<this.size-1;y++)for(let w=0;w<this.size-1;w++){const _=this.modules[y][w];_==this.modules[y][w+1]&&_==this.modules[y+1][w]&&_==this.modules[y+1][w+1]&&(d+=be.PENALTY_N2)}let m=0;for(const y of this.modules)m=y.reduce((w,_)=>w+(_?1:0),m);const p=this.size*this.size,g=Math.ceil(Math.abs(m*20-p*10)/p)-1;return o(0<=g&&g<=9),d+=g*be.PENALTY_N4,o(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let p=[6];for(let g=this.size-7;p.length<d;g-=m)p.splice(1,0,g);return p}}static getNumRawDataModules(d){if(d<be.MIN_VERSION||d>be.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*d+128)*d+64;if(d>=2){const p=Math.floor(d/7)+2;m-=(25*p-10)*p-55,d>=7&&(m-=36)}return o(208<=m&&m<=29648),m}static getNumDataCodewords(d,m){return Math.floor(be.getNumRawDataModules(d)/8)-be.ECC_CODEWORDS_PER_BLOCK[m.ordinal][d]*be.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let m=[];for(let g=0;g<d-1;g++)m.push(0);m.push(1);let p=1;for(let g=0;g<d;g++){for(let y=0;y<m.length;y++)m[y]=be.reedSolomonMultiply(m[y],p),y+1<m.length&&(m[y]^=m[y+1]);p=be.reedSolomonMultiply(p,2)}return m}static reedSolomonComputeRemainder(d,m){let p=m.map(g=>0);for(const g of d){const y=g^p.shift();p.push(0),m.forEach((w,_)=>p[_]^=be.reedSolomonMultiply(w,y))}return p}static reedSolomonMultiply(d,m){if(d>>>8||m>>>8)throw new RangeError("Byte out of range");let p=0;for(let g=7;g>=0;g--)p=p<<1^(p>>>7)*285,p^=(m>>>g&1)*d;return o(p>>>8==0),p}finderPenaltyCountPatterns(d){const m=d[1];o(m<=this.size*3);const p=m>0&&d[2]==m&&d[3]==m*3&&d[4]==m&&d[5]==m;return(p&&d[0]>=m*4&&d[6]>=m?1:0)+(p&&d[6]>=m*4&&d[0]>=m?1:0)}finderPenaltyTerminateAndCount(d,m,p){return d&&(this.finderPenaltyAddHistory(m,p),m=0),m+=this.size,this.finderPenaltyAddHistory(m,p),this.finderPenaltyCountPatterns(p)}finderPenaltyAddHistory(d,m){m[0]==0&&(d+=this.size),m.pop(),m.unshift(d)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(h,d,m){if(d<0||d>31||h>>>d)throw new RangeError("Value out of range");for(let p=d-1;p>=0;p--)m.push(h>>>p&1)}function s(h,d){return(h>>>d&1)!=0}function o(h){if(!h)throw new Error("Assertion error")}const l=class Je{constructor(d,m,p){if(this.mode=d,this.numChars=m,this.bitData=p,m<0)throw new RangeError("Invalid argument");this.bitData=p.slice()}static makeBytes(d){let m=[];for(const p of d)n(p,8,m);return new Je(Je.Mode.BYTE,d.length,m)}static makeNumeric(d){if(!Je.isNumeric(d))throw new RangeError("String contains non-numeric characters");let m=[];for(let p=0;p<d.length;){const g=Math.min(d.length-p,3);n(parseInt(d.substring(p,p+g),10),g*3+1,m),p+=g}return new Je(Je.Mode.NUMERIC,d.length,m)}static makeAlphanumeric(d){if(!Je.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],p;for(p=0;p+2<=d.length;p+=2){let g=Je.ALPHANUMERIC_CHARSET.indexOf(d.charAt(p))*45;g+=Je.ALPHANUMERIC_CHARSET.indexOf(d.charAt(p+1)),n(g,11,m)}return p<d.length&&n(Je.ALPHANUMERIC_CHARSET.indexOf(d.charAt(p)),6,m),new Je(Je.Mode.ALPHANUMERIC,d.length,m)}static makeSegments(d){return d==""?[]:Je.isNumeric(d)?[Je.makeNumeric(d)]:Je.isAlphanumeric(d)?[Je.makeAlphanumeric(d)]:[Je.makeBytes(Je.toUtf8ByteArray(d))]}static makeEci(d){let m=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)n(d,8,m);else if(d<16384)n(2,2,m),n(d,14,m);else if(d<1e6)n(6,3,m),n(d,21,m);else throw new RangeError("ECI assignment value out of range");return new Je(Je.Mode.ECI,0,m)}static isNumeric(d){return Je.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return Je.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,m){let p=0;for(const g of d){const y=g.mode.numCharCountBits(m);if(g.numChars>=1<<y)return 1/0;p+=4+y+g.bitData.length}return p}static toUtf8ByteArray(d){d=encodeURI(d);let m=[];for(let p=0;p<d.length;p++)d.charAt(p)!="%"?m.push(d.charCodeAt(p)):(m.push(parseInt(d.substring(p+1,p+3),16)),p+=2);return m}};l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let u=l;t.QrSegment=l})(wr||(wr={}));(t=>{(e=>{const n=class{constructor(o,l){this.ordinal=o,this.formatBits=l}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(wr||(wr={}));(t=>{(e=>{const n=class{constructor(o,l){this.modeBits=o,this.numBitsCharCount=l}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(wr||(wr={}));var ii=wr;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var nL={L:ii.QrCode.Ecc.LOW,M:ii.QrCode.Ecc.MEDIUM,Q:ii.QrCode.Ecc.QUARTILE,H:ii.QrCode.Ecc.HIGH},dN=128,hN="L",fN="#FFFFFF",mN="#000000",pN=!1,gN=1,sL=4,rL=0,iL=.1;function xN(t,e=0){const n=[];return t.forEach(function(s,o){let l=null;s.forEach(function(u,h){if(!u&&l!==null){n.push(`M${l+e} ${o+e}h${h-l}v1H${l+e}z`),l=null;return}if(h===s.length-1){if(!u)return;l===null?n.push(`M${h+e},${o+e} h1v1H${h+e}z`):n.push(`M${l+e},${o+e} h${h+1-l}v1H${l+e}z`);return}u&&l===null&&(l=h)})}),n.join("")}function yN(t,e){return t.slice().map((n,s)=>s<e.y||s>=e.y+e.h?n:n.map((o,l)=>l<e.x||l>=e.x+e.w?o:!1))}function oL(t,e,n,s){if(s==null)return null;const o=t.length+n*2,l=Math.floor(e*iL),u=o/e,h=(s.width||l)*u,d=(s.height||l)*u,m=s.x==null?t.length/2-h/2:s.x*u,p=s.y==null?t.length/2-d/2:s.y*u,g=s.opacity==null?1:s.opacity;let y=null;if(s.excavate){let _=Math.floor(m),C=Math.floor(p),S=Math.ceil(h+m-_),T=Math.ceil(d+p-C);y={x:_,y:C,w:S,h:T}}const w=s.crossOrigin;return{x:m,y:p,h:d,w:h,excavation:y,opacity:g,crossOrigin:w}}function aL(t,e){return e!=null?Math.max(Math.floor(e),0):t?sL:rL}function vN({value:t,level:e,minVersion:n,includeMargin:s,marginSize:o,imageSettings:l,size:u,boostLevel:h}){let d=Me.useMemo(()=>{const _=(Array.isArray(t)?t:[t]).reduce((C,S)=>(C.push(...ii.QrSegment.makeSegments(S)),C),[]);return ii.QrCode.encodeSegments(_,nL[e],n,void 0,void 0,h)},[t,e,n,h]);const{cells:m,margin:p,numCells:g,calculatedImageSettings:y}=Me.useMemo(()=>{let w=d.getModules();const _=aL(s,o),C=w.length+_*2,S=oL(w,u,_,l);return{cells:w,margin:_,numCells:C,calculatedImageSettings:S}},[d,u,l,s,o]);return{qrcode:d,margin:p,cells:m,numCells:g,calculatedImageSettings:y}}var lL=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),cL=Me.forwardRef(function(e,n){const s=e,{value:o,size:l=dN,level:u=hN,bgColor:h=fN,fgColor:d=mN,includeMargin:m=pN,minVersion:p=gN,boostLevel:g,marginSize:y,imageSettings:w}=s,C=Bf(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:S}=C,T=Bf(C,["style"]),N=w==null?void 0:w.src,j=Me.useRef(null),D=Me.useRef(null),L=Me.useCallback(pe=>{j.current=pe,typeof n=="function"?n(pe):n&&(n.current=pe)},[n]),[W,z]=Me.useState(!1),{margin:F,cells:X,numCells:ie,calculatedImageSettings:xe}=vN({value:o,level:u,minVersion:p,boostLevel:g,includeMargin:m,marginSize:y,imageSettings:w,size:l});Me.useEffect(()=>{if(j.current!=null){const pe=j.current,G=pe.getContext("2d");if(!G)return;let me=X;const oe=D.current,Y=xe!=null&&oe!==null&&oe.complete&&oe.naturalHeight!==0&&oe.naturalWidth!==0;Y&&xe.excavation!=null&&(me=yN(X,xe.excavation));const J=window.devicePixelRatio||1;pe.height=pe.width=l*J;const Q=l/ie*J;G.scale(Q,Q),G.fillStyle=h,G.fillRect(0,0,ie,ie),G.fillStyle=d,lL?G.fill(new Path2D(xN(me,F))):X.forEach(function(R,B){R.forEach(function(ge,ye){ge&&G.fillRect(ye+F,B+F,1,1)})}),xe&&(G.globalAlpha=xe.opacity),Y&&G.drawImage(oe,xe.x+F,xe.y+F,xe.w,xe.h)}}),Me.useEffect(()=>{z(!1)},[N]);const $=Ff({height:l,width:l},S);let le=null;return N!=null&&(le=Me.createElement("img",{src:N,key:N,style:{display:"none"},onLoad:()=>{z(!0)},ref:D,crossOrigin:xe==null?void 0:xe.crossOrigin})),Me.createElement(Me.Fragment,null,Me.createElement("canvas",Ff({style:$,height:l,width:l,ref:L,role:"img"},T)),le)});cL.displayName="QRCodeCanvas";var wN=Me.forwardRef(function(e,n){const s=e,{value:o,size:l=dN,level:u=hN,bgColor:h=fN,fgColor:d=mN,includeMargin:m=pN,minVersion:p=gN,boostLevel:g,title:y,marginSize:w,imageSettings:_}=s,C=Bf(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:S,cells:T,numCells:N,calculatedImageSettings:j}=vN({value:o,level:u,minVersion:p,boostLevel:g,includeMargin:m,marginSize:w,imageSettings:_,size:l});let D=T,L=null;_!=null&&j!=null&&(j.excavation!=null&&(D=yN(T,j.excavation)),L=Me.createElement("image",{href:_.src,height:j.h,width:j.w,x:j.x+S,y:j.y+S,preserveAspectRatio:"none",opacity:j.opacity,crossOrigin:j.crossOrigin}));const W=xN(D,S);return Me.createElement("svg",Ff({height:l,width:l,viewBox:`0 0 ${N} ${N}`,ref:n,role:"img"},C),!!y&&Me.createElement("title",null,y),Me.createElement("path",{fill:h,d:`M0,0 h${N}v${N}H0z`,shapeRendering:"crispEdges"}),Me.createElement("path",{fill:d,d:W,shapeRendering:"crispEdges"}),L)});wN.displayName="QRCodeSVG";function uL(){var D,L,W;const{currentUser:t,staff:e,products:n,createInStoreSale:s,completeInStoreSale:o,inStoreSales:l}=Ie(),u=e.find(z=>z.id===(t==null?void 0:t.id))||t,[h,d]=k.useState([]),[m,p]=k.useState(null),[g,y]=k.useState(""),w=n.filter(z=>z.name.toLowerCase().includes(g.toLowerCase())||z.category.toLowerCase().includes(g.toLowerCase())),_=z=>{var X;const F=h.find(ie=>ie.productId===z.id);d(F?h.map(ie=>ie.productId===z.id?{...ie,quantity:ie.quantity+1}:ie):[...h,{productId:z.id,name:z.name,price:z.price,quantity:1,image:(X=z.images)==null?void 0:X[0]}])},C=(z,F)=>{d(h.map(X=>{if(X.productId===z){const ie=X.quantity+F;return ie<=0?null:{...X,quantity:ie}}return X}).filter(Boolean))},S=h.reduce((z,F)=>z+F.price*F.quantity,0),T=()=>{if(h.length===0){re.error("Add items to the cart first");return}const z=s({items:h,total:S,staffId:u.id,staffName:u.name,paymentMethod:"qr-code"});p(z)},N=z=>{o(z),re.success("Sale completed! "),p(null),d([])},j=[...l].filter(z=>z.staffId===(u==null?void 0:u.id)).sort((z,F)=>new Date(F.createdAt)-new Date(z.createdAt)).slice(0,5);return u!=null&&u.clockedIn?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"font-display text-2xl sm:text-3xl font-bold flex items-center gap-3",children:[a.jsx(fr,{className:"text-accent-400"})," In-Store POS"]}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Ring up in-store purchases with QR code payment"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsx("input",{type:"text",value:g,onChange:z=>y(z.target.value),placeholder:"Search products...",className:"input-field"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-[50vh] overflow-y-auto pr-1",children:w.map(z=>{var F;return a.jsxs("button",{onClick:()=>_(z),className:"glass-card p-0 overflow-hidden text-left group hover:border-brand-500/30 transition-all",children:[a.jsx("div",{className:"aspect-square bg-surface-800 overflow-hidden",children:a.jsx("img",{src:((F=z.images)==null?void 0:F[0])||"",alt:z.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"})}),a.jsxs("div",{className:"p-2",children:[a.jsx("p",{className:"text-xs font-medium line-clamp-1",children:z.name}),a.jsxs("p",{className:"text-xs text-brand-400 font-bold",children:["$",z.price.toFixed(2)]})]})]},z.id)})})]}),a.jsxs("div",{className:"glass-card flex flex-col",children:[a.jsx("h3",{className:"font-semibold mb-4",children:"Current Sale"}),h.length===0?a.jsx("div",{className:"flex-1 flex items-center justify-center text-center py-8",children:a.jsxs("div",{children:[a.jsx(fr,{size:32,className:"mx-auto text-gray-600 mb-3"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Tap products to add"})]})}):a.jsx("div",{className:"flex-1 space-y-2 mb-4",children:h.map(z=>a.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-white/5",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:z.name}),a.jsxs("p",{className:"text-xs text-gray-400",children:["$",z.price.toFixed(2)," ea"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>C(z.productId,-1),className:"p-1 rounded bg-white/10 hover:bg-white/20",children:a.jsx(Cm,{size:12})}),a.jsx("span",{className:"w-6 text-center text-sm font-bold",children:z.quantity}),a.jsx("button",{onClick:()=>C(z.productId,1),className:"p-1 rounded bg-white/10 hover:bg-white/20",children:a.jsx(zs,{size:12})})]}),a.jsxs("p",{className:"text-sm font-semibold w-16 text-right",children:["$",(z.price*z.quantity).toFixed(2)]})]},z.productId))}),a.jsxs("div",{className:"border-t border-white/5 pt-4",children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("span",{className:"text-gray-400",children:"Total"}),a.jsxs("span",{className:"text-2xl font-bold text-brand-400",children:["$",S.toFixed(2)]})]}),a.jsx("button",{onClick:T,disabled:h.length===0,className:"btn-primary w-full py-3 disabled:opacity-50 disabled:cursor-not-allowed",children:"Generate QR Code"}),h.length>0&&a.jsx("button",{onClick:()=>d([]),className:"w-full text-center text-sm text-red-400 hover:text-red-300 mt-2 py-1",children:"Clear Cart"})]})]})]}),a.jsx(gi,{children:m&&a.jsx(je.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:a.jsx(je.div,{className:"modal-content max-w-sm text-center",initial:{scale:.95},animate:{scale:1},exit:{scale:.95},children:a.jsxs("div",{className:"p-8",children:[a.jsx("h2",{className:"font-display text-xl font-bold mb-2",children:"Scan to Pay"}),a.jsxs("p",{className:"text-sm text-gray-400 mb-6",children:["Customer scans this QR code to complete their $",(D=m.total)==null?void 0:D.toFixed(2)," purchase"]}),a.jsx("div",{className:"bg-white p-6 rounded-2xl inline-block mb-6",children:a.jsx(wN,{value:JSON.stringify({type:"couch-buddies-payment",saleId:m.id,total:m.total,items:((L=m.items)==null?void 0:L.length)||0,staff:u==null?void 0:u.name}),size:200,level:"H",includeMargin:!0,fgColor:"#0A0E17"})}),a.jsxs("div",{className:"text-sm text-gray-400 mb-6",children:[a.jsxs("p",{children:["Sale ID: ",m.id]}),a.jsxs("p",{children:["Amount: $",(W=m.total)==null?void 0:W.toFixed(2)]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:()=>N(m.id),className:"flex-1 btn-success py-3 flex items-center justify-center gap-2",children:[a.jsx(Os,{size:18})," Payment Received"]}),a.jsx("button",{onClick:()=>p(null),className:"btn-secondary py-3 px-4",children:"Cancel"})]})]})})})}),j.length>0&&a.jsxs("div",{className:"glass-card",children:[a.jsx("h3",{className:"font-semibold mb-4",children:"My Recent Sales"}),a.jsx("div",{className:"space-y-2",children:j.map(z=>{var F,X;return a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/5",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:z.id}),a.jsxs("p",{className:"text-xs text-gray-400",children:[((F=z.items)==null?void 0:F.length)||0," items"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-semibold text-emerald-400",children:["$",(X=z.total)==null?void 0:X.toFixed(2)]}),a.jsx("span",{className:z.status==="completed"?"badge-success":"badge-warning",children:z.status})]})]},z.id)})})]})]}):a.jsxs("div",{className:"text-center py-20",children:[a.jsx(fr,{size:48,className:"mx-auto text-gray-600 mb-4"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Not Clocked In"}),a.jsx("p",{className:"text-gray-400",children:"Clock in from the Dashboard to use In-Store POS"})]})}function dL(){var w;const{currentUser:t,staff:e,updateStaff:n}=Ie(),s=e.find(_=>_.id===(t==null?void 0:t.id))||t,[o,l]=k.useState(!1),[u,h]=k.useState({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",pin:(s==null?void 0:s.pin)||""}),[d,m]=k.useState(!1);k.useEffect(()=>{!o&&s&&h({name:s.name||"",email:s.email||"",phone:s.phone||"",pin:s.pin||""})},[s,o]);const p=(_,C)=>{h(S=>({...S,[_]:C}))},g=_=>{var S,T,N;if(_.preventDefault(),!((S=u.name)!=null&&S.trim())){re.error("Name is required");return}if(!((T=u.email)!=null&&T.trim())){re.error("Email is required");return}if(!u.pin||u.pin.length<4){re.error("PIN must be at least 4 characters");return}const C={name:u.name.trim(),email:u.email.trim(),phone:((N=u.phone)==null?void 0:N.trim())||"",pin:u.pin,avatar:u.name.trim().split(" ").map(j=>j[0]).join("").toUpperCase().slice(0,2)||"??"};n(s.id,C),Ie.setState(j=>({currentUser:{...j.currentUser,...C}})),re.success("Profile updated successfully!"),l(!1)},y=()=>{h({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",pin:(s==null?void 0:s.pin)||""}),l(!1)};return a.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-display text-2xl sm:text-3xl font-bold",children:"My Profile"}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Update your personal info and login PIN"})]}),!o&&a.jsxs("button",{onClick:()=>l(!0),className:"btn-primary flex items-center gap-2",children:[a.jsx(qo,{size:16})," Edit Profile"]})]}),a.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-8 pb-6 border-b border-white/10",children:[a.jsx(lN,{currentPhotoURL:s==null?void 0:s.photoURL,fallbackInitials:(s==null?void 0:s.avatar)||((w=s==null?void 0:s.name)==null?void 0:w.charAt(0))||"?",storagePath:`staff-${(s==null?void 0:s.id)||"unknown"}`,onUploadComplete:_=>{n(s.id,{photoURL:_}),Ie.setState(C=>({currentUser:{...C.currentUser,photoURL:_}}))},gradientClass:s!=null&&s.clockedIn?"from-emerald-500 to-emerald-700":"from-brand-500 to-brand-700",editable:!0,size:"lg"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:s==null?void 0:s.name}),a.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[a.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${(s==null?void 0:s.role)==="delivery"?"bg-blue-500/20 text-blue-400":"bg-accent-500/20 text-accent-400"}`,children:(s==null?void 0:s.role)==="delivery"?"Delivery":"In-Store"}),(s==null?void 0:s.clockedIn)&&a.jsx("span",{className:"text-xs text-emerald-400",children:" On Duty"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Changes sync across all devices"})]})]}),o?a.jsxs("form",{onSubmit:g,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Personal Information"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-1.5",children:[a.jsx(Zn,{size:14})," Full Name"]}),a.jsx("input",{type:"text",value:u.name,onChange:_=>p("name",_.target.value),className:"input-field",placeholder:"Your name"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-1.5",children:[a.jsx(yc,{size:14})," Email"]}),a.jsx("input",{type:"email",value:u.email,onChange:_=>p("email",_.target.value),className:"input-field",placeholder:"you@example.com"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-1.5",children:[a.jsx(Xo,{size:14})," Phone"]}),a.jsx("input",{type:"tel",value:u.phone,onChange:_=>p("phone",_.target.value),className:"input-field",placeholder:"555-0100"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Security"}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-1.5",children:[a.jsx(Qo,{size:14})," Login PIN"]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:d?"text":"password",value:u.pin,onChange:_=>p("pin",_.target.value),className:"input-field font-mono tracking-widest pr-20",placeholder:"",maxLength:8}),a.jsx("button",{type:"button",onClick:()=>m(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-500 hover:text-gray-300 transition-colors",children:d?"Hide":"Show"})]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Used to log in to the Staff Portal"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-white/10",children:[a.jsxs("button",{type:"submit",className:"btn-primary flex items-center gap-2",children:[a.jsx(Kc,{size:16})," Save Changes"]}),a.jsx("button",{type:"button",onClick:y,className:"btn-ghost",children:"Cancel"})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Personal Information"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(_o,{icon:Zn,label:"Name",value:(s==null?void 0:s.name)||""}),a.jsx(_o,{icon:yc,label:"Email",value:(s==null?void 0:s.email)||""}),a.jsx(_o,{icon:Xo,label:"Phone",value:(s==null?void 0:s.phone)||""}),a.jsx(_o,{icon:N4,label:"Role",value:(s==null?void 0:s.role)==="delivery"?"Delivery Driver":"In-Store Staff"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Security"}),a.jsx(_o,{icon:Qo,label:"Login PIN",value:""})]})]})]})]})}function _o({icon:t,label:e,value:n}){return a.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl bg-white/5",children:[a.jsx(t,{size:16,className:"text-gray-500 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:e}),a.jsx("p",{className:"text-sm font-medium mt-0.5",children:n})]})]})}function Jv({children:t,requiredRole:e}){const{currentUser:n,userRole:s}=Ie();if(!n||s!==e){const o=e==="owner"?"/owner/login":e==="staff"?"/staff/login":"/auth";return a.jsx(hw,{to:o,replace:!0})}return t}function hL(){return a.jsxs(wS,{children:[a.jsx(Oe,{path:"/",element:a.jsx(TM,{})}),a.jsx(Oe,{path:"/shop",element:a.jsx(PM,{})}),a.jsx(Oe,{path:"/product/:id",element:a.jsx(v3,{})}),a.jsx(Oe,{path:"/cart",element:a.jsx(_3,{})}),a.jsx(Oe,{path:"/checkout",element:a.jsx(N3,{})}),a.jsx(Oe,{path:"/auth",element:a.jsx(S3,{})}),a.jsx(Oe,{path:"/orders",element:a.jsx(AO,{})}),a.jsx(Oe,{path:"/track/:orderId",element:a.jsx(DO,{})}),a.jsx(Oe,{path:"/owner/login",element:a.jsx(MO,{})}),a.jsxs(Oe,{path:"/owner",element:a.jsx(Jv,{requiredRole:"owner",children:a.jsx(LO,{})}),children:[a.jsx(Oe,{index:!0,element:a.jsx(FO,{})}),a.jsx(Oe,{path:"products",element:a.jsx(zO,{})}),a.jsx(Oe,{path:"staff",element:a.jsx(VO,{})}),a.jsx(Oe,{path:"orders",element:a.jsx(WO,{})}),a.jsx(Oe,{path:"treasury",element:a.jsx($O,{})}),a.jsx(Oe,{path:"ledger",element:a.jsx(HO,{})}),a.jsx(Oe,{path:"profile",element:a.jsx(YO,{})})]}),a.jsx(Oe,{path:"/staff/login",element:a.jsx(KO,{})}),a.jsxs(Oe,{path:"/staff",element:a.jsx(Jv,{requiredRole:"staff",children:a.jsx(qO,{})}),children:[a.jsx(Oe,{index:!0,element:a.jsx(QO,{})}),a.jsx(Oe,{path:"chat",element:a.jsx(ZO,{})}),a.jsx(Oe,{path:"wallet",element:a.jsx(JO,{})}),a.jsx(Oe,{path:"delivery",element:a.jsx(eL,{})}),a.jsx(Oe,{path:"instore",element:a.jsx(uL,{})}),a.jsx(Oe,{path:"profile",element:a.jsx(dL,{})})]}),a.jsx(Oe,{path:"*",element:a.jsx(hw,{to:"/",replace:!0})})]})}const Do=["products","staff","orders","treasury","messages","inStoreSales","customers","ownerProfile"],_N={products:uf,staff:df,orders:[],treasury:{balance:5e4,accounts:[{id:"acc-1",name:"Business Checking",type:"bank",last4:"4521",connected:!0},{id:"acc-2",name:"Business Debit",type:"debit",last4:"8832",connected:!0}],transactions:[{id:"t1",type:"deposit",amount:5e4,note:"Initial funding",time:"2026-01-01T00:00:00Z",from:"Bank Transfer"}]},messages:[{id:"m1",senderId:"staff-1",senderName:"Alex Rivera",text:"Good morning team! Store is open.",time:"2026-02-12T09:00:00Z",channel:"general"},{id:"m2",senderId:"staff-2",senderName:"Jordan Lee",text:"On my way for morning deliveries!",time:"2026-02-12T09:05:00Z",channel:"general"}],inStoreSales:[],customers:[],ownerProfile:{id:"owner-1",name:"Owner",email:"owner@couchbuddies.com",phone:"",businessName:"Couch Buddies",businessAddress:"",pin:"1234",avatar:"CB",createdAt:"2026-01-01T00:00:00Z"}};function Fh(t){return t==null?null:JSON.parse(JSON.stringify(t))}function fL(t,e){return e??{products:[],staff:[],orders:[],messages:[],inStoreSales:[],customers:[],treasury:{balance:0,accounts:[],transactions:[]},ownerProfile:{id:"owner-1",name:"Owner",email:"owner@couchbuddies.com",phone:"",businessName:"Couch Buddies",businessAddress:"",pin:"1234",avatar:"CB",createdAt:"2026-01-01T00:00:00Z"}}[t]??null}function ew(){try{let t=null;const e=localStorage.getItem("couch-buddies-v1-backup");if(e&&(t=JSON.parse(e),console.log("[FirebaseSync] Found v1 backup in localStorage")),!t){const o=localStorage.getItem("couch-buddies-store");if(o){const l=JSON.parse(o);t=l==null?void 0:l.state}}if(!t||!Do.some(o=>{const l=t[o];return l?!!(Array.isArray(l)&&l.length>0||typeof l=="object"&&!Array.isArray(l)&&Object.keys(l).length>0):!1}))return null;const s={};for(const o of Do)s[o]=t[o]!==void 0&&t[o]!==null?t[o]:_N[o];return console.log("[FirebaseSync] Recovered existing configurations from localStorage"),s}catch(t){return console.warn("[FirebaseSync] Could not parse localStorage data:",t),null}}let Bh=!1;function mL(){const t=k.useRef(!1);return k.useEffect(()=>{if(t.current)return;t.current=!0;const e=[],n=bo(No,"store");SP(n).then(l=>{var u,h;if(l.exists()){const d=ew();if(d){const m=l.val();let p=!1;const g=Array.isArray(d.products)?d.products.length:0,y=Array.isArray(m.products)?m.products.length:0,w=Array.isArray(d.staff)?d.staff.length:0,_=Array.isArray(m.staff)?m.staff.length:0,C=Array.isArray(d.orders)?d.orders.length:0,S=Array.isArray(m.orders)?m.orders.length:0;if((g>y||w>_||C>S)&&(p=!0),p){console.log("[FirebaseSync] localStorage has richer data  merging into Firebase");const T={};for(const N of Do){const j=d[N],D=m[N];if(Array.isArray(j)&&Array.isArray(D)){const L=new Map;for(const W of D)W!=null&&W.id&&L.set(W.id,W);for(const W of j)W!=null&&W.id&&L.set(W.id,W);T[N]=[...L.values()]}else if(N==="treasury"){const L=((u=j==null?void 0:j.transactions)==null?void 0:u.length)||0,W=((h=D==null?void 0:D.transactions)==null?void 0:h.length)||0;T[N]=L>W?j:D}else T[N]=D??j}zl(n,Fh(T))}}}else{const d=ew(),m=d||_N;console.log(`[FirebaseSync] Seeding Firebase with ${d?"recovered localStorage data":"default seed data"}`),zl(n,Fh(m))}}).catch(l=>{console.error("[FirebaseSync] Failed to check/seed database:",l)});for(const l of Do){const u=bo(No,`store/${l}`),h=py(u,d=>{const m=fL(l,d.val());Bh=!0,Ie.setState({[l]:m}),Bh=!1},d=>{console.error(`[FirebaseSync] Listener error for "${l}":`,d)});e.push(h)}const s=py(bo(No,"store/products"),()=>{Ie.setState({_firebaseReady:!0}),s()},{onlyOnce:!0}),o=Ie.subscribe((l,u)=>{if(!Bh)for(const h of Do)l[h]!==u[h]&&zl(bo(No,`store/${h}`),Fh(l[h]))});return()=>{e.forEach(l=>l()),o()}},[]),null}kC.createRoot(document.getElementById("root")).render(a.jsx(Me.StrictMode,{children:a.jsxs(kS,{children:[a.jsx(mL,{}),a.jsx(hL,{}),a.jsx(y3,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#1F2937",color:"#fff",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px"},success:{iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{iconTheme:{primary:"#EF4444",secondary:"#fff"}}}})]})}));
